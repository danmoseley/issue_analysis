[
    {
        "url":  "https://github.com/dotnet/runtime/issues/34328",
        "createdAt":  "2020-03-31T15:34:34Z",
        "number":  34328,
        "author":  "MaximLipnin",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2023-06-23T03:19:58Z",
        "body":  "The tests below are disabled in Mono\u0027s `CoreFX.issues_windows.rsp` file. After enabling they still fail. I\u0027ll move them into respective xunit tests as `ActiveIssue`. \r\n- System.Reflection.Tests.MemberInfoTests.HasSameMetadataDefinitionAs_CornerCase_CLSIDConstructor\r\n- System.Reflection.Tests.MemberInfoTests.HasSameMetadataDefinitionAs_Negative_Null\r\n- System.Reflection.Tests.MemberInfoTests.HasSameMetadataDefinitionAs_Negative_NonRuntimeType\r\n- System.Reflection.Tests.AssemblyTests.LoadFile_ValidPEBadIL_ThrowsBadImageFormatExceptionWithPath\r\n- System.Tests.TypeTests.* (invoke Type.GetTypeFromCLSID in TypeTests cctor)\r\n\r\n```\r\nSystem.Tests.TypeTests.IsVariableBoundArray_FalseForByRefSZArrayType [FAIL]\r\nSystem.TypeInitializationException : The type initializer for \u0027System.Tests.TypeTests\u0027 threw an exception.\r\n---- System.PlatformNotSupportedException : Operation is not supported on this platform.\r\nStack Trace:\r\n    _\\src\\mono\\netcore\\System.Private.CoreLib\\src\\System\\Reflection\\RuntimeMethodInfo.cs(858,0): at System.Reflection.RuntimeConstructorInfo.InternalInvoke(Object obj, Object[] parameters, Boolean wrapExceptions)\r\n    ----- Inner Stack Trace -----\r\n    _\\src\\libraries\\System.Runtime\\tests\\System\\Type\\TypeTests.cs(60,0): at System.Tests.TypeTests..cctor()\r\n```",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOX5V2rA==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYxMjE1NDc4Mg==",
                                           "createdAt":  "2020-04-10T18:19:34Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "danmoseley",
                                           "body":  "@MaximLipnin could you perhaps attach the testResults.xml? The stack above only applies to one of the tests. The xml file would show the assert or exception causing the others to fail.\r\n\r\n[edit] Never mind, I could figure them out. It\u0027s a good practice to include though if you don\u0027t break out the test failure reasons.",
                                           "updatedAt":  "2020-04-10T18:25:14Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYxMjE1Njc4MA==",
                                           "createdAt":  "2020-04-10T18:24:42Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "danmoseley",
                                           "body":  "* `System.Tests.TypeTests.* (invoke Type.GetTypeFromCLSID in TypeTests cctor)` is because Type.GetTypeFromCLSID is not supported on Mono. It just needs disabling against something like \"PlatformDetection.SupportsComInterop\"\r\n* Same for System.Reflection.Tests.MemberInfoTests.HasSameMetadataDefinitionAs_CornerCase_CLSIDConstructor\r\n* All the other MemberInfoTests directly or indirectly use this API. For some This line needs changing so they can pass:\r\n```\r\n        private static IEnumerable\u003cType\u003e NegativeTypeDataRaw\r\n        {\r\n            get\r\n            {\r\n...\r\n                if (PlatformDetection.IsWindows)\r\n                    yield return Type.GetTypeFromCLSID(new Guid(\"DCA66D18-E253-4695-9E08-35B54420AFA2\"));\r\n```\r\n\r\nSystem.Reflection.Tests.AssemblyTests.LoadFile_ValidPEBadIL_ThrowsBadImageFormatExceptionWithPath is probably simply because Mono does not include the path in the BadImageFormatException. That\u0027s a small bug fix for the Mono runtime.",
                                           "updatedAt":  "2020-04-10T18:24:42Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc41NU5U",
                                           "createdAt":  "2021-08-04T14:03:14Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "Moving to 7.0.0",
                                           "updatedAt":  "2021-08-04T14:03:14Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5flXas",
                                           "createdAt":  "2023-06-23T03:19:57Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "MichalStrehovsky",
                                           "body":  "I\u0027m fixing the annotations in #87907, but I\u0027m not removing the ActiveIssue - the exclusion on TypeTests disables a lot of tests and from my past experience there will be something else that is failing and I don\u0027t want to spend time/waste CI on.",
                                           "updatedAt":  "2023-06-23T03:19:57Z"
                                       }
                                   ],
                         "totalCount":  4
                     },
        "title":  "[Mono] Tests fail on windows due to Type.GetTypeFromCLSID not implemented",
        "labels":  [
                       "disabled-test",
                       "os-windows",
                       "runtime-mono",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/34371",
        "createdAt":  "2020-04-01T12:24:26Z",
        "number":  34371,
        "author":  "SamMonoRT",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2022-07-27T14:41:57Z",
        "body":  "Crash seen when running the following CoreCLR test on the mono runtime from the dotnet\\runtime repo. \r\nRepro : Command to run individual tests : From the dotnet\\runtime repo src\\mono\\netcore run this command or relevant one for a particular test - make run-tests-coreclr CoreClrTest=\"bash ../../artifacts/tests/coreclr/OSX.x64.Debug/ Interop/COM/Reflection/Reflection/Reflection.sh”\r\n\r\nCrash report : \r\n\r\n =================================================================\r\n          External Debugger Dump:\r\n          =================================================================\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/COM/Reflection/Reflection/Reflection.sh: line 275: 77251 Abort trap: 6           $LAUNCHER $ExePath \"${CLRTestExecutionArguments[@]}\"\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/COM/Reports/Interop.COM/Reflection/Reflection/Reflection.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun Reflection.dll \u0027\u0027\r\n          Scenario: ReflectionLoad\r\n          ArrayTesting\r\n          ColorTesting\r\n          ConsumeNETServerTesting\r\n          DispatchTesting\r\n          ErrorMarshalTesting\r\n          LicenseTesting\r\n          MockLicenseProvider\r\n          NumericTesting\r\n          StringTesting\r\n          INumericTesting\r\n          IArrayTesting\r\n          IStringTesting\r\n          HResult\r\n          IErrorMarshalTesting\r\n          IDispatchTesting_Exception\r\n          HFA_4\r\n          IDispatchTesting\r\n          IEventTesting\r\n          TestingEvents\r\n          IAggregationTesting\r\n          IColorTesting\r\n          ILicenseTesting\r\n          IConsumeNETServer\r\n          Guids\r\n          IEnumVARIANT\r\n          ContextMenu\r\n          MockLicense\r\n          Scenario: TypeIsComObject\r\n          ComImport Class\u0027s IsCOMObject should return true\r\n          TypeIsComObject Failed\r\n          Scenario: ActivateCOMType\r\n          cant resolve internal call to \"NETServer.ContextMenu::.ctor\" (tested without signature also)\r\n          \r\n          Your mono runtime and class libraries are out of sync.\r\n          The out of sync library is: /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/COM/Reflection/Reflection/NETServer.dll\r\n          \r\n          When you update one from git you need to update, compile and install\r\n          the other too.\r\n          Do not report this as a bug unless you\u0027re sure you have updated correctly:\r\n          you probably have a broken mono install.\r\n          If you see other errors or faults after this message they are probably related\r\n          and you need to fix your mono install first.\r\n          * Assertion: should not be reached at /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/mono/metadata/marshal.c:3513\r\n          \r\n          \r\n          =================================================================\r\n          Native Crash Reporting\r\n          =================================================================\r\n          Got a abrt while executing native code. This usually indicates\r\n          a fatal error in the mono runtime or one of the native libraries \r\n          used by your application.\r\n          =================================================================\r\n          \r\n          =================================================================\r\n          Native stacktrace:\r\n          =================================================================\r\n          0x10a2914b2 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_dump_native_crash_info\r\n          0x10a233105 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_handle_native_crash\r\n          0x10a290abf - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : sigabrt_signal_handler\r\n          0x7fff728f342d - /usr/lib/system/libsystem_platform.dylib : _sigtramp\r\n          0x0 - Unknown\r\n          0x7fff727c8a1c - /usr/lib/system/libsystem_c.dylib : abort\r\n          0x10a44e117 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : monoeg_assert_abort\r\n          0x10a42e117 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_log_write_logfile\r\n          0x10a44e5a5 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : monoeg_g_logv_nofree\r\n          0x10a44e72f - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : monoeg_assertion_message\r\n          0x10a44e787 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_assertion_message_unreachable\r\n          0x10a344364 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_marshal_get_native_wrapper\r\n          0x10a1923d3 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_jit_compile_method_with_opt\r\n          0x10a196993 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_jit_runtime_invoke\r\n          0x10a36c2c8 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_runtime_invoke_checked\r\n          0x10a373e46 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_runtime_try_invoke_array\r\n          0x10a31eed4 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : ves_icall_InternalInvoke\r\n          0x10a32aba4 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : ves_icall_InternalInvoke_raw\r\n          0x10bfc41b9 - Unknown\r\n          0x10bfc1bf3 - Unknown\r\n          \r\n          =================================================================\r\n          Telemetry Dumper:\r\n          =================================================================\r\n          Pkilling 0x123145443520512x from 0x4513787328x\r\n          Entering thread summarizer pause from 0x4513787328x\r\n          Finished thread summarizer pause from 0x4513787328x.\r\n          \r\n          Waiting for dumping threads to resume\r\n          \r\n          =================================================================\r\n          Basic Fault Address Reporting\r\n          =================================================================\r\n          Memory around native instruction pointer (0x7fff728417fa):0x7fff728417ea  ff ff c3 90 90 90 b8 48 01 00 02 49 89 ca 0f 05  .......H...I....\r\n          0x7fff728417fa  73 08 48 89 c7 e9 85 a2 ff ff c3 90 90 90 b8 53  s.H............S\r\n          0x7fff7284180a  00 00 02 49 89 ca 0f 05 73 08 48 89 c7 e9 6d a2  ...I....s.H...m.\r\n          0x7fff7284181a  ff ff c3 90 90 90 b8 83 01 00 02 49 89 ca 0f 05  ...........I....\r\n          \r\n          =================================================================\r\n          Managed Stacktrace:\r\n          =================================================================\r\n            at \u003cunknown\u003e \u003c0xffffffff\u003e\r\n            at System.Reflection.RuntimeConstructorInfo:InternalInvoke \u003c0x000b8\u003e\r\n            at System.Reflection.RuntimeConstructorInfo:InternalInvoke \u003c0x0008a\u003e\r\n            at System.RuntimeType:CreateInstanceMono \u003c0x00202\u003e\r\n            at System.RuntimeType:CreateInstanceSlow \u003c0x00082\u003e\r\n            at System.RuntimeType:CreateInstanceDefaultCtor \u003c0x00082\u003e\r\n            at System.Activator:CreateInstance \u003c0x000ba\u003e\r\n            at System.Activator:CreateInstance \u003c0x00052\u003e\r\n            at System.Activator:CreateInstance \u003c0x00042\u003e\r\n            at Reflection:ActivateCOMType \u003c0x0009a\u003e\r\n            at Reflection:Main \u003c0x000ba\u003e\r\n            at \u003cModule\u003e:runtime_invoke_int \u003c0x000a5\u003e\r\n          =================================================================\r\n          Expected: 100\r\n          Actual: 134\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/COM/Reflection/Reflection/Reflection.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.COM/Interop.COM.XUnitWrapper.cs(140,0): at Interop_COM._Reflection_Reflection_Reflection_._Reflection_Reflection_Reflection_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOM5Du-g==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYwNzIxODA3Mw==",
                                           "createdAt":  "2020-04-01T12:24:29Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "Dotnet-GitSync-Bot",
                                           "body":  "I couldn\u0027t figure out the best area label to add to this issue. Please help me learn by adding exactly one [area label](https://github.com/dotnet/runtime/blob/master/docs/area-owners.md).",
                                           "updatedAt":  "2020-04-01T12:24:29Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYwNzMwNTg1NQ==",
                                           "createdAt":  "2020-04-01T15:08:28Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "### Area Owners\n@lambdageek",
                                           "updatedAt":  "2020-04-01T15:08:28Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYwOTEwNzIzMQ==",
                                           "createdAt":  "2020-04-05T00:06:55Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "CoffeeFlux",
                                           "body":  "Part of the problem here seems to be that we\u0027re running COM tests with `DISABLE_COM` defined. The assertion is in `mono_marshal_get_native_wrapper`:\r\n```\r\n\tif (MONO_CLASS_IS_IMPORT (method-\u003eklass)) {\r\n\t\t/* The COM code is not AOT compatible, it calls mono_custom_attrs_get_attr_checked () */\r\n\t\tif (aot)\r\n\t\t\treturn method;\r\n#ifndef DISABLE_COM\r\n\t\treturn mono_cominterop_get_native_wrapper (method);\r\n#else\r\n\t\tg_assert_not_reached ();\r\n#endif\r\n\t}\r\n```\r\n\r\nWhich is called from `compile_special`:\r\n```\r\n\t\tMonoMethod *nm = mono_marshal_get_native_wrapper (method, TRUE, mono_aot_only);\r\n```\r\n\r\nThe line in the test causing the crash:\r\n```\r\n            var contextMenu = (NETServer.ContextMenu)Activator.CreateInstance(typeof(NETServer.ContextMenu));\r\n```\r\nwhere NETServer.ContextMenu is:\r\n```\r\n    [ComImport]\r\n    [Guid(\"09799AFB-AD67-11d1-ABCD-00C04FC30936\")]\r\n    public class ContextMenu\r\n    {\r\n    }\r\n```\r\n\r\nI\u0027m not sure what the expected behavior is when calling a COM method despite building with `DISABLE_COM`, but this might be a codegen issue and we shouldn\u0027t be trying to call into the marshalling code at all? Should we also not be running the COM tests with COM disabled?",
                                           "updatedAt":  "2020-04-05T01:49:45Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYxMDk2OTAxMw==",
                                           "createdAt":  "2020-04-08T13:44:52Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "@alexischr - sending this your way. Based on your investigations and comments from CoffeeFlux above, if you think this is an actual codegen issue, please assign it back to me. ",
                                           "updatedAt":  "2020-04-08T13:44:52Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDg2NTEzNjM3OA==",
                                           "createdAt":  "2021-06-21T15:41:07Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "moving to 7.0",
                                           "updatedAt":  "2021-06-21T15:41:07Z"
                                       }
                                   ],
                         "totalCount":  5
                     },
        "title":  "CoreCLR tests on Mono runtime : crash running Interop/COM/Reflection/Reflection/Reflection.sh",
        "labels":  [
                       "runtime-mono",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/34374",
        "createdAt":  "2020-04-01T12:30:07Z",
        "number":  34374,
        "author":  "SamMonoRT",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2023-07-24T15:00:21Z",
        "body":  "Crash seen when running the following CoreCLR test on the mono runtime from the dotnet\\runtime repo.\r\nRepro : Command to run individual tests : From the dotnet\\runtime repo src\\mono\\netcore run this command or relevant one for a particular test - make run-tests-coreclr CoreClrTest=\"bash ../../artifacts/tests/coreclr/OSX.x64.Debug/Interop/ICustomMarshaler/Primitives/ICustomMarshaler/ICustomMarshaler.sh”\r\n\r\nCrash report :\r\n\r\n=================================================================\r\n          External Debugger Dump:\r\n          =================================================================\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/ICustomMarshaler/Primitives/ICustomMarshaler/ICustomMarshaler.sh: line 282: 77280 Abort trap: 6           $LAUNCHER $ExePath \"${CLRTestExecutionArguments[@]}\"\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/ICustomMarshaler/Reports/Interop.ICustomMarshaler/Primitives/ICustomMarshaler/ICustomMarshaler.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun ICustomMarshaler.dll \u0027\u0027\r\n          Discovering...\r\n          Running 25 of 25 tests...\r\n          * Assertion at /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/mono/metadata/marshal-ilgen.c:93, condition `method\u0027 not met, function:get_method_nofail, Could not lookup method GetCustomMarshalerInstance in Marshal\r\n          \r\n          \r\n          =================================================================\r\n          Native Crash Reporting\r\n          =================================================================\r\n          Got a abrt while executing native code. This usually indicates\r\n          a fatal error in the mono runtime or one of the native libraries \r\n          used by your application.\r\n          =================================================================\r\n          \r\n          =================================================================\r\n          Native stacktrace:\r\n          =================================================================\r\n          0x107fca4b2 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_dump_native_crash_info\r\n          0x107f6c105 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_handle_native_crash\r\n          0x107fc9abf - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : sigabrt_signal_handler\r\n          0x7fff728f342d - /usr/lib/system/libsystem_platform.dylib : _sigtramp\r\n          0x0 - Unknown\r\n          0x7fff727c8a1c - /usr/lib/system/libsystem_c.dylib : abort\r\n          0x108187117 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : monoeg_assert_abort\r\n          0x108167117 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_log_write_logfile\r\n          0x1081875a5 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : monoeg_g_logv_nofree\r\n          0x10818772f - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : monoeg_assertion_message\r\n          0x108106340 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_mb_emit_auto_layout_exception\r\n          0x1080fcd98 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : emit_marshal_custom_ilgen\r\n          0x10807c77b - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_emit_marshal\r\n          0x108101a96 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : emit_native_wrapper_ilgen\r\n          0x10807d85c - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_marshal_get_native_wrapper\r\n          0x107eee0f8 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_method_to_ir\r\n          0x107ec56b9 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mini_method_compile\r\n          0x107ec7bbc - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_jit_compile_method_inner\r\n          0x107ecb9f2 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_jit_compile_method_with_opt\r\n          0x107f6f675 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_delegate_trampoline\r\n          0x10834c013 - Unknown\r\n          0x10bd89088 - Unknown\r\n          0x10bd88fb3 - Unknown\r\n          0x107ecff9e - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_jit_runtime_invoke\r\n          0x1080a52c8 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_runtime_invoke_checked\r\n          0x1080acc4e - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_runtime_try_invoke_array\r\n          0x108057ed4 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : ves_icall_InternalInvoke\r\n          0x108063ba4 - /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : ves_icall_InternalInvoke_raw\r\n          0x10bbf29e9 - Unknown\r\n          0x10bbf24f9 - Unknown\r\n          0x10bd8819b - Unknown\r\n          0x10bd88073 - Unknown\r\n          0x10bd8796b - Unknown\r\n          0x10bd877f3 - Unknown\r\n          0x10bd86fb3 - Unknown\r\n          0x10bd86e4b - Unknown\r\n          0x10bd85e63 - Unknown\r\n          0x10bd85d33 - Unknown\r\n          0x10bd830ab - Unknown\r\n          0x10bd82f73 - Unknown\r\n          0x10bd827d3 - Unknown\r\n          0x10bd8262b - Unknown\r\n          0x10bd81591 - Unknown\r\n          0x10bd81233 - Unknown\r\n          0x10bd8109b - Unknown\r\n          0x10bd8085b - Unknown\r\n          0x10bd80733 - Unknown\r\n          0x10bd7f2db - Unknown\r\n          0x10bd7f1a3 - Unknown\r\n          0x10bd7d4bb - Unknown\r\n          0x10bd7cfb3 - Unknown\r\n          0x10bd7ce83 - Unknown\r\n          0x10bd7c4ce - Unknown\r\n          0x10bd7bc6b - Unknown\r\n          0x10bd7bb33 - Unknown\r\n          0x10bd7ac7b - Unknown\r\n          0x10bd7ab53 - Unknown\r\n          0x10bd6a1c1 - Unknown\r\n          0x10bd694db - Unknown\r\n          0x10bd69393 - Unknown\r\n          0x10bd652e3 - Unknown\r\n          0x10bd651b3 - Unknown\r\n          0x10bd64205 - Unknown\r\n          0x10bd63b3b - Unknown\r\n          0x10bd63a03 - Unknown\r\n          0x10bcfe423 - Unknown\r\n          0x10bcfe0f3 - Unknown\r\n          0x10bcfd198 - Unknown\r\n          0x10bb5a2c3 - Unknown\r\n          0x10bcfca63 - Unknown\r\n          0x10bcf58c3 - Unknown\r\n          0x10bb5aac6 - Unknown\r\n          0x10bb5a2c3 - Unknown\r\n          0x10bb59e6b - Unknown\r\n          \r\n          =================================================================\r\n          Telemetry Dumper:\r\n          =================================================================\r\n          Pkilling 0x123145466441728x from 0x123145474879488x\r\n          Pkilling 0x123145485426688x from 0x123145474879488x\r\n          Pkilling 0x123145464332288x from 0x123145474879488x\r\n          Pkilling 0x123145483317248x from 0x123145474879488x\r\n          Pkilling 0x123145481207808x from 0x123145474879488x\r\n          Pkilling 0x123145479098368x from 0x123145474879488x\r\n          Pkilling 0x123145476988928x from 0x123145474879488x\r\n          Pkilling 0x123145495973888x from 0x123145474879488x\r\n          Pkilling 0x123145493864448x from 0x123145474879488x\r\n          Pkilling 0x123145472770048x from 0x123145474879488x\r\n          Pkilling 0x123145491755008x from 0x123145474879488x\r\n          Pkilling 0x123145470660608x from 0x123145474879488x\r\n          Pkilling 0x123145489645568x from 0x123145474879488x\r\n          Pkilling 0x123145468551168x from 0x123145474879488x\r\n          Pkilling 0x123145487536128x from 0x123145474879488x\r\n          Pkilling 0x4521860544x from 0x123145474879488x\r\n          Entering thread summarizer pause from 0x123145474879488x\r\n          Finished thread summarizer pause from 0x123145474879488x.\r\n          \r\n          Waiting for dumping threads to resume\r\n          \r\n          =================================================================\r\n          Basic Fault Address Reporting\r\n          =================================================================\r\n          Memory around native instruction pointer (0x7fff728417fa):0x7fff728417ea  ff ff c3 90 90 90 b8 48 01 00 02 49 89 ca 0f 05  .......H...I....\r\n          0x7fff728417fa  73 08 48 89 c7 e9 85 a2 ff ff c3 90 90 90 b8 53  s.H............S\r\n          0x7fff7284180a  00 00 02 49 89 ca 0f 05 73 08 48 89 c7 e9 6d a2  ...I....s.H...m.\r\n          0x7fff7284181a  ff ff c3 90 90 90 b8 83 01 00 02 49 89 ca 0f 05  ...........I....\r\n          \r\n          =================================================================\r\n          Managed Stacktrace:\r\n          =================================================================\r\n            at \u003cunknown\u003e \u003c0xffffffff\u003e\r\n            at Xunit.Assert:RecordException \u003c0x00057\u003e\r\n            at Xunit.Assert:Throws \u003c0x00062\u003e\r\n            at System.Runtime.InteropServices.Tests.ICustomMarshalerTests:Parameter_GetInstanceMethodReturnsVoid_ThrowsApplicationException \u003c0x00122\u003e\r\n            at System.Object:runtime_invoke_void__this__ \u003c0x000b0\u003e\r\n            at \u003cunknown\u003e \u003c0xffffffff\u003e\r\n            at System.Reflection.RuntimeMethodInfo:InternalInvoke \u003c0x000b8\u003e\r\n            at System.Reflection.RuntimeMethodInfo:Invoke \u003c0x0016a\u003e\r\n            at System.Reflection.MethodBase:Invoke \u003c0x00058\u003e\r\n            at Xunit.Sdk.TestInvoker`1:CallTestMethod \u003c0x0005a\u003e\r\n            at \u003c\u003cInvokeTestMethodAsync\u003eb__1\u003ed:MoveNext \u003c0x0040a\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x0010a\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder:Start \u003c0x00042\u003e\r\n            at \u003c\u003ec__DisplayClass48_1:\u003cInvokeTestMethodAsync\u003eb__1 \u003c0x000de\u003e\r\n            at \u003cAggregateAsync\u003ed__4:MoveNext \u003c0x000f5\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x0010a\u003e\r\n            at Xunit.Sdk.ExecutionTimer:AggregateAsync \u003c0x000e2\u003e\r\n            at \u003c\u003ec__DisplayClass48_1:\u003cInvokeTestMethodAsync\u003eb__0 \u003c0x0018a\u003e\r\n            at \u003cRunAsync\u003ed__9:MoveNext \u003c0x000a0\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x00102\u003e\r\n            at Xunit.Sdk.ExceptionAggregator:RunAsync \u003c0x000da\u003e\r\n            at \u003cInvokeTestMethodAsync\u003ed__48:MoveNext \u003c0x003ba\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x00112\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1:Start \u003c0x00042\u003e\r\n            at Xunit.Sdk.TestInvoker`1:InvokeTestMethodAsync \u003c0x0010e\u003e\r\n            at Xunit.Sdk.XunitTestInvoker:InvokeTestMethodAsync \u003c0x0013a\u003e\r\n            at \u003c\u003cRunAsync\u003eb__47_0\u003ed:MoveNext \u003c0x00779\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x0011a\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1:Start \u003c0x00042\u003e\r\n            at Xunit.Sdk.TestInvoker`1:\u003cRunAsync\u003eb__47_0 \u003c0x000e6\u003e\r\n            at \u003cRunAsync\u003ed__10`1:MoveNext \u003c0x000cb\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x00102\u003e\r\n            at Xunit.Sdk.ExceptionAggregator:RunAsync \u003c0x000fa\u003e\r\n            at Xunit.Sdk.TestInvoker`1:RunAsync \u003c0x0012a\u003e\r\n            at Xunit.Sdk.XunitTestRunner:InvokeTestMethodAsync \u003c0x0010a\u003e\r\n            at \u003cInvokeTestAsync\u003ed__4:MoveNext \u003c0x00210\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x00112\u003e\r\n            at Xunit.Sdk.XunitTestRunner:InvokeTestAsync \u003c0x000ea\u003e\r\n            at \u003c\u003ec__DisplayClass43_0:\u003cRunAsync\u003eb__0 \u003c0x00043\u003e\r\n            at \u003cRunAsync\u003ed__10`1:MoveNext \u003c0x000ab\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x0010a\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1:Start \u003c0x00042\u003e\r\n            at Xunit.Sdk.ExceptionAggregator:RunAsync \u003c0x0015e\u003e\r\n            at \u003cRunAsync\u003ed__43:MoveNext \u003c0x005b2\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x0011a\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1:Start \u003c0x00042\u003e\r\n            at Xunit.Sdk.TestRunner`1:RunAsync \u003c0x0010e\u003e\r\n            at Xunit.Sdk.XunitTestCaseRunner:RunTestAsync \u003c0x000f2\u003e\r\n            at \u003cRunAsync\u003ed__19:MoveNext \u003c0x003ca\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x00112\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1:Start \u003c0x00042\u003e\r\n            at Xunit.Sdk.TestCaseRunner`1:RunAsync \u003c0x0010e\u003e\r\n            at Xunit.Sdk.XunitTestCase:RunAsync \u003c0x000f2\u003e\r\n            at Xunit.Sdk.XunitTestMethodRunner:RunTestCaseAsync \u003c0x000bd\u003e\r\n            at \u003cRunTestCasesAsync\u003ed__32:MoveNext \u003c0x001ea\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x0011a\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1:Start \u003c0x00042\u003e\r\n            at Xunit.Sdk.TestMethodRunner`1:RunTestCasesAsync \u003c0x0010e\u003e\r\n            at \u003cRunAsync\u003ed__31:MoveNext \u003c0x001f8\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x0010a\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1:Start \u003c0x00042\u003e\r\n            at Xunit.Sdk.TestMethodRunner`1:RunAsync \u003c0x00106\u003e\r\n            at Xunit.Sdk.XunitTestClassRunner:RunTestMethodAsync \u003c0x0012a\u003e\r\n            at \u003cRunTestMethodsAsync\u003ed__38:MoveNext \u003c0x00b00\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x0012a\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1:Start \u003c0x00042\u003e\r\n            at Xunit.Sdk.TestClassRunner`1:RunTestMethodsAsync \u003c0x0011e\u003e\r\n            at \u003cRunAsync\u003ed__37:MoveNext \u003c0x00405\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x00112\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1:Start \u003c0x00042\u003e\r\n            at Xunit.Sdk.TestClassRunner`1:RunAsync \u003c0x0010e\u003e\r\n            at Xunit.Sdk.XunitTestCollectionRunner:RunTestClassAsync \u003c0x00132\u003e\r\n            at \u003cRunTestClassesAsync\u003ed__28:MoveNext \u003c0x004e4\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x0011a\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1:Start \u003c0x00042\u003e\r\n            at Xunit.Sdk.TestCollectionRunner`1:RunTestClassesAsync \u003c0x0010e\u003e\r\n            at \u003cRunAsync\u003ed__27:MoveNext \u003c0x00402\u003e\r\n            at System.Runtime.CompilerServices.AsyncMethodBuilderCore:Start \u003c0x00112\u003e\r\n            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1:Start \u003c0x00042\u003e\r\n            at Xunit.Sdk.TestCollectionRunner`1:RunAsync \u003c0x0010e\u003e\r\n            at Xunit.Sdk.XunitTestAssemblyRunner:RunTestCollectionAsync \u003c0x0010a\u003e\r\n            at \u003c\u003ec__DisplayClass14_2:\u003cRunTestCollectionsAsync\u003eb__2 \u003c0x00067\u003e\r\n            at System.Threading.Tasks.Task`1:InnerInvoke \u003c0x00097\u003e\r\n            at \u003c\u003ec:\u003c.cctor\u003eb__274_0 \u003c0x00036\u003e\r\n            at System.Threading.ExecutionContext:RunInternal \u003c0x00118\u003e\r\n            at System.Threading.Tasks.Task:ExecuteWithThreadLocal \u003c0x00312\u003e\r\n            at System.Threading.Tasks.Task:ExecuteEntry \u003c0x000f2\u003e\r\n            at \u003c\u003ec:\u003c.cctor\u003eb__8_0 \u003c0x0006a\u003e\r\n            at Xunit.Sdk.MaxConcurrencySyncContext:RunOnSyncContext \u003c0x0006e\u003e\r\n            at \u003c\u003ec__DisplayClass11_0:\u003cWorkerThreadProc\u003eb__0 \u003c0x0005a\u003e\r\n            at System.Threading.ExecutionContext:RunInternal \u003c0x00118\u003e\r\n            at System.Threading.ExecutionContext:Run \u003c0x00072\u003e\r\n            at System.Object:lambda_method2 \u003c0x0008a\u003e\r\n            at Xunit.Sdk.ExecutionContextHelper:Run \u003c0x00081\u003e\r\n            at Xunit.Sdk.MaxConcurrencySyncContext:WorkerThreadProc \u003c0x00262\u003e\r\n            at \u003c\u003ec:\u003cQueueUserWorkItem\u003eb__5_0 \u003c0x00076\u003e\r\n            at System.Threading.Tasks.Task:InnerInvoke \u003c0x000b5\u003e\r\n            at \u003c\u003ec:\u003c.cctor\u003eb__274_0 \u003c0x00036\u003e\r\n            at System.Threading.ExecutionContext:RunInternal \u003c0x00118\u003e\r\n            at System.Threading.Tasks.Task:ExecuteWithThreadLocal \u003c0x00312\u003e\r\n            at System.Threading.Tasks.Task:ExecuteEntryUnsafe \u003c0x000ba\u003e\r\n            at \u003c\u003ec:\u003c.cctor\u003eb__10_0 \u003c0x0006a\u003e\r\n            at System.Threading.Thread:StartCallback \u003c0x0012c\u003e\r\n            at System.Object:runtime_invoke_void__this__ \u003c0x000b0\u003e\r\n          =================================================================\r\n          Expected: 100\r\n          Actual: 134\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/ICustomMarshaler/Primitives/ICustomMarshaler/ICustomMarshaler.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.ICustomMarshaler/Interop.ICustomMarshaler.XUnitWrapper.cs(334,0): at Interop_ICustomMarshaler._Primitives_ICustomMaraler_ICustomMaraler_._Primitives_ICustomMarshaler_ICustomMarshaler_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n\r\n",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOJTeYRg==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYwNzIyMDU1Mg==",
                                           "createdAt":  "2020-04-01T12:30:10Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "Dotnet-GitSync-Bot",
                                           "body":  "I couldn\u0027t figure out the best area label to add to this issue. Please help me learn by adding exactly one [area label](https://github.com/dotnet/runtime/blob/master/docs/area-owners.md).",
                                           "updatedAt":  "2020-04-01T12:30:10Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYwNzMwNTU1OQ==",
                                           "createdAt":  "2020-04-01T15:08:02Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "### Area Owners\n@lambdageek",
                                           "updatedAt":  "2020-04-01T15:08:02Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYxMDYwMDMwOQ==",
                                           "createdAt":  "2020-04-07T20:20:27Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "Same as https://github.com/dotnet/runtime/issues/34372 .This can be closed as a duplicate.",
                                           "updatedAt":  "2020-04-07T20:20:27Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYxMDk3Mzk0Mg==",
                                           "createdAt":  "2020-04-08T13:54:12Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "@naricc - note while updating the issues.target file, this is a dupe of 34372. Please close this issue once you update that file with the right issue#. Thanks",
                                           "updatedAt":  "2020-04-08T13:54:12Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYyNDM0OTQ1Ng==",
                                           "createdAt":  "2020-05-05T22:57:55Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "alexischr",
                                           "body":  "With [this PR](https://github.com/dotnet/runtime/pull/34900), the failure for this test is now a SEGV in `System.SpanHelpers:IndexOf` (the problem is I think at `ClassForwardingCustomMarshaler:CleanUpNativeData`):\r\n\r\n```\r\n/Users/alexischr/runtime/.dotnet/dotnet msbuild /t:RunCoreClrTest /p:CoreClrTest=\"bash ../../artifacts/tests/coreclr/OSX.x64.Debug/Interop/ICustomMarshaler/Primitives/ICustomMarshaler/ICustomMarshaler.sh\" /p:CoreClrTestConfig=Debug /p:LibrariesTestConfig=Release /p:Configuration=Release ../mono.proj\r\nMicrosoft (R) Build Engine version 16.7.0-preview-20225-01+a123b6db0 for .NET Core\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\n  Copying Mono Runtime artifacts from \u0027/Users/alexischr/runtime/artifacts/bin/mono/OSX.x64.Release/\u0027 to \u0027/Users/alexischr/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\u0027.\u0027\r\n  BEGIN EXECUTION\r\n  /Users/alexischr/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun ICustomMarshaler.dll \u0027\u0027\r\n  Discovering...\r\n  Running 25 of 25 tests...\r\n\r\n  =================================================================\r\n  \tNative Crash Reporting\r\n  =================================================================\r\n  Got a segv while executing native code. This usually indicates\r\n  a fatal error in the mono runtime or one of the native libraries\r\n  used by your application.\r\n  =================================================================\r\n\r\n  =================================================================\r\n  \tNative stacktrace:\r\n  =================================================================\r\n  \t0x109738c46 - /Users/alexischr/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_dump_native_crash_info\r\n  \t0x1096dac95 - /Users/alexischr/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : mono_handle_native_crash\r\n  \t0x1098f37f7 - /Users/alexischr/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : altstack_handle_and_restore.cold.1\r\n  \t0x1097336be - /Users/alexischr/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/libcoreclr.dylib : altstack_handle_and_restore\r\n  \t0x10b969bdd - Unknown\r\n  \t0x10b969a4b - Unknown\r\n\r\n  =================================================================\r\n  \tTelemetry Dumper:\r\n  =================================================================\r\n  Pkilling 0x123145397870592x from 0x123145412636672x\r\n  Pkilling 0x123145416855552x from 0x123145412636672x\r\n  Pkilling 0x123145414746112x from 0x123145412636672x\r\n  Pkilling 0x123145410527232x from 0x123145412636672x\r\n  Pkilling 0x123145429512192x from 0x123145412636672x\r\n  Pkilling 0x123145408417792x from 0x123145412636672x\r\n  Pkilling 0x4514577856x from 0x123145412636672x\r\n  Pkilling 0x123145427402752x from 0x123145412636672x\r\n  Pkilling 0x123145406308352x from 0x123145412636672x\r\n  Pkilling 0x123145425293312x from 0x123145412636672x\r\n  Pkilling 0x123145404198912x from 0x123145412636672x\r\n  Pkilling 0x123145423183872x from 0x123145412636672x\r\n  Pkilling 0x123145402089472x from 0x123145412636672x\r\n  Pkilling 0x123145421074432x from 0x123145412636672x\r\n  Pkilling 0x123145399980032x from 0x123145412636672x\r\n  Pkilling 0x123145418964992x from 0x123145412636672x\r\n  Could not exec mono-hang-watchdog, expected on path \u0027/Users/alexischr/runtime/artifacts/obj/mono/OSX.x64.Release/out/etc/../bin/mono-hang-watchdog\u0027 (errno 2)\r\n  Entering thread summarizer pause from 0x123145412636672x\r\n  Finished thread summarizer pause from 0x123145412636672x.\r\n  Failed to create breadcrumb file (null)/crash_hash_0xc74268dd7\r\n\r\n  Waiting for dumping threads to resume\r\n\r\n  =================================================================\r\n  \tExternal Debugger Dump:\r\n  =================================================================\r\n\r\n  =================================================================\r\n  \tBasic Fault Address Reporting\r\n  =================================================================\r\n  Memory around native instruction pointer (0x10b969bdd):0x10b969bcd  00 00 00 41 ff d3 49 83 ef 08 49 8b c5 48 03 c3  ...A..I...I..H..\r\n  0x10b969bdd  0f b6 00 44 3b e0 0f 84 39 03 00 00 48 8d 4b 01  ...D;...9...H.K.\r\n  0x10b969bed  49 8b c5 48 03 c1 0f b6 00 44 3b e0 0f 84 2b 03  I..H.....D;...+.\r\n  0x10b969bfd  00 00 48 8d 4b 02 49 8b c5 48 03 c1 0f b6 00 44  ..H.K.I..H.....D\r\n\r\n  =================================================================\r\n  \tManaged Stacktrace:\r\n  =================================================================\r\n  \t  at System.SpanHelpers:IndexOf \u003c0x0011d\u003e\r\n  \t  at System.Runtime.InteropServices.Marshal:ZeroFreeCoTaskMemUTF8 \u003c0x0006a\u003e\r\n  \t  at System.Runtime.InteropServices.Marshal:ZeroFreeCoTaskMemAnsi \u003c0x00042\u003e\r\n  \t  at ClassForwardingCustomMarshaler:CleanUpNativeData \u003c0x00052\u003e\r\n  \t  at System.Runtime.InteropServices.Tests.ICustomMarshalerTests:MarshalerOnClassTypeMethod \u003c0x00220\u003e\r\n  \t  at System.Runtime.InteropServices.Tests.ICustomMarshalerTests:Parameter_CustomMarshalerProvidedOnClassType_ForwardsCorrectly \u003c0x000ea\u003e\r\n```",
                                           "updatedAt":  "2020-05-05T23:02:44Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYyNDM1MzYyMg==",
                                           "createdAt":  "2020-05-05T23:11:23Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "alexischr",
                                           "body":  "@CoffeeFlux You think this is this related to this? https://github.com/dotnet/runtime/pull/35804",
                                           "updatedAt":  "2020-05-05T23:11:23Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYyNDQwMDQ1NA==",
                                           "createdAt":  "2020-05-06T01:42:47Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "CoffeeFlux",
                                           "body":  "That looks like it might be the same UTF8 crash I was seeing in the StringMarshalling/UTF8 test, yeah. The crash I got was failing in a malloc call, but in both cases it broke the external debugger dumps (since presumably it\u0027s caused by some kind of memory corruption).",
                                           "updatedAt":  "2020-05-06T01:42:47Z"
                                       }
                                   ],
                         "totalCount":  7
                     },
        "title":  "CoreCLR tests on Mono runtime : crash running Interop/ICustomMarshaler/Primitives/ICustomMarshaler/ICustomMarshaler.sh",
        "labels":  [
                       "runtime-mono",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/34748",
        "createdAt":  "2020-04-09T07:56:46Z",
        "number":  34748,
        "author":  "MaximLipnin",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2023-07-24T14:57:50Z",
        "body":  "A lot of `System.Runtime.InteropServices.Tests` tests fail on windows.\r\n\r\nThe example of CI output :\r\n```\r\nSystem.Runtime.InteropServices.Tests.ReleaseComObjectTests.ReleaseComObject_NonComObject_ThrowsArgumentException [FAIL]\r\n    Assert.Throws() Failure\r\n    Expected: typeof(System.ArgumentException)\r\n    Actual:   typeof(System.PlatformNotSupportedException): COM Interop is not supported on this platform.\r\n    ---- System.PlatformNotSupportedException : COM Interop is not supported on this platform.\r\n    Stack Trace:\r\n    /_/src/libraries/System.Private.CoreLib/src/System/Runtime/InteropServices/Marshal.NoCom.cs(201,0): at System.Runtime.InteropServices.Marshal.ReleaseComObject(Object o)\r\n    /_/src/libraries/System.Runtime.InteropServices/tests/System/Runtime/InteropServices/Marshal/ReleaseComObjectTests.cs(29,0): at System.Runtime.InteropServices.Tests.ReleaseComObjectTests.\u003c\u003ec.\u003cReleaseComObject_NonComObject_ThrowsArgumentException\u003eb__2_0()\r\n    ----- Inner Stack Trace -----\r\n    /_/src/libraries/System.Private.CoreLib/src/System/Runtime/InteropServices/Marshal.NoCom.cs(201,0): at System.Runtime.InteropServices.Marshal.ReleaseComObject(Object o)\r\n    /_/src/libraries/System.Runtime.InteropServices/tests/System/Runtime/InteropServices/Marshal/ReleaseComObjectTests.cs(29,0): at System.Runtime.InteropServices.Tests.ReleaseComObjectTests.\u003c\u003ec.\u003cReleaseComObject_NonComObject_ThrowsArgumentException\u003eb__2_0()\r\nSystem.Runtime.InteropServices.Tests.ReleaseComObjectTests.ReleaseComObject_NullObject_ThrowsNullReferenceException [FAIL]\r\n    Assert.Throws() Failure\r\n    Expected: typeof(System.NullReferenceException)\r\n    Actual:   typeof(System.PlatformNotSupportedException): COM Interop is not supported on this platform.\r\n    ---- System.PlatformNotSupportedException : COM Interop is not supported on this platform.\r\n    Stack Trace:\r\n    /_/src/libraries/System.Private.CoreLib/src/System/Runtime/InteropServices/Marshal.NoCom.cs(201,0): at System.Runtime.InteropServices.Marshal.ReleaseComObject(Object o)\r\n    /_/src/libraries/System.Runtime.InteropServices/tests/System/Runtime/InteropServices/Marshal/ReleaseComObjectTests.cs(22,0): at System.Runtime.InteropServices.Tests.ReleaseComObjectTests.\u003c\u003ec.\u003cReleaseComObject_NullObject_ThrowsNullReferenceException\u003eb__1_0()\r\n    ----- Inner Stack Trace -----\r\n    /_/src/libraries/System.Private.CoreLib/src/System/Runtime/InteropServices/Marshal.NoCom.cs(201,0): at System.Runtime.InteropServices.Marshal.ReleaseComObject(Object o)\r\n    /_/src/libraries/System.Runtime.InteropServices/tests/System/Runtime/InteropServices/Marshal/ReleaseComObjectTests.cs(22,0): at System.Runtime.InteropServices.Tests.ReleaseComObjectTests.\u003c\u003ec.\u003cReleaseComObject_NullObject_ThrowsNullReferenceException\u003eb__1_0()\r\ncant resolve internal call to \"System.Runtime.InteropServices.Tests.Common.ComImportObject::.ctor\" (tested without signature also)\r\n\r\nYour mono runtime and class libraries are out of sync.\r\nThe out of sync library is: C:\\h\\w\\9EB608BF\\w\\AA6F0948\\e\\System.Runtime.InteropServices.Tests.dll\r\n\r\nWhen you update one from git you need to update, compile and install\r\nthe other too.\r\nDo not report this as a bug unless you\u0027re sure you have updated correctly:\r\nyou probably have a broken mono install.\r\nIf you see other errors or faults after this message they are probably related\r\nand you need to fix your mono install first.\r\n* Assertion: should not be reached at F:\\workspace\\_work\\1\\s\\src\\mono\\mono\\metadata\\marshal.c:3513\r\n\r\nSystem.Runtime.InteropServices.Tests.FinalReleaseComObjectTests.FinalReleaseComObject_NullObject_ThrowsArgumentNullException [FAIL]\r\n    Assert.Throws() Failure\r\n    Expected: typeof(System.ArgumentNullException)\r\n    Actual:   typeof(System.PlatformNotSupportedException): COM Interop is not supported on this platform.\r\n    ---- System.PlatformNotSupportedException : COM Interop is not supported on this platform.\r\n    Stack Trace:\r\n    /_/src/libraries/System.Private.CoreLib/src/System/Runtime/InteropServices/Marshal.NoCom.cs(61,0): at System.Runtime.InteropServices.Marshal.FinalReleaseComObject(Object o)\r\ncant resolve internal call to \"System.Runtime.InteropServices.Tests.Common.ComImportObject::.ctor\" (tested without signature also)\r\n    /_/src/libraries/System.Runtime.InteropServices/tests/System/Runtime/InteropServices/Marshal/FinalReleaseComObjectTests.cs(22,0): at System.Runtime.InteropServices.Tests.FinalReleaseComObjectTests.\u003c\u003ec.\u003cFinalReleaseComObject_NullObject_ThrowsArgumentNullException\u003eb__1_0()\r\n    ----- Inner Stack Trace -----\r\n\r\nYour mono runtime and class libraries are out of sync.\r\nThe out of sync library is: C:\\h\\w\\9EB608BF\\w\\AA6F0948\\e\\System.Runtime.InteropServices.Tests.dll\r\n\r\nWhen you update one from git you need to update, compile and install\r\nthe other too.\r\nDo not report this as a bug unless you\u0027re sure you have updated correctly:\r\nyou probably have a broken mono install.\r\nIf you see other errors or faults after this message they are probably related\r\nand you need to fix your mono install first.\r\n* Assertion: should not be reached at F:\\workspace\\_work\\1\\s\\src\\mono\\mono\\metadata\\marshal.c:3513\r\n\r\n    /_/src/libraries/System.Private.CoreLib/src/System/Runtime/InteropServices/Marshal.NoCom.cs(61,0): at System.Runtime.InteropServices.Marshal.FinalReleaseComObject(Object o)\r\n    /_/src/libraries/System.Runtime.InteropServices/tests/System/Runtime/InteropServices/Marshal/FinalReleaseComObjectTests.cs(22,0): at System.Runtime.InteropServices.Tests.FinalReleaseComObjectTests.\u003c\u003ec.\u003cFinalReleaseComObject_NullObject_ThrowsArgumentNullException\u003eb__1_0()\r\n```\r\nThe failing tests will be mark with `ActiveIssue` in https://github.com/dotnet/runtime/pull/32592.",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHONTVL3Q==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYxMTY4NjQ3NQ==",
                                           "createdAt":  "2020-04-09T18:33:53Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "danmoseley",
                                           "body":  "@MaximLipnin is COM Interop is not supported on this platform expected - doesn\u0027t Mono support COM interop?",
                                           "updatedAt":  "2020-04-09T18:33:53Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYxMTY5ODg5NQ==",
                                           "createdAt":  "2020-04-09T19:00:08Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "MaximLipnin",
                                           "body":  "@danmosemsft Thanks for taking a look. I\u0027m not sure about Mono\u0027s support in this case. What I can do in such cases is to track down possible reason, but because the number of disabled tests/classes/namespaces that I need to check within [my work for removing rsp files](https://github.com/dotnet/runtime/pull/32592) is quite big, it can take long time to investigate. So I just file a tracking issue which someone with broader knowledge can take a look at and decide what to do.\r\n\r\ncc/ @steveisok @marek-safar ",
                                           "updatedAt":  "2020-04-09T19:00:08Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc41NUvd",
                                           "createdAt":  "2021-08-04T14:02:26Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "Moving to 7.0.0",
                                           "updatedAt":  "2021-08-04T14:02:26Z"
                                       }
                                   ],
                         "totalCount":  3
                     },
        "title":  "[mono] Tests failed on windows: System.Runtime.InteropServices.Tests",
        "labels":  [
                       "disabled-test",
                       "os-windows",
                       "runtime-mono",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/35196",
        "createdAt":  "2020-04-20T11:26:25Z",
        "number":  35196,
        "author":  "CoffeeFlux",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2023-07-24T14:59:39Z",
        "body":  "From what I can tell AnsiBSTR, LPSTR, LPTSTR, and TBSTR are all partially wrong or unimplemented in netcore mono. AnsiBSTR only goes one way, LPSTR is treated as a UTF8STR for legacy reasons (not applicable to netcore), LPTSTR doesn\u0027t correctly differentiate between platforms in all cases, and TBSTR only goes one way.\r\n\r\nSadly, only AnsiBSTR, BSTR, and LPSTR are covered by the CoreCLR tests right now, but we should explore extending them to the other types as well. There are a lot of interop-related test failures, but hopefully that will clear up any with the strings themselves.",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOM5FlNg==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDg1NjgwNjUyNA==",
                                           "createdAt":  "2021-06-08T14:15:13Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "I think this was fixed by https://github.com/dotnet/runtime/pull/35804, right @CoffeeFlux ?",
                                           "updatedAt":  "2021-06-08T14:15:13Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDg1Njg1Njg4Nw==",
                                           "createdAt":  "2021-06-08T15:11:24Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "CoffeeFlux",
                                           "body":  "The issue was poorly named. That commit restructured a bunch of the marshaling code so that it\u0027s easier to tell what we do and don\u0027t support, and how it works, and fixed a lot of BStr-related issues. There are still some remaining failures I did _not_ fix with that commit, indicated by failing tests.",
                                           "updatedAt":  "2021-06-08T15:11:24Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDg2NTE2NjY0Ng==",
                                           "createdAt":  "2021-06-21T16:14:15Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "The failing tests are disabled. I don\u0027t believe we\u0027ll get to remaining fixes by 6.0 timeframe -  Moving to 7.0.0",
                                           "updatedAt":  "2021-06-21T16:14:15Z"
                                       }
                                   ],
                         "totalCount":  3
                     },
        "title":  "Implement full Mono string marshaling",
        "labels":  [
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/35225",
        "createdAt":  "2020-04-20T21:23:03Z",
        "number":  35225,
        "author":  "SamMonoRT",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-08-19T15:46:05Z",
        "body":  "Several failures seen when running the Interop/PInvoke* tests. These are CoreCLR tests run on the mono runtime from the dotnet\\runtime repo.\r\n\r\nRepro : \r\nCommand to run individual tests :\r\n```\r\ncd src/mono/netcore\r\nmake run-tests-coreclr CoreClrTest=\"bash ../../artifacts/tests/coreclr/OSX.x64.Debug/Regressions/coreclr/Interop/PInvoke/AsAny/AsAnyTest/AsAnyTest.sh\"\r\n```\r\n\r\n\r\n1. Interop/PInvoke/AsAny/AsAnyTest/AsAnyTest.sh \r\n2. Interop/PInvoke/CriticalHandles/Test/Test/Test.sh\r\n3. Interop/PInvoke/SizeParamIndex/ReversePInvoke/PassingByRef/PassingByRefTest/PassingByRefTest.sh\r\n4. Interop/PInvoke/Array/MarshalArrayAsParam/AsDefault/AsDefaultTest/AsDefaultTest.sh\r\n5. Interop/PInvoke/Array/MarshalArrayAsField/AsLPArray/AsLPArrayTest/AsLPArrayTest.sh\r\n6. Interop/PInvoke/CriticalHandles/StructTest/StructTest/StructTest.sh\r\n7. Interop/PInvoke/SizeParamIndex/ReversePInvoke/PassingByOut/PassingByOutTest/PassingByOutTest.sh \r\n8. Interop/PInvoke/Array/MarshalArrayAsField/AsByValArray/AsByValArrayTest/AsByValArrayTest.sh \r\n9. Interop/PInvoke/SizeParamIndex/PInvoke/Invalid/InvalidParamIndex/InvalidParamIndex.sh\r\n10. Interop/PInvoke/SizeParamIndex/PInvoke/PassingByOut/PassingByOutTest/PassingByOutTest.sh\r\n11. Interop/PInvoke/DateTime/DateTimeTest/DateTimeTest.sh \r\n12. Interop/PInvoke/CriticalHandles/ArrayTest/ArrayTest/ArrayTest.sh\r\n13. Interop/PInvoke/Array/MarshalArrayAsParam/AsLPArray/AsLPArrayTest/AsLPArrayTest.sh\r\n\r\n\r\n\r\n***************************************        Interop/PInvoke/AsAny/AsAnyTest/AsAnyTest.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/AsAny/AsAnyTest/AsAnyTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun AsAnyTest.dll \u0027\u0027\r\n          Scenario : Checking Marshal AsAny for sbyte array \r\n          System.ArgumentException: No PInvoke conversion exists for value passed to Object-typed parameter.\r\n             at AsAnyTests.TestSByteArray() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/AsAny/AsAnyTest.cs:line 629\r\n             at AsAnyTests.Main() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/AsAny/AsAnyTest.cs:line 303\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/AsAny/AsAnyTest/AsAnyTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(625,0): at Interop_PInvoke._AsAny_AsAnyTest_AsAnyTest_._AsAny_AsAnyTest_AsAnyTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n          \r\n\r\n\r\n\r\n***************************************        Interop/PInvoke/CriticalHandles/Test/Test/Test.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/CriticalHandles/Test/Test/Test.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun Test.dll \u0027\u0027\r\n          Test Failure: System.Runtime.InteropServices.MarshalDirectiveException: Type System.Runtime.InteropServices.CriticalHandle which is passed to unmanaged code must have a StructLayout attribute.\r\n             at CriticalHandleTest.InWorker(IntPtr handleValue) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/CriticalHandles/Test/Test.cs:line 117\r\n             at CriticalHandleTest.In() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/CriticalHandles/Test/Test.cs:line 106\r\n             at Test.Main(String[] args) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/CriticalHandles/Test/Test.cs:line 366\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/CriticalHandles/Test/Test/Test.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(1110,0): at Interop_PInvoke._CriticalHandles_Test_Test_Test_._CriticalHandles_Test_Test_Test_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n          \r\n\r\n\r\n\r\n***************************************        Interop/PInvoke/SizeParamIndex/ReversePInvoke/PassingByRef/PassingByRefTest/PassingByRefTest.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/SizeParamIndex/ReversePInvoke/PassingByRef/PassingByRefTest/PassingByRefTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun PassingByRefTest.dll \u0027\u0027\r\n          ReversePInvoke C-Style Array marshaled by ref with SizeParamIndex attribute(by ref Array size).\r\n          Scenario 1 : byte ==\u003e BYTE, Array_Size = byte.MinValue, Return_Array_Size = 20\r\n          Test Failure: System.Runtime.InteropServices.MarshalDirectiveException: Byref array marshalling to managed code is not implemented.\r\n             at ReversePInvoke_MashalArrayByRef_AsManagedTest.RunTestByRef() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/SizeParamIndex/ReversePInvoke/PassingByRef/PassingByRefTest.cs:line 163\r\n             at ReversePInvoke_MashalArrayByRef_AsManagedTest.Main() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/SizeParamIndex/ReversePInvoke/PassingByRef/PassingByRefTest.cs:line 214\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/SizeParamIndex/ReversePInvoke/PassingByRef/PassingByRefTest/PassingByRefTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(2662,0): at Interop_PInvoke._SizeParamIndex_ReversePInvoke_PassingByRef_PassingByRefTest_PassingByRefTest_._SizeParamIndex_ReversePInvoke_PassingByRef_PassingByRefTest_PassingByRefTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n          \r\n\r\n\r\n\r\n\r\n***************************************        Interop/PInvoke/Array/MarshalArrayAsParam/AsDefault/AsDefaultTest/AsDefaultTest.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/Array/MarshalArrayAsParam/AsDefault/AsDefaultTest/AsDefaultTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun AsDefaultTest.dll \u0027\u0027\r\n          ByVal marshaling CLR array as c-style-array no attributes\r\n          ByVal marshaling  CLR array as c-style-array with InAttribute applied\r\n          By value marshaling CLR array as c-style-array with InAttribute and OutAttribute applied\r\n          CStyle_Array_Int_InOut\r\n          CStyle_Array_Int_InOut_Null\r\n          CStyle_Array_Int_InOut_ZeroLength\r\n          CStyle_Array_Uint_InOut\r\n          CStyle_Array_Short_InOut\r\n          CStyle_Array_Word_InOut\r\n          CStyle_Array_Long64_InOut\r\n          CStyle_Array_ULong64_InOut\r\n          CStyle_Array_Double_InOut\r\n          CStyle_Array_Float_InOut\r\n          CStyle_Array_Byte_InOut\r\n          CStyle_Array_Char_InOut\r\n          CStyle_Array_LPSTR_InOut\r\nEXEC : Array marshaling error : Index: 0 :  Actual:0, Expected:99, [/Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/runtest.proj] [/Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/mono.proj]\r\n          \r\n          TEST FAIL: TestLibrary.AssertTestException: Assert.IsTrue: CStyle_Array_LPSTR_InOut:Equals\u003cstring\u003e\r\n             at TestLibrary.Assert.HandleFail(String assertionName, String message) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 735\r\n             at TestLibrary.Assert.IsTrue(Boolean condition, String message) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 302\r\n             at ArrayMarshal.TestMarshalInOut_ByVal() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/Array/MarshalArrayAsParam/AsDefault/AsDefaultTest.cs:line 453\r\n             at ArrayMarshal.Main() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/Array/MarshalArrayAsParam/AsDefault/AsDefaultTest.cs:line 662\r\n          ============ [CStyle_Array_Int] ============\r\n          ============ [CStyle_Array_Uint] ============\r\n          ============ [CStyle_Array_Short] ============\r\n          ============ [CStyle_Array_Word] ============\r\n          ============ [CStyle_Array_Long64] ============\r\n          ============ [CStyle_Array_ULong64] ============\r\n          ============ [CStyle_Array_Double] ============\r\n          ============ [CStyle_Array_Float] ============\r\n          ============ [CStyle_Array_Byte] ============\r\n          ============ [CStyle_Array_Char] ============\r\n          ============ [CStyle_Array_LPCSTR] ============\r\n          ============ [CStyle_Array_LPSTR] ============\r\n          ============ [CStyle_Array_LPCSTR] ============\r\n          ============ [CStyle_Array_Struct] ============\r\n          ============ [CStyle_Array_Bool] ============\r\n          ============ [CStyle_Array_Int] ============\r\n          ============ [CStyle_Array_Uint] ============\r\n          ============ [CStyle_Array_Short] ============\r\n          ============ [CStyle_Array_Word] ============\r\n          ============ [CStyle_Array_Long64] ============\r\n          ============ [CStyle_Array_ULong64] ============\r\n          ============ [CStyle_Array_Double] ============\r\n          ============ [CStyle_Array_Float] ============\r\n          ============ [CStyle_Array_Byte] ============\r\n          ============ [CStyle_Array_Char] ============\r\n          ============ [CStyle_Array_LPCSTR] ============\r\n          ============ [CStyle_Array_LPSTR] ============\r\n          ============ [CStyle_Array_LPCSTR] ============\r\n          ============ [CStyle_Array_Struct] ============\r\n          ============ [CStyle_Array_Bool] ============\r\n          ============ [CStyle_Array_Int_InOut] ============\r\n          ============ [CStyle_Array_Int] ============\r\n          ============ [CStyle_Array_Int_InOut_Null] ============\r\n          ============ [CStyle_Array_Int_InOut_ZeroLength] ============\r\n          ============ [CStyle_Array_Uint_InOut] ============\r\n          ============ [CStyle_Array_Uint] ============\r\n          ============ [CStyle_Array_Short_InOut] ============\r\n          ============ [CStyle_Array_Short] ============\r\n          ============ [CStyle_Array_Word_InOut] ============\r\n          ============ [CStyle_Array_Word] ============\r\n          ============ [CStyle_Array_Long64_InOut] ============\r\n          ============ [CStyle_Array_Long64] ============\r\n          ============ [CStyle_Array_ULong64_InOut] ============\r\n          ============ [CStyle_Array_ULong64] ============\r\n          ============ [CStyle_Array_Double_InOut] ============\r\n          ============ [CStyle_Array_Double] ============\r\n          ============ [CStyle_Array_Float_InOut] ============\r\n          ============ [CStyle_Array_Float] ============\r\n          ============ [CStyle_Array_Byte_InOut] ============\r\n          ============ [CStyle_Array_Byte] ============\r\n          ============ [CStyle_Array_Char_InOut] ============\r\n          ============ [CStyle_Array_Char] ============\r\n          ============ [CStyle_Array_LPSTR_InOut] ============\r\n          ============ [CStyle_Array_LPSTR] ============\r\n          ============ [CStyle_Array_LPCSTR] ============\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Array/MarshalArrayAsParam/AsDefault/AsDefaultTest/AsDefaultTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(334,0): at Interop_PInvoke._Array_MaralArrayAsParam_AsDefault_AsDefaultTest_AsDefaultTest_._Array_MarshalArrayAsParam_AsDefault_AsDefaultTest_AsDefaultTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n          \r\n\r\n\r\n\r\n***************************************        Interop/PInvoke/Array/MarshalArrayAsField/AsLPArray/AsLPArrayTest/AsLPArrayTest.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/Array/MarshalArrayAsField/AsLPArray/AsLPArrayTest/AsLPArrayTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun AsLPArrayTest.dll \u0027\u0027\r\n          RunTest 1 : Marshal Array In Sequential Struct As LPArray. \r\n          \r\n          Test FAIL: TestLibrary.AssertTestException: Assert.Fail: Expected \u0027System.TypeLoadException\u0027 to be thrown. TakeIntArraySeqStructByVal\r\n             at TestLibrary.Assert.HandleFail(String assertionName, String message) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 735\r\n             at TestLibrary.Assert.Fail(String message, Object[] args) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 722\r\n             at TestLibrary.Assert.Throws[TypeLoadException](Action action, String message, AssertThrowsOptions options) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 188\r\n             at Test.RunTest1(String report) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/Array/MarshalArrayAsField/AsLPArray/AsLPArrayTest.cs:line 176\r\n             at Test.Main(String[] args) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/Array/MarshalArrayAsField/AsLPArray/AsLPArrayTest.cs:line 429\r\n          ============ [TakeIntArraySeqStructByVal] ============\r\nEXEC : warning : Test error - BOOL Equals(T *, int, T *, int) [T = int] [/Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/runtest.proj] [/Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/mono.proj]\r\n          Array Length: expected: 100, actual: 117468592\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Array/MarshalArrayAsField/AsLPArray/AsLPArrayTest/AsLPArrayTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(237,0): at Interop_PInvoke._Array_MaralArrayAsField_AsLPArray_AsLPArrayTest_AsLPArrayTest_._Array_MarshalArrayAsField_AsLPArray_AsLPArrayTest_AsLPArrayTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n          \r\n\r\n\r\n***************************************        Interop/PInvoke/CriticalHandles/StructTest/StructTest/StructTest.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/CriticalHandles/StructTest/StructTest/StructTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun StructTest.dll \u0027\u0027\r\n          Test Failure: System.Runtime.InteropServices.MarshalDirectiveException: Type System.Runtime.InteropServices.CriticalHandle which is passed to unmanaged code must have a StructLayout attribute.\r\n             at CriticalHandleStructTest.InWorker(IntPtr handleValue) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/CriticalHandles/StructTest/StructTest.cs:line 83\r\n             at CriticalHandleStructTest.In() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/CriticalHandles/StructTest/StructTest.cs:line 72\r\n             at CriticalHandleStructTest.Main(String[] args) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/CriticalHandles/StructTest/StructTest.cs:line 186\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/CriticalHandles/StructTest/StructTest/StructTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(1013,0): at Interop_PInvoke._CriticalHandles_StructTest_StructTest_StructTest_._CriticalHandles_StructTest_StructTest_StructTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n         \r\n\r\n\r\n***************************************        Interop/PInvoke/SizeParamIndex/ReversePInvoke/PassingByOut/PassingByOutTest/PassingByOutTest.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/SizeParamIndex/ReversePInvoke/PassingByOut/PassingByOutTest/PassingByOutTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun PassingByOutTest.dll \u0027\u0027\r\n          ReversePInvoke C-Style Array marshaled by out with SizeParamIndex attribute(by out Array size).\r\n          Scenario 1 : byte ==\u003e BYTE, Array_Size = byte.MinValue, Return_Array_Size = 20\r\n          Test Failure: System.Runtime.InteropServices.MarshalDirectiveException: Byref array marshalling to managed code is not implemented.\r\n             at ReversePInvoke_MashalArrayByOut_AsManagedTest.RunTestByOut() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/SizeParamIndex/ReversePInvoke/PassingByOut/PassingByOutTest.cs:line 153\r\n             at ReversePInvoke_MashalArrayByOut_AsManagedTest.Main() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/SizeParamIndex/ReversePInvoke/PassingByOut/PassingByOutTest.cs:line 199\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/SizeParamIndex/ReversePInvoke/PassingByOut/PassingByOutTest/PassingByOutTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(2565,0): at Interop_PInvoke._SizeParamIndex_ReversePInvoke_PassingByOut_PassingByOutTest_PassingByOutTest_._SizeParamIndex_ReversePInvoke_PassingByOut_PassingByOutTest_PassingByOutTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n          \r\n\r\n\r\n***************************************        Interop/PInvoke/Array/MarshalArrayAsField/AsByValArray/AsByValArrayTest/AsByValArrayTest.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/Array/MarshalArrayAsField/AsByValArray/AsByValArrayTest/AsByValArrayTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun AsByValArrayTest.dll \u0027\u0027\r\n          RunTest1 : Marshal array as field as ByValArray in sequential struct as parameter.\r\n          \r\n          TEST FAIL: Assert.IsTrue: TakeCharArraySeqStructByVal\r\n          ============ [TakeIntArraySeqStructByVal] ============\r\n          ============ [TakeUIntArraySeqStructByVal] ============\r\n          ============ [TakeShortArraySeqStructByVal] ============\r\n          ============ [TakeWordArraySeqStructByVal] ============\r\n          ============ [TakeLong64ArraySeqStructByVal] ============\r\n          ============ [TakeULong64ArraySeqStructByVal] ============\r\n          ============ [TakeDoubleArraySeqStructByVal] ============\r\n          ============ [TakeFloatArraySeqStructByVal] ============\r\n          ============ [TakeByteArraySeqStructByVal] ============\r\n          ============ [TakeCharArraySeqStructByVal] ============\r\nEXEC : warning : Test error - BOOL Equals(T *, int, T *, int) [T = char] [/Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/runtest.proj] [/Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/mono.proj]\r\n          Array Element Not Equal: index: 1Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Array/MarshalArrayAsField/AsByValArray/AsByValArrayTest/AsByValArrayTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(140,0): at Interop_PInvoke._Array_MaralArrayAsField_AsByValArray_AsByValArrayTest_AsByValArrayTest_._Array_MarshalArrayAsField_AsByValArray_AsByValArrayTest_AsByValArrayTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n         \r\n\r\n\r\n***************************************        Interop/PInvoke/SizeParamIndex/PInvoke/Invalid/InvalidParamIndex/InvalidParamIndex.sh [FAIL]\r\n          \r\n          Unhandled Exception:\r\n          TestLibrary.AssertTestException: Assert.Fail: Expected \u0027System.Runtime.InteropServices.MarshalDirectiveException\u0027 to be thrown, however \u0027System.DllNotFoundException\u0027 was thrown. \r\n             at TestLibrary.Assert.HandleFail(String assertionName, String message) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 735\r\n             at TestLibrary.Assert.Fail(String message, Object[] args) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 722\r\n             at TestLibrary.Assert.Throws[MarshalDirectiveException](Action action, String message, AssertThrowsOptions options) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 191\r\n             at Program.Main() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/SizeParamIndex/PInvoke/Invalid/InvalidParamIndex.cs:line 21\r\n          [ERROR] FATAL UNHANDLED EXCEPTION: TestLibrary.AssertTestException: Assert.Fail: Expected \u0027System.Runtime.InteropServices.MarshalDirectiveException\u0027 to be thrown, however \u0027System.DllNotFoundException\u0027 was thrown. \r\n             at TestLibrary.Assert.HandleFail(String assertionName, String message) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 735\r\n             at TestLibrary.Assert.Fail(String message, Object[] args) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 722\r\n             at TestLibrary.Assert.Throws[MarshalDirectiveException](Action action, String message, AssertThrowsOptions options) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 191\r\n             at Program.Main() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/SizeParamIndex/PInvoke/Invalid/InvalidParamIndex.cs:line 21\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/SizeParamIndex/PInvoke/Invalid/InvalidParamIndex/InvalidParamIndex.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun InvalidParamIndex.dll \u0027\u0027\r\n          Expected: 100\r\n          Actual: 1\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/SizeParamIndex/PInvoke/Invalid/InvalidParamIndex/InvalidParamIndex.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(2274,0): at Interop_PInvoke._SizeParamIndex_PInvoke_Invalid_InvalidParamIndex_InvalidParamIndex_._SizeParamIndex_PInvoke_Invalid_InvalidParamIndex_InvalidParamIndex_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n          \r\n\r\n\r\n\r\n***************************************        Interop/PInvoke/SizeParamIndex/PInvoke/PassingByOut/PassingByOutTest/PassingByOutTest.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/SizeParamIndex/PInvoke/PassingByOut/PassingByOutTest/PassingByOutTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun PassingByOutTest.dll \u0027\u0027\r\n          \r\n          Scenario(byte ==\u003e BYTE): Array_Size(N-\u003eM) = 1 Starts!\r\n          Test Failure: System.Runtime.InteropServices.MarshalDirectiveException: Not implemented.\r\n             at ClientMarshalArrayAsSizeParamIndexByOutTest.SizeParamTypeIsByte() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/SizeParamIndex/PInvoke/PassingByOut/PassingByOutTest.cs:line 67\r\n             at ClientMarshalArrayAsSizeParamIndexByOutTest.Main() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/SizeParamIndex/PInvoke/PassingByOut/PassingByOutTest.cs:line 236\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/SizeParamIndex/PInvoke/PassingByOut/PassingByOutTest/PassingByOutTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(2371,0): at Interop_PInvoke._SizeParamIndex_PInvoke_PassingByOut_PassingByOutTest_PassingByOutTest_._SizeParamIndex_PInvoke_PassingByOut_PassingByOutTest_PassingByOutTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n          \r\n        \r\n\r\n\r\n\r\n\r\n\r\n***************************************       Interop/PInvoke/Delegate/DelegateTest/DelegateTest.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/Delegate/DelegateTest/DelegateTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun DelegateTest.dll \u0027\u0027\r\n          Test Failure: System.Runtime.InteropServices.MarshalDirectiveException: Byref marshalling of delegates is not implemented.\r\n             at DelegateTest.TestFunctionPointer() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/Delegate/DelegateTest.cs:line 23\r\n             at DelegateTest.Main(String[] args) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/Delegate/DelegateTest.cs:line 127\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Delegate/DelegateTest/DelegateTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(1401,0): at Interop_PInvoke._Delegate_DelegateTest_DelegateTest_._Delegate_DelegateTest_DelegateTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n         \r\n\r\n\r\n\r\n\r\n\r\n\r\n***************************************        Interop/PInvoke/DateTime/DateTimeTest/DateTimeTest.sh [FAIL]\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/DateTime/DateTimeTest/DateTimeTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun DateTimeTest.dll \u0027\u0027\r\n          Test Failure: System.Runtime.InteropServices.MarshalDirectiveException: Type System.DateTime which is passed to unmanaged code must have a StructLayout attribute.\r\n             at DateTimeTest.Main(String[] args) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/DateTime/DateTimeTest.cs:line 35\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/DateTime/DateTimeTest/DateTimeTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(1207,0): at Interop_PInvoke._DateTime_DateTimeTest_DateTimeTest_._DateTime_DateTimeTest_DateTimeTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n          \r\n\r\n\r\n\r\n\r\n\r\n***************************************        Interop/PInvoke/CriticalHandles/ArrayTest/ArrayTest/ArrayTest.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/CriticalHandles/ArrayTest/ArrayTest/ArrayTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun ArrayTest.dll \u0027\u0027\r\n          Test Failure: TestLibrary.AssertTestException: Assert.Fail: Expected \u0027System.Runtime.InteropServices.MarshalDirectiveException\u0027 to be thrown. \r\n             at TestLibrary.Assert.HandleFail(String assertionName, String message) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 735\r\n             at TestLibrary.Assert.Fail(String message, Object[] args) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 722\r\n             at TestLibrary.Assert.Throws[MarshalDirectiveException](Action action, String message, AssertThrowsOptions options) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 188\r\n             at CriticalHandleArrayTest.Ret() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/CriticalHandles/ArrayTest/ArrayTest.cs:line 106\r\n             at CriticalHandleArrayTest.Main(String[] args) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/CriticalHandles/ArrayTest/ArrayTest.cs:line 143\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/CriticalHandles/ArrayTest/ArrayTest/ArrayTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(819,0): at Interop_PInvoke._CriticalHandles_ArrayTest_ArrayTest_ArrayTest_._CriticalHandles_ArrayTest_ArrayTest_ArrayTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n          \r\n\r\n\r\n\r\n***************************************        Interop/PInvoke/Array/MarshalArrayAsParam/AsLPArray/AsLPArrayTest/AsLPArrayTest.sh [FAIL]\r\n          \r\n          Return code:      1\r\n          Raw output file:      /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Reports/Interop.PInvoke/Array/MarshalArrayAsParam/AsLPArray/AsLPArrayTest/AsLPArrayTest.output.txt\r\n          Raw output:\r\n          BEGIN EXECUTION\r\n          /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root/corerun AsLPArrayTest.dll \u0027\u0027\r\n          ByVal marshaling CLR array as c-style-array no attributes\r\n          ByVal marshaling  CLR array as c-style-array with InAttribute applied\r\n          By value marshaling CLR array as c-style-array with InAttribute and OutAttribute applied\r\n          Array marshaling error, Index: 0 , Expected:99, Actual:0\r\n          \r\n          TEST FAIL: TestLibrary.AssertTestException: Assert.IsTrue: CStyle_Array_LPSTR_InOut:Equals\u003cstring\u003e\r\n             at TestLibrary.Assert.HandleFail(String assertionName, String message) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 735\r\n             at TestLibrary.Assert.IsTrue(Boolean condition, String message) in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Common/CoreCLRTestLibrary/Assertion.cs:line 302\r\n             at ArrayMarshal.TestMarshalByVal_InOut() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/Array/MarshalArrayAsParam/AsLPArray/AsLPArrayTest.cs:line 422\r\n             at ArrayMarshal.Main() in /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/coreclr/tests/src/Interop/PInvoke/Array/MarshalArrayAsParam/AsLPArray/AsLPArrayTest.cs:line 638\r\n          ============ [CStyle_Array_Int] ============\r\n          ============ [CStyle_Array_Uint] ============\r\n          ============ [CStyle_Array_Short] ============\r\n          ============ [CStyle_Array_Word] ============\r\n          ============ [CStyle_Array_Long64] ============\r\n          ============ [CStyle_Array_ULong64] ============\r\n          ============ [CStyle_Array_Double] ============\r\n          ============ [CStyle_Array_Float] ============\r\n          ============ [CStyle_Array_Byte] ============\r\n          ============ [CStyle_Array_Char] ============\r\n          ============ [CStyle_Array_LPCSTR] ============\r\n          ============ [CStyle_Array_LPSTR] ============\r\n          ============ [CStyle_Array_LPCSTR] ============\r\n          ============ [CStyle_Array_Struct] ============\r\n          ============ [CStyle_Array_Bool] ============\r\n          ============ [CStyle_Array_Int] ============\r\n          ============ [CStyle_Array_Uint] ============\r\n          ============ [CStyle_Array_Short] ============\r\n          ============ [CStyle_Array_Word] ============\r\n          ============ [CStyle_Array_Long64] ============\r\n          ============ [CStyle_Array_ULong64] ============\r\n          ============ [CStyle_Array_Double] ============\r\n          ============ [CStyle_Array_Float] ============\r\n          ============ [CStyle_Array_Byte] ============\r\n          ============ [CStyle_Array_Char] ============\r\n          ============ [CStyle_Array_LPCSTR] ============\r\n          ============ [CStyle_Array_LPSTR] ============\r\n          ============ [CStyle_Array_LPCSTR] ============\r\n          ============ [CStyle_Array_Struct] ============\r\n          ============ [CStyle_Array_Bool] ============\r\n          ============ [CStyle_Array_Int_InOut] ============\r\n          ============ [CStyle_Array_Int] ============\r\n          ============ [CStyle_Array_Int_InOut_Null] ============\r\n          ============ [CStyle_Array_Int_InOut_ZeroLength] ============\r\n          ============ [CStyle_Array_Uint_InOut] ============\r\n          ============ [CStyle_Array_Uint] ============\r\n          ============ [CStyle_Array_Short_InOut] ============\r\n          ============ [CStyle_Array_Short] ============\r\n          ============ [CStyle_Array_Word_InOut] ============\r\n          ============ [CStyle_Array_Word] ============\r\n          ============ [CStyle_Array_Long64_InOut] ============\r\n          ============ [CStyle_Array_Long64] ============\r\n          ============ [CStyle_Array_ULong64_InOut] ============\r\n          ============ [CStyle_Array_ULong64] ============\r\n          ============ [CStyle_Array_Double_InOut] ============\r\n          ============ [CStyle_Array_Double] ============\r\n          ============ [CStyle_Array_Float_InOut] ============\r\n          ============ [CStyle_Array_Float] ============\r\n          ============ [CStyle_Array_Byte_InOut] ============\r\n          ============ [CStyle_Array_Byte] ============\r\n          ============ [CStyle_Array_Char_InOut] ============\r\n          ============ [CStyle_Array_Char] ============\r\n          ============ [CStyle_Array_LPSTR_InOut] ============\r\n          ============ [CStyle_Array_LPSTR] ============\r\n          ============ [CStyle_Array_LPCSTR] ============\r\n          Expected: 100\r\n          Actual: 101\r\n          END EXECUTION - FAILED\r\n          Test Harness Exitcode is : 1\r\n          To run the test:\r\n          \u003e set CORE_ROOT=/Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Tests/Core_Root\r\n          \u003e /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/Interop/PInvoke/Array/MarshalArrayAsParam/AsLPArray/AsLPArrayTest/AsLPArrayTest.sh\r\n          Expected: True\r\n          Actual:   False\r\n          Stack Trace:\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/artifacts/tests/coreclr/OSX.x64.Debug/TestWrappers/Interop.PInvoke/Interop.PInvoke.XUnitWrapper.cs(431,0): at Interop_PInvoke._Array_MaralArrayAsParam_AsLPArray_AsLPArrayTest_AsLPArrayTest_._Array_MarshalArrayAsParam_AsLPArray_AsLPArrayTest_AsLPArrayTest_sh()\r\n            /Users/samarthpatel/Documents/DotNetRunTime/runtime/src/mono/netcore/System.Private.CoreLib/src/System/Reflection/RuntimeMethodInfo.cs(339,0): at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n         \r\n\r\n\r\n",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOJRkaBg==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYyMjIwMzc4Nw==",
                                           "createdAt":  "2020-05-01T01:24:01Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "alexischr",
                                           "body":  "For the `AsAnyTest.sh` failures, what\u0027s needed is implementation of array marshalling `mono_marshal_asany_impl`, Mono\u0027s JIT icall used for marshalling under the AsAny scheme. https://github.com/mono/mono/pull/19683 fixes about half of these cases, so the program fails later:\r\n```\r\n  Scenario : Checking Marshal AsAny for sbyte array\r\n  Scenario : Checking Marshal AsAny for byte array\r\n  Scenario : Checking Marshal AsAny for short array\r\n  Scenario : Checking Marshal AsAny for ushort array\r\n  Scenario : Checking Marshal AsAny for Int array\r\n  Scenario : Checking Marshal AsAny for uint array\r\n  Scenario : Checking Marshal AsAny for long array\r\n  Scenario : Checking Marshal AsAny for ulong array\r\n  Scenario : Checking Marshal AsAny for float array\r\n  Scenario : Checking Marshal AsAny for double array\r\n  Scenario : Checking Marshal AsAny for char array\r\n  System.ArgumentException: No PInvoke conversion exists for value passed to Object-typed parameter.\r\n```",
                                           "updatedAt":  "2020-05-01T01:24:01Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYyMjIyNTQ1MA==",
                                           "createdAt":  "2020-05-01T03:01:50Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "alexischr",
                                           "body":  "PR updated with char array implementation; now fails at bool arrays. CoreCLR marshals these to windows BOOLs: https://github.com/dotnet/runtime/blob/a1562933166c55025cf65dc45d72ec423ff83c02/src/coreclr/src/System.Private.CoreLib/src/System/StubHelpers.cs#L1067\r\n",
                                           "updatedAt":  "2020-05-01T03:01:50Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYyMjIyNzE0MA==",
                                           "createdAt":  "2020-05-01T03:10:28Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "alexischr",
                                           "body":  "In general, the failures are because of not implemented features, and not runtime bugs (byref array marshalling, byref delegate marshalling, the above AsAny array variants, some handling of in/out parameter types)",
                                           "updatedAt":  "2020-05-01T03:10:28Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDYyMjQwMjA1NA==",
                                           "createdAt":  "2020-05-01T14:06:14Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "@lambdageek - just fyi - some missing implementations identified here.",
                                           "updatedAt":  "2020-05-01T14:06:14Z"
                                       }
                                   ],
                         "totalCount":  4
                     },
        "title":  "CoreCLR tests on Mono runtime : Failures in Interop/PInvoke* tests",
        "labels":  [
                       "runtime-mono",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/41180",
        "createdAt":  "2020-08-21T19:37:39Z",
        "number":  41180,
        "author":  "CoffeeFlux",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2022-07-18T13:13:56Z",
        "body":  "The documentation for `NativeLibrary.Load(String, Assembly, Nullable\u003cDllImportSearchPath\u003e)` specifies the following (emphasis mine):\r\n\r\n\u003e This method does **not** invoke the following managed callbacks for native library resolution:\r\n\u003e * The per-assembly registered callback.\r\n\u003e * The `AssemblyLoadContext.LoadUnmanagedDll` method.\r\n\u003e * The `AssemblyLoadContext.ResolvingUnmanagedDll` event.\r\n\r\nMeanwhile, in the `ResolveUnmanagedDll` tests, we have tests ensuring the exact opposite: we invoke `NativeLibrary.Load` and expect it to return a junk value returned in a custom ALC\u0027s overridden `LoadUnmanagedDll` method.\r\n\r\nCoreCLR, on the other hand, currently calls `LoadUnmanagedDll` but _not_ `DllImportResolver`. I assume `DllImportResolver` is what the docs are referring to with \"the per-assembly registered callback\", though that should probably be clarified. See https://gist.github.com/CoffeeFlux/c31a8a4293ad5ef9ce229f0a66fd661e for an example.\r\n\r\nWhat is the intended behavior here? No matter what, I think we need to update the docs, tests, and one of the runtimes.\r\n\r\nFrom my perspective, the documented behavior seems sane and is how the Mono implementation currently behaves, and I would be happy with CoreCLR disabling the callbacks for `NativeLibrary` and updating the tests/docs accordingly. If we do want the callbacks, Mono and the docs will need to be updated. We should probably include a test verifying the `DllImportResolver` behavior one way or another as well, regardless of the outcome. Finally, I strongly believe the callbacks should be an all or nothing affair to avoid creating a mess of different loading algorithms.\r\n\r\ncc: @swaroop-sridhar @jkotas ",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHONTVXgw==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDY3ODQ1ODg2OQ==",
                                           "createdAt":  "2020-08-21T19:38:59Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "CoffeeFlux",
                                           "body":  "I should add that this is currently blocking Mono from passing the `Interop/NativeLibrary/AssemblyLoadContext/ResolveUnmanagedDllTests` runtime tests. Once we\u0027ve decided on the intended behavior, I\u0027ll help update everything accordingly and re-enable.",
                                           "updatedAt":  "2020-08-21T19:38:59Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDY3ODQ2MjE5MQ==",
                                           "createdAt":  "2020-08-21T19:47:35Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkotas",
                                           "body":  "https://github.com/dotnet/runtime/issues/13819 and https://github.com/dotnet/runtime/pull/34519 is related to this.\r\n\r\nI agree that we should update the docs.\r\n\r\ncc @elinor-fung ",
                                           "updatedAt":  "2020-08-21T19:47:35Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDY3ODQ2NDQ1Mg==",
                                           "createdAt":  "2020-08-21T19:53:19Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "CoffeeFlux",
                                           "body":  "Eeeh, I wish I\u0027d known about this when it was open for discussion, or at least been pinged after the fact so I could update Mono. I _really_ don\u0027t like the potential for recursion or the exclusion of `DllImportResolver`, but I guess this is a done deal?",
                                           "updatedAt":  "2020-08-21T19:56:14Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDY3ODUyNDMzMg==",
                                           "createdAt":  "2020-08-21T21:26:34Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkotas",
                                           "body":  "I am sorry about forgetting to cc you on the original issue.",
                                           "updatedAt":  "2020-08-21T21:26:34Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDY3ODU0NzAxNw==",
                                           "createdAt":  "2020-08-21T22:48:56Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "CoffeeFlux",
                                           "body":  "I apologize for re-litigating this after RC1 has already branched, but to elaborate:\r\n\r\nHaving read through the related issues/PR in full, I think this is a significant change in functionality that deviates from the original purpose of the API and features potentially breaking behavior, so I\u0027m confused why it isn\u0027t marked as such and didn\u0027t get documented anywhere. \"This API wraps the P/Invoke resolution algorithm\" is quite different from being a simple wrapper around the OS loader, and might as well be a new API proposal.\r\n\r\nI still don\u0027t totally understand the customer scenario here, but even with some imagination excluding `DllImportResolver` does not seem to make much sense. The premise for the whole issue was \"`NativeLoad.Load` that takes an Assembly should behave as if `DllImport` was used in the given assembly\", but if that\u0027s an over-simplification I question what the purpose then is. We\u0027ve now created some weird stripped-down version of the unmanaged library resolution logic, excluding the assembly-specific callback despite passing that assembly in directly. Who wants this and why? Is there some larger context I\u0027m missing? I think if we\u0027re creating a minor modification on the loading algorithm for a very specific scenario there should be a clear need, as this has a lot of potential for both weird bugs in customer code and unintuitive behavior. I can at least sort of understand wanting the expose the P/Invoke resolution algorithm to managed, but now this isn\u0027t even that.\r\n\r\nFinally, I would prefer to move the recursion-detection logic to managed if at all possible. Part of the justification for excluding `DllImportResolver` seems to have been to simplify that process, so I am a little sad that never ended up happening. I would prefer to avoid implementing this on the native side in Mono, so if I\u0027m implementing this I will probably be putting the logic in managed anyway.\r\n\r\nAs far as documentation updates go, we should probably update both the NativeLibrary API page as the one detailing the unmanaged loading algorithm, since we now have a variant on it that should be included.\r\n\r\nOn the bright side, I don\u0027t think NativeLibrary is very useful on wasm, so I don\u0027t think I have to rush this to completion for a backport?",
                                           "updatedAt":  "2020-08-21T23:02:24Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDY3ODU1MTU4Mg==",
                                           "createdAt":  "2020-08-21T23:09:09Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkotas",
                                           "body":  "The scenario is loading of native libraries using NativeLibrary APIs inside a custom AssemblyLoadContext. We have missed this scenario when have introduced NativeLibrary APIs originally.\r\n\r\nhttps://github.com/natemcmaster/DotNetCorePlugins/issues/84 is an example of the problem that this solved. How would you would solve this problem instead?\r\n\r\nYes, the callbacks are asymmetric. I think it is desirable because they serve difference purposes https://github.com/dotnet/runtime/pull/34519#discussion_r403406613 . \r\n\r\nThe recursion detection was dropped from the final version of the change. If we kept it, I agree it should be implemented in managed. I have commented on it in https://github.com/dotnet/runtime/pull/34519#discussion_r403369031",
                                           "updatedAt":  "2020-08-21T23:09:09Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDY3ODU1Mjk5NA==",
                                           "createdAt":  "2020-08-21T23:16:06Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "CoffeeFlux",
                                           "body":  "Ah, didn\u0027t realize the recursion detection was dropped. I assumed it was just left on the native side, and didn\u0027t go through the CoreCLR diff in detail.",
                                           "updatedAt":  "2020-08-21T23:16:06Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDY3ODU1NzgwNA==",
                                           "createdAt":  "2020-08-21T23:41:15Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "CoffeeFlux",
                                           "body":  "Okay, I see. So to be clear, the use of this is the following scenario:\r\n\r\nYou have a plugin running in a custom ALC that needs to load an unmanaged library via `NativeLibrary` rather than P/Invoke directly, but you store those libraries elsewhere and want to provide some sort of resolution logic for it.\r\n\r\nI guess the alternative solution is just copying to the same directory as the assembly and passing the appropriate attribute, but that\u0027s not a terribly nice solution.\r\n\r\nI now follow your comment on the intended use of the APIs, though I don\u0027t agree. Can you point me to where our guidance indicates that \"It is expected to be overriden by the assembly for itself only\"? It wouldn\u0027t surprise me if it exists and I don\u0027t see it, but it doesn\u0027t appear in the API docs at least. I guess the idea is it\u0027s implicit because it only allows a single delegate to be set per assembly?\r\n\r\nFrom my perspective as someone who wasn\u0027t involved in the API design process, it\u0027s just another possible level of granularity, and since the API takes in an Assembly rather than just finding one contextually it seems reasonable to potentially use assembly-specific resolution logic in the above scenario. Excluding it intentionally, imo, creates unnecessary complexity in the resolution algorithm, which I would really like to avoid.\r\n\r\nAgain, sorry for hashing this out once more, I just want to be clear so that when I update the tests/docs/Mono I understand the exact scenario we\u0027re concerned about.",
                                           "updatedAt":  "2020-08-22T00:12:08Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDY3ODU2ODM2Mg==",
                                           "createdAt":  "2020-08-22T00:41:36Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkotas",
                                           "body":  "We do not have it explicitly written in the docs. This guidance falls out from the limitation that you can only register one callback per assembly. \r\n\r\nI have started https://github.com/dotnet/dotnet-api-docs/pull/4713/ with the doc updates.",
                                           "updatedAt":  "2020-08-22T00:42:00Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDY3ODU2OTg5MQ==",
                                           "createdAt":  "2020-08-22T00:52:39Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "CoffeeFlux",
                                           "body":  "Gotcha.\r\n\r\nOn a related note, is `NativeLibrary.Load` now intended to check the ALC cache, and if so which callbacks are intended to populate it, if any? I assume `DllImportResolver` should not since it\u0027s assembly-specific, but `LoadUnmanagedDll` and the `Resolving` event?",
                                           "updatedAt":  "2020-08-22T00:52:39Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDY3ODU3MDkyOA==",
                                           "createdAt":  "2020-08-22T01:01:01Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHOBOI_QQ==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "CoffeeFlux",
                                                                               "createdAt":  "2020-08-22T01:07:43Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "jkotas",
                                           "body":  "\u003e LoadUnmanagedDll and the Resolving event?\r\n\r\nCoreCLR does not have any caches around this.",
                                           "updatedAt":  "2020-08-22T01:01:01Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDcxOTg3NjczMw==",
                                           "createdAt":  "2020-10-31T03:28:51Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkotas",
                                           "body":  "Remaining work is to fix Mono to pass Interop/NativeLibrary/AssemblyLoadContext/ResolveUnmanagedDllTests",
                                           "updatedAt":  "2020-10-31T03:28:51Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc41NVeD",
                                           "createdAt":  "2021-08-04T14:06:05Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "Moving to 7.0.0",
                                           "updatedAt":  "2021-08-04T14:06:05Z"
                                       }
                                   ],
                         "totalCount":  13
                     },
        "title":  "NativeLibrary.Load inconsistent between runtimes, documentation, and tests",
        "labels":  [
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/48084",
        "createdAt":  "2021-02-09T22:22:14Z",
        "number":  48084,
        "author":  "AaronRobinsonMSFT",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-08-19T15:46:06Z",
        "body":  "See https://github.com/dotnet/runtime/pull/48083#issuecomment-776280140\r\n",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHONTVUHQ==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc41NVQd",
                                           "createdAt":  "2021-08-04T14:05:00Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "Moving to 7.0.0",
                                           "updatedAt":  "2021-08-04T14:05:00Z"
                                       }
                                   ],
                         "totalCount":  1
                     },
        "title":  "[mono] P/Invoke SafeHandle tests fail",
        "labels":  [
                       "disabled-test",
                       "runtime-mono",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/48379",
        "createdAt":  "2021-02-17T03:22:18Z",
        "number":  48379,
        "author":  "jkotas",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-08-19T15:46:06Z",
        "body":  "See test being disabled in #48362",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHONXlI8g==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDc4MDI3MDIzMw==",
                                           "createdAt":  "2021-02-17T03:22:24Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "I couldn\u0027t figure out the best area label to add to this issue. If you have write-permissions please help me learn by adding exactly one [area label](https://github.com/dotnet/runtime/blob/master/docs/area-owners.md).",
                                           "updatedAt":  "2021-02-17T03:22:24Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc41eUjy",
                                           "createdAt":  "2021-08-11T20:46:57Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "Moving to 7.0",
                                           "updatedAt":  "2021-08-11T20:46:57Z"
                                       }
                                   ],
                         "totalCount":  2
                     },
        "title":  "[Mono] Missing error handling in Marshal.GetDelegateForFunctionPointer",
        "labels":  [
                       "disabled-test",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/50440",
        "createdAt":  "2021-03-30T18:50:30Z",
        "number":  50440,
        "author":  "lambdageek",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2022-01-25T15:53:12Z",
        "body":  "That is, implement the Mono part of https://github.com/dotnet/runtime/issues/46775\r\n\r\n`CallConvMemberFunction` is a new unmanaged calling convention modifier that can be applied in combination with another calling convention on x86 that can be used to modify a cdecl, stdcall or fastcall calling convention to call a member function.\r\n\r\nFor reference, the CoreCLR support was added in https://github.com/dotnet/runtime/pull/47828\r\n\r\nNote that there are tests that are disabled that reference this issue, see https://github.com/dotnet/runtime/pull/50461",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOPOBIUQ==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDgxMDQ5NjA0Mg==",
                                           "createdAt":  "2021-03-30T18:50:33Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "I couldn\u0027t figure out the best area label to add to this issue. If you have write-permissions please help me learn by adding exactly one [area label](https://github.com/dotnet/runtime/blob/master/docs/area-owners.md).",
                                           "updatedAt":  "2021-03-30T18:50:33Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc484EhR",
                                           "createdAt":  "2022-01-25T15:52:02Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lateralusX",
                                           "body":  "Windows x64 on Mono needs support for CallConvMemberFunction since win64 ABI handles value types differently for member functions, compared to global/static functions. The following runtime tests have been disabled on Mono Windows in issues.targets depending on this issue:\r\n\r\n/JIT/Directed/callconv/PlatformDefaultMemberFunction/PlatformDefaultMemberFunctionTest/*\r\n/JIT/Directed/callconv/CdeclMemberFunction/CdeclMemberFunctionTest/*\r\n/JIT/Directed/callconv/StdCallMemberFunction/StdCallMemberFunctionTest/*\r\n/JIT/Directed/callconv/ThisCall/ThisCallTest/*\r\n\r\nFailures are caused by delegates using CallConvMemberFunction and since Mono currently don\u0027t detect it, it will handle the pinvoke following win64 ABI defined for global/static functions, but in cases where returned type is a value type and CallConvMemberFunction is used, it should pass allocated return value address in first argument register (regardless of size), or in the case of a C++ member function, in the second argument register (this pointer goes in first argument).",
                                           "updatedAt":  "2022-01-25T15:53:12Z"
                                       }
                                   ],
                         "totalCount":  2
                     },
        "title":  "Implement  CallConvMemberFunction support for Mono",
        "labels":  [
                       "arch-x86",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/51711",
        "createdAt":  "2021-04-22T19:45:33Z",
        "number":  51711,
        "author":  "radekdoulik",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2023-10-16T21:26:51Z",
        "body":  "WebAssembly is gaining new features through [standardization process](https://github.com/WebAssembly/meetings/blob/master/process/phases.md). Even after a feature is standardized, it takes time to get implemented in the engines.\r\n\r\n[Roadmap table](https://webassembly.org/roadmap/) tracks implemented features in various engines. This issue tracks mono/wasm [future] support of these.\r\n\r\nStandardized features\r\n\r\n* JS BigInt to Wasm i64 integration\r\n* Bulk memory operations\r\n* Multi-value\r\n* Import \u0026 export of mutable globals\r\n* Reference types\r\n* Non-trapping float-to-int conversions\r\n* Sign-extension operations\r\n* Fixed-width SIMD https://github.com/dotnet/runtime/issues/51709\r\n\r\nIn-progress proposals\r\n\r\n* Exception handling https://github.com/dotnet/runtime/issues/51922\r\n* Module linking\r\n* Tail calls\r\n* Thread and atomics\r\n\r\n(I will be adding issues to track work on supporting more of these)\r\n",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOaThnsw==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDgyNTEzNzA4OA==",
                                           "createdAt":  "2021-04-22T19:45:36Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Tagging subscribers to \u0027arch-wasm\u0027: @lewing\nSee info in area-owners.md if you want to be subscribed.\n\u003cdetails\u003e\n\u003csummary\u003eIssue Details\u003c/summary\u003e\n\u003chr /\u003e\n\nWebassembly is gaining new features through [standardization process](https://github.com/WebAssembly/meetings/blob/master/process/phases.md). Even after a feature is standardized, it takes time to get implemented in the engines.\r\n\r\n[Roadmap table](https://webassembly.org/roadmap/) tracks implemented features in various engines. This issue tracks mono/wasm [future] support of these.\r\n\r\nStandardized features\r\n\r\n* JS BigInt to Wasm i64 integration\r\n* Bulk memory operations\r\n* Multi-value\r\n* Import \u0026 export of mutable globals\r\n* Reference types\r\n* Non-trapping float-to-int conversions\r\n* Sign-extension operations\r\n* Fixed-width SIMD https://github.com/dotnet/runtime/issues/51709\r\n\r\nIn-progress proposals\r\n\r\n* Exception handling\r\n* Module linking\r\n* Tail calls\r\n* Thread and atomics\r\n\r\n(I will be adding issues to track work on supporting more of these)\r\n\n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAuthor:\u003c/th\u003e\n    \u003ctd\u003eradekdoulik\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAssignees:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eLabels:\u003c/th\u003e\n    \u003ctd\u003e\n\n`arch-wasm`, `area-Interop-mono`\n\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eMilestone:\u003c/th\u003e\n    \u003ctd\u003eFuture\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\u003c/details\u003e",
                                           "updatedAt":  "2021-04-22T19:45:36Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5pOGez",
                                           "createdAt":  "2023-10-16T21:26:50Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "sajjadarashhh",
                                           "body":  "What will happen for component-model new feature in wasm?",
                                           "updatedAt":  "2023-10-16T21:26:50Z"
                                       }
                                   ],
                         "totalCount":  2
                     },
        "title":  "[wasm] WebAssembly features tracking issue",
        "labels":  [
                       "arch-wasm",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/51922",
        "createdAt":  "2021-04-27T12:31:21Z",
        "number":  51922,
        "author":  "radekdoulik",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  "Y3Vyc29yOnYyOpHODPiPbQ==",
                          "nodes":  [
                                        {
                                            "content":  "THUMBS_UP",
                                            "user":  "jirisykora83",
                                            "createdAt":  "2024-02-13T18:34:39Z"
                                        },
                                        {
                                            "content":  "THUMBS_UP",
                                            "user":  "SongOfYouth",
                                            "createdAt":  "2025-09-10T07:02:12Z"
                                        }
                                    ],
                          "totalCount":  2
                      },
        "updatedAt":  "2021-04-27T12:39:36Z",
        "body":  "There\u0027s an in-progress design proposal for wasm exceptions handling https://github.com/WebAssembly/exception-handling/blob/master/proposals/exception-handling/Exceptions.md\r\n\r\nSo far it is available only in Chrome as experimental feature.\r\n\r\nEmscripten will add `-fwasm-exceptions` option in [future](https://emscripten.org/docs/porting/exceptions.html).\r\n\r\nThat should improve the performace of exception handling a lot. Current exception handling has significant overhead as it needs interaction with JavaScript and also using interpreter in case of excptions filtering (`when` clause).",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOMVPI1g==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDgyNzU2OTE2Nw==",
                                           "createdAt":  "2021-04-27T12:31:25Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Tagging subscribers to \u0027arch-wasm\u0027: @lewing\nSee info in area-owners.md if you want to be subscribed.\n\u003cdetails\u003e\n\u003csummary\u003eIssue Details\u003c/summary\u003e\n\u003chr /\u003e\n\nThere\u0027s an in-progress design proposal for wasm exceptions handling https://github.com/WebAssembly/exception-handling/blob/master/proposals/exception-handling/Exceptions.md\r\n\r\nSo far it is available only in Chrome as experimental feature.\r\n\r\nEmscripten will add `-fwasm-exceptions` option in [future](https://emscripten.org/docs/porting/exceptions.html).\r\n\r\nThat should improve the performace of exception handling a lot. Current exception handling has significant overhead as it needs interaction with JavaScript and also using interpreter in case of excptions filtering (`when` clause).\n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAuthor:\u003c/th\u003e\n    \u003ctd\u003eradekdoulik\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAssignees:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eLabels:\u003c/th\u003e\n    \u003ctd\u003e\n\n`arch-wasm`, `area-Interop-mono`\n\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eMilestone:\u003c/th\u003e\n    \u003ctd\u003eFuture\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\u003c/details\u003e",
                                           "updatedAt":  "2021-04-27T12:31:25Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDgyNzU3NDQ4Ng==",
                                           "createdAt":  "2021-04-27T12:39:36Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "radekdoulik",
                                           "body":  "Current exceptions handling overhead measurements - browser-bench/AOT:\r\n\r\n| measurement | time |\r\n|-:|-:|\r\n|             Exceptions, TryCatch |     0.0109us |\r\n|        Exceptions, TryCatchThrow |     0.0063ms |\r\n|       Exceptions, TryCatchFilter |     0.4349us |\r\n| Exceptions, TryCatchFilterInline |     0.1140us |\r\n\r\nIt shows the overhead when throwing exception 0.01us vs 6300us - that\u0027s when we have to switch to JavaScript to handle the exception.\r\n\r\nAnd also 0.11-0.44us vs 0.01us for exceptions filtering - we are switching to interpreter in this case.\r\n",
                                           "updatedAt":  "2021-04-27T12:39:36Z"
                                       }
                                   ],
                         "totalCount":  2
                     },
        "title":  "[wasm] Exception handling tracking issue",
        "labels":  [
                       "arch-wasm",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/53077",
        "createdAt":  "2021-05-21T12:46:34Z",
        "number":  53077,
        "author":  "fanyang-mono",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2023-07-24T15:29:12Z",
        "body":  "Interop/UnmanagedCallConv/UnmanagedCallConvTest/UnmanagedCallConvTest.sh is a new test introduced by https://github.com/dotnet/runtime/pull/52869. It failed on Android x64, which is a staging pipeline. So the failure went in unnoticed.\r\n\r\nHere is the failure log:\r\nhttps://helixre8s23ayyeko0k025g8.blob.core.windows.net/dotnet-runtime-refs-pull-52869-merge-935df43c5e7a450b9e/Interop/console.1e8c41d2.log?sv=2019-07-07\u0026se=2021-06-10T01%3A17%3A30Z\u0026sr=c\u0026sp=rl\u0026sig=4OiQLdhBG1Ndf27P8bLfRa2Km72FsbsTnVAPWod6fxg%3D\r\n\r\nadb log:\r\n```\r\n05-21 14:56:55.223  6900  6920 I DOTNET  : MonoRunner initialize,, entryPointLibName=UnmanagedCallConvTest.dll\r\n05-21 14:56:55.223  6900  6920 D DOTNET  : file_path: /data/user/0/net.dot.Interop_UnmanagedCallConv/files/runtimeconfig.bin\r\n05-21 14:56:55.225  6900  6920 D DOTNET  : assembly_preload_hook: System.Private.CoreLib (null) /data/user/0/net.dot.Interop_UnmanagedCallConv/files\r\n05-21 14:56:55.298  6900  6920 D DOTNET  : assembly_preload_hook: UnmanagedCallConvTest.dll (null) /data/user/0/net.dot.Interop_UnmanagedCallConv/files\r\n05-21 14:56:55.298  6900  6920 D DOTNET  : Executable: UnmanagedCallConvTest.dll\r\n05-21 14:56:55.298  6900  6920 D DOTNET  : assembly_preload_hook: System.Runtime  /data/user/0/net.dot.Interop_UnmanagedCallConv/files\r\n05-21 14:56:55.299  6900  6920 D DOTNET  : assembly_preload_hook: System.Console  /data/user/0/net.dot.Interop_UnmanagedCallConv/files\r\n05-21 14:56:55.300  6900  6920 D DOTNET  : assembly_preload_hook: TestLibrary  /data/user/0/net.dot.Interop_UnmanagedCallConv/files\r\n05-21 14:56:55.358  6900  6920 D DOTNET  : assembly_preload_hook: System.Runtime.InteropServices  /data/user/0/net.dot.Interop_UnmanagedCallConv/files\r\n05-21 14:56:55.361  6900  6920 D DOTNET  : assembly_preload_hook: System.Threading  /data/user/0/net.dot.Interop_UnmanagedCallConv/files\r\n05-21 14:56:55.421  6900  6920 I DOTNET  : Running DefaultDllImport_Blittable...\r\n05-21 14:56:55.422  6900  6920 I DOTNET  :  -- default: UnmanagedCallConv()\r\n05-21 14:56:55.711  6900  6920 I DOTNET  : Test Failure: System.DllNotFoundException: UnmanagedCallConvNative\r\n05-21 14:56:55.711  6900  6920 I DOTNET  :    at Program.DefaultDllImport_Blittable() in UnmanagedCallConvTest.dll:token 0x6000006+0x14\r\n05-21 14:56:55.711  6900  6920 I DOTNET  :    at Program.Main(String[] args) in UnmanagedCallConvTest.dll:token 0x6000010+0x0\r\n05-21 14:56:55.712  6900  6920 D DOTNET  : Exit code: 101.\r\n05-21 14:56:55.712  6900  6920 I DOTNET  : MonoRunner finished, return-code=101\r\n```",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  null,
                         "nodes":  [

                                   ],
                         "totalCount":  0
                     },
        "title":  "[Mono][Android][Interop] Interop/UnmanagedCallConv/UnmanagedCallConvTest/UnmanagedCallConvTest.sh failed",
        "labels":  [
                       "os-android",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/53351",
        "createdAt":  "2021-05-27T14:23:03Z",
        "number":  53351,
        "author":  "fanyang-mono",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2023-07-24T15:28:18Z",
        "body":  "Android adb log\r\n\r\n```\r\n05-27 10:20:50.925 26353 26373 I DOTNET  : MonoRunner initialize,, entryPointLibName=DelegatePInvokeTest.dll\r\n05-27 10:20:50.926 26353 26373 D DOTNET  : file_path: /data/user/0/net.dot.Interop_StructMarshalling/files/runtimeconfig.bin\r\n05-27 10:20:50.928 26353 26373 D DOTNET  : assembly_preload_hook: System.Private.CoreLib (null) /data/user/0/net.dot.Interop_StructMarshalling/files\r\n05-27 10:20:51.001 26353 26373 D DOTNET  : assembly_preload_hook: DelegatePInvokeTest.dll (null) /data/user/0/net.dot.Interop_StructMarshalling/files\r\n05-27 10:20:51.001 26353 26373 D DOTNET  : Executable: DelegatePInvokeTest.dll\r\n05-27 10:20:51.001 26353 26373 D DOTNET  : assembly_preload_hook: System.Runtime  /data/user/0/net.dot.Interop_StructMarshalling/files\r\n05-27 10:20:51.002 26353 26373 D DOTNET  : assembly_preload_hook: System.Console  /data/user/0/net.dot.Interop_StructMarshalling/files\r\n05-27 10:20:51.004 26353 26373 D DOTNET  : assembly_preload_hook: System.Runtime.InteropServices  /data/user/0/net.dot.Interop_StructMarshalling/files\r\n05-27 10:20:51.006 26353 26373 D DOTNET  : assembly_preload_hook: System.Threading  /data/user/0/net.dot.Interop_StructMarshalling/files\r\n05-27 10:20:51.100 26353 26373 I DOTNET  : Run the methods for marshaling structure Delegate P/Invoke ByRef\r\n05-27 10:20:51.102 26353 26373 D DOTNET  : assembly_preload_hook: TestLibrary  /data/user/0/net.dot.Interop_StructMarshalling/files\r\n05-27 10:20:51.105 26353 26373 I DOTNET  : Delegate PInvoke,By Ref,Cdecl\r\n05-27 10:20:51.105 26353 26373 I DOTNET  : Calling DelegatePInvoke_MarshalStructComplexStructByRef_Cdecl...\r\n05-27 10:20:51.437 26353 26373 I DOTNET  : Test Failure: System.DllNotFoundException: SeqPInvokeNative\r\n05-27 10:20:51.437 26353 26373 I DOTNET  :    at MarshalStructTest.TestMethod_DelegatePInvoke_MarshalByRef_Cdecl(StructID structid) in DelegatePInvokeTest.dll:token 0x6000072+0xa3\r\n05-27 10:20:51.437 26353 26373 I DOTNET  :    at MarshalStructTest.Run_TestMethod_DelegatePInvoke_Mars\r\n05-27 10:20:51.438 26353 26373 I DOTNET  : halByRef_Cdecl() in DelegatePInvokeTest.dll:token 0x6000076+0x0\r\n05-27 10:20:51.438 26353 26373 I DOTNET  :    at MarshalStructTest.Main() in DelegatePInvokeTest.dll:token 0x600007a+0xa\r\n05-27 10:20:51.439 26353 26373 D DOTNET  : Exit code: 101.\r\n05-27 10:20:51.439 26353 26373 I DOTNET  : MonoRunner finished, return-code=101\r\n```",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOSBceGw==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc5IFrb_",
                                           "createdAt":  "2022-08-09T14:22:03Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "directhex",
                                           "body":  "@fanyang-mono how can I build this test?",
                                           "updatedAt":  "2022-08-09T14:22:03Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5IFx4b",
                                           "createdAt":  "2022-08-09T14:43:38Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "fanyang-mono",
                                           "body":  "\u003e @fanyang-mono how can I build this test?\r\n\r\nFollow these instructions for Android - https://github.com/dotnet/runtime/blob/main/docs/workflow/testing/mono/testing.md",
                                           "updatedAt":  "2022-08-09T14:43:38Z"
                                       }
                                   ],
                         "totalCount":  2
                     },
        "title":  "[Mono][Android][Interop] Interop/StructMarshalling/ReversePInvoke/MarshalSeqStruct/DelegatePInvoke/DelegatePInvokeTest/DelegatePInvokeTest.sh failed",
        "labels":  [
                       "os-android",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/53353",
        "createdAt":  "2021-05-27T14:28:20Z",
        "number":  53353,
        "author":  "fanyang-mono",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2023-07-24T15:29:03Z",
        "body":  "JIT/Regression/JitBlue/DevDiv_461649/DevDiv_461649/DevDiv_461649.sh failed on Android x64\r\n\r\nAndroid adb log:\r\n\r\n```\r\n05-27 10:25:48.064 26510 26530 I DOTNET  : MonoRunner initialize,, entryPointLibName=DevDiv_461649.dll\r\n05-27 10:25:48.064 26510 26530 D DOTNET  : file_path: /data/user/0/net.dot.JIT_Regression/files/runtimeconfig.bin\r\n05-27 10:25:48.066 26510 26530 D DOTNET  : assembly_preload_hook: System.Private.CoreLib (null) /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.140 26510 26530 D DOTNET  : assembly_preload_hook: DevDiv_461649.dll (null) /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.141 26510 26530 D DOTNET  : Executable: DevDiv_461649.dll\r\n05-27 10:25:48.141 26510 26530 D DOTNET  : assembly_preload_hook: System.Runtime  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.142 26510 26530 D DOTNET  : assembly_preload_hook: System.Xml.ReaderWriter  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.143 26510 26530 D DOTNET  : assembly_preload_hook: System.Private.Xml  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.144 26510 26530 D DOTNET  : assembly_preload_hook: System.Collections.NonGeneric  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.145 26510 26530 D DOTNET  : assembly_preload_hook: System.Collections  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.145 26510 26530 D DOTNET  : assembly_preload_hook: System.Console  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.146 26510 26530 D DOTNET  : assembly_preload_hook: System.Runtime.InteropServices  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.223 26510 26530 D DOTNET  : assembly_preload_hook: System.Net.Primitives  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.224 26510 26530 D DOTNET  : assembly_preload_hook: System.Private.Uri  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.230 26510 26530 D DOTNET  : assembly_preload_hook: System.ObjectModel  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.254 26510 26530 D DOTNET  : assembly_preload_hook: System.Collections.Specialized  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.299 26510 26530 D DOTNET  : assembly_preload_hook: System.Text.RegularExpressions  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.640 26510 26530 D DOTNET  : assembly_preload_hook: System.Threading  /data/user/0/net.dot.JIT_Regression/files\r\n05-27 10:25:48.873 26510 26530 E mono    : Unhandled Exception:\r\n05-27 10:25:48.873 26510 26530 E mono    : System.IO.FileNotFoundException: Could not find file \u0027/data/user/0/net.dot.JIT_Regression/files/Transform.xsl\u0027.\r\n05-27 10:25:48.873 26510 26530 E mono    : File name: \u0027/data/user/0/net.dot.JIT_Regression/files/Transform.xsl\u0027\r\n05-27 10:25:48.873 26510 26530 E mono    :    at Interop.ThrowExceptionForIoErrno(ErrorInfo errorInfo, String path, Boolean isDirectory, Func`2 errorRewriter) in System.Private.CoreLib.dll:token 0x600000a+0x14\r\n05-27 10:25:48.873 26510 26530 E mono    :    at Interop.CheckIo(Error error, String path, Boolean isDirectory, Func`2 errorRewriter) in System.Private.CoreLib.dll:token 0x600000b+0x9\r\n05-27 10:25:48.873 26510 26530 E mono    :    at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String path, OpenFlags flags, Int32 mode) in System.Private.CoreLib.dll:token 0x60000a1+0x52\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.IO.Strategies.FileStreamHelpers.OpenHandle(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize) in System.Private.CoreLib.dll:token 0x60055de+0xb\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.IO.Strategies.Net5CompatFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize) in System.Private.CoreLib.dll:token 0x60055ec+0x3c\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize) in System.Private.CoreLib.dll:token 0x60055dd+0x0\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.IO.Strategies.FileStreamHelpers.ChooseStrategy(FileStream fileStream, String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize) in System.Private.CoreLib.dll:token 0x60055d8+0x0\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize) in System.Private.CoreLib.dll:token 0x6005305+0x123\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options) in System.Private.CoreLib.dll:token 0x6005303+0x0\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean useAsync) in System.Private.CoreLib.dll:token 0x6005302+0x0\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize) in System.Private.CoreLib.dll:token 0x6005301+0x0\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy) in System.Private.Xml.dll:token 0x6000bf0+0x18\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn) in System.Private.Xml.dll:token 0x6000c8c+0x2c\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.Xml.Xsl.Xslt.XsltLoader.CreateReader(Uri uri, XmlResolver xmlResolver) in System.Private.Xml.dll:token 0x6002c9a+0x0\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.Xml.Xsl.Xslt.XsltLoader.Load(Compiler compiler, Object stylesheet, XmlResolver xmlResolver) in System.Private.Xml.dll:token 0x6002c94+0x8d\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.Xml.Xsl.Xslt.Compiler.Compile(Object stylesheet, XmlResolver xmlResolver, QilExpression\u0026 qil) in System.Private.Xml.dll:token 0x6002a53+0x5\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.Xml.Xsl.XslCompiledTransform.CompileXsltToQil(Object stylesheet, XsltSettings settings, XmlResolver stylesheetResolver) in System.Private.Xml.dll:token 0x60028a6+0xe\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.Xml.Xsl.XslCompiledTransform.LoadInternal(Object stylesheet, XsltSettings settings, XmlResolver stylesheetResolver) in System.Private.Xml.dll:token 0x60028a5+0x18\r\n05-27 10:25:48.873 26510 26530 E mono    :    at System.Xml.Xsl.XslCompiledTransform.Load(String stylesheetUri) in System.Private.Xml.dll:token 0x60028a3+0x20\r\n05-27 10:25:48.873 26510 26530 E mono    :    at XSLTest.Program.DotNetXslCompiledTransform(String inputXml, String inputXsl) in DevDiv_461649.dll:token 0x6000002+0x6\r\n05-27 10:25:48.873 26510 26530 E mono    :    at XSLTest.Program.Main(String[] args) in DevDiv_461649.dll:token 0x6000001+0x0\r\n05-27 10:25:48.873 26510 26530 E DOTNET  : UnhandledException: System.IO.FileNotFoundException Could not find file \u0027/data/user/0/net.dot.JIT_Regression/files/Transform.xsl\u0027.    at Interop.ThrowExceptionForIoErrno(ErrorInfo errorInfo, String path, Boolean isDirectory, Func`2 errorRewriter) in System.Private.CoreLib.dll:token 0x600000a+0x14\r\n05-27 10:25:48.873 26510 26530 E DOTNET  :    at Interop.CheckIo(Error error, String path, Boolean isDirectory, Func`2 errorRewriter) in System.Private.CoreLib.dll:token 0x600000b+0x9\r\n05-27 10:25:48.873 26510 26530 E DOTNET  :    at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String path, OpenFlags flags, Int32 mode) in System.Private.CoreLib.dll:token 0x60000a1+0x52\r\n05-27 10:25:48.873 26510 26530 E DOTNET  :    at System.IO.Strategies.FileStreamHelpers.OpenHandle(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize) in System.Private.CoreLib.dll:token 0x60055de+0xb\r\n05-27 10:25:48.873 26510 26530 E DOTNET  :    at System.IO.Strategies.Net5CompatFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize) in System.Private.CoreLib.dll:t\r\n05-27 10:25:49.178 31957 32393 I ActivityManager: Process net.dot.JIT_Regression (pid 26510) has died: fg  FGS \r\n```",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOSBkWzw==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc5IGRbP",
                                           "createdAt":  "2022-08-09T16:26:40Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "directhex",
                                           "body":  "This is, roughly speaking, expected behaviour right now. We aren\u0027t including the `.xml` or `.xsl` file from `DevDiv_461649/` in the assets.zip inside the .apk (or indeed anything except `.so`, `.a`, and `.dll`). I think we should punt this again - it\u0027s a test build bug only.",
                                           "updatedAt":  "2022-08-09T16:26:40Z"
                                       }
                                   ],
                         "totalCount":  1
                     },
        "title":  "[Mono][Android][Test] UnhandledException: System.IO.FileNotFoundException Could not find file \u0027/data/user/0/net.dot.JIT_Regression/files/Transform.xsl\u0027",
        "labels":  [
                       "disabled-test",
                       "os-android",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/54905",
        "createdAt":  "2021-06-29T15:24:11Z",
        "number":  54905,
        "author":  "fanyang-mono",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2025-07-14T15:42:52Z",
        "body":  "Failed tests list:\r\n\r\n- Interop/NativeLibrary/API/NativeLibraryTests/NativeLibraryTests.sh\r\n- Interop/NativeLibrary/Callback/CallbackStressTest_TargetUnix/CallbackStressTest_TargetUnix.sh\r\n\r\n[Full log](https://helixre8s23ayyeko0k025g8.blob.core.windows.net/dotnet-runtime-refs-pull-54516-merge-486ed47802b44cd5a6/Interop/console.3a419d7c.log?sv=2019-07-07\u0026se=2021-07-11T21%3A42%3A12Z\u0026sr=c\u0026sp=rl\u0026sig=bNVwODgwBmw9vhsZfWcoh08Yt4ZA4ne2wpc0el0XP%2FM%3D)\r\n\r\n```\r\n      06-21 22:19:56.080  3815  3832 I DOTNET  : MonoRunner initialize,, entryPointLibName=NativeLibraryTests.dll\r\n      06-21 22:19:56.080  3815  3832 D DOTNET  : file_path: /data/user/0/net.dot.Interop_NativeLibrary/files/runtimeconfig.bin\r\n      06-21 22:19:56.082  3815  3832 D DOTNET  : assembly_preload_hook: System.Private.CoreLib (null) /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.101  3815  3832 D DOTNET  : assembly_preload_hook: NativeLibraryTests.dll (null) /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.101  3815  3832 D DOTNET  : Executable: NativeLibraryTests.dll\r\n      06-21 22:19:56.101  3815  3832 D DOTNET  : assembly_preload_hook: System.Runtime  /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.101  3815  3832 D DOTNET  : assembly_preload_hook: System.Runtime.InteropServices  /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.101  3815  3832 D DOTNET  : assembly_preload_hook: TestLibrary  /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.102  3815  3832 D DOTNET  : assembly_preload_hook: System.Console  /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.179  3815  3832 E mono    : \r\n      06-21 22:19:56.179  3815  3832 E mono    : Unhandled Exception:\r\n      06-21 22:19:56.179  3815  3832 E mono    : System.PlatformNotSupportedException: Operation is not supported on this platform.\r\n      06-21 22:19:56.179  3815  3832 E mono    :    at NativeLibraryToLoad.GetFileName() in NativeLibraryTests.dll:token 0x600000d+0x27\r\n      06-21 22:19:56.179  3815  3832 E mono    :    at NativeLibraryToLoad.GetFullPath() in NativeLibraryTests.dll:token 0x600000e+0x12\r\n      06-21 22:19:56.179  3815  3832 E mono    :    at NativeLibraryTest.Main() in NativeLibraryTests.dll:token 0x6000001+0x14\r\n      06-21 22:19:56.179  3815  3832 E DOTNET  : UnhandledException: System.PlatformNotSupportedException Operation is not supported on this platform.    at NativeLibraryToLoad.GetFileName() in NativeLibraryTests.dll:token 0x600000d+0x27\r\n      06-21 22:19:56.179  3815  3832 E DOTNET  :    at NativeLibraryToLoad.GetFullPath() in NativeLibraryTests.dll:token 0x600000e+0x12\r\n      06-21 22:19:56.179  3815  3832 E DOTNET  :    at NativeLibraryTest.Main() in NativeLibraryTests.dll:token 0x6000001+0x14\r\n      06-21 22:19:56.215  1792  3093 I ActivityManager: Process net.dot.Interop_NativeLibrary (pid 3815) has died: fore FGS \r\n      06-21 22:19:56.215  1792  3093 W ActivityManager: Crash of app net.dot.Interop_NativeLibrary running instrumentation ComponentInfo{net.dot.Interop_NativeLibrary/net.dot.MonoRunner}\r\n      06-21 22:19:56.215  1792  3093 I ActivityManager: Force stopping net.dot.Interop_NativeLibrary appid=10158 user=0: finished inst\r\n      06-21 22:19:56.217  1535  1535 I Zygote  : Process 3815 exited cleanly (1)\r\n      06-21 22:19:56.217  1792  3835 W Binder  : Outgoing transactions from this process must be FLAG_ONEWAY\r\n      06-21 22:19:56.217  1792  3835 W Binder  : java.lang.Throwable\r\n      06-21 22:19:56.217  1792  3835 W Binder  : \tat android.os.BinderProxy.transact(BinderProxy.java:480)\r\n      06-21 22:19:56.217  1792  3835 W Binder  : \tat android.app.IInstrumentationWatcher$Stub$Proxy.instrumentationFinished(IInstrumentationWatcher.java:205)\r\n      06-21 22:19:56.217  1792  3835 W Binder  : \tat com.android.server.am.InstrumentationReporter$MyThread.run(InstrumentationReporter.java:86)\r\n      06-21 22:19:56.218  3804  3804 D AndroidRuntime: Shutting down VM\r\n      06-21 22:19:56.260  1792  1819 I libprocessgroup: Successfully killed process cgroup uid 10158 pid 3815 in 44ms\r\n```",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOYaYqTg==",
                         "nodes":  [
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDg3MDY5NTg1NA==",
                                           "createdAt":  "2021-06-29T15:24:15Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Tagging subscribers to \u0027arch-android\u0027: @steveisok, @akoeplinger\nSee info in area-owners.md if you want to be subscribed.\n\u003cdetails\u003e\n\u003csummary\u003eIssue Details\u003c/summary\u003e\n\u003chr /\u003e\n\nFailed test list:\r\n\r\n- Interop/NativeLibrary/API/NativeLibraryTests/NativeLibraryTests.sh\r\n- Interop/NativeLibrary/Callback/CallbackStressTest_TargetUnix/CallbackStressTest_TargetUnix.sh\r\n\r\n```\r\n      06-21 22:19:56.080  3815  3832 I DOTNET  : MonoRunner initialize,, entryPointLibName=NativeLibraryTests.dll\r\n      06-21 22:19:56.080  3815  3832 D DOTNET  : file_path: /data/user/0/net.dot.Interop_NativeLibrary/files/runtimeconfig.bin\r\n      06-21 22:19:56.082  3815  3832 D DOTNET  : assembly_preload_hook: System.Private.CoreLib (null) /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.101  3815  3832 D DOTNET  : assembly_preload_hook: NativeLibraryTests.dll (null) /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.101  3815  3832 D DOTNET  : Executable: NativeLibraryTests.dll\r\n      06-21 22:19:56.101  3815  3832 D DOTNET  : assembly_preload_hook: System.Runtime  /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.101  3815  3832 D DOTNET  : assembly_preload_hook: System.Runtime.InteropServices  /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.101  3815  3832 D DOTNET  : assembly_preload_hook: TestLibrary  /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.102  3815  3832 D DOTNET  : assembly_preload_hook: System.Console  /data/user/0/net.dot.Interop_NativeLibrary/files\r\n      06-21 22:19:56.179  3815  3832 E mono    : \r\n      06-21 22:19:56.179  3815  3832 E mono    : Unhandled Exception:\r\n      06-21 22:19:56.179  3815  3832 E mono    : System.PlatformNotSupportedException: Operation is not supported on this platform.\r\n      06-21 22:19:56.179  3815  3832 E mono    :    at NativeLibraryToLoad.GetFileName() in NativeLibraryTests.dll:token 0x600000d+0x27\r\n      06-21 22:19:56.179  3815  3832 E mono    :    at NativeLibraryToLoad.GetFullPath() in NativeLibraryTests.dll:token 0x600000e+0x12\r\n      06-21 22:19:56.179  3815  3832 E mono    :    at NativeLibraryTest.Main() in NativeLibraryTests.dll:token 0x6000001+0x14\r\n      06-21 22:19:56.179  3815  3832 E DOTNET  : UnhandledException: System.PlatformNotSupportedException Operation is not supported on this platform.    at NativeLibraryToLoad.GetFileName() in NativeLibraryTests.dll:token 0x600000d+0x27\r\n      06-21 22:19:56.179  3815  3832 E DOTNET  :    at NativeLibraryToLoad.GetFullPath() in NativeLibraryTests.dll:token 0x600000e+0x12\r\n      06-21 22:19:56.179  3815  3832 E DOTNET  :    at NativeLibraryTest.Main() in NativeLibraryTests.dll:token 0x6000001+0x14\r\n      06-21 22:19:56.215  1792  3093 I ActivityManager: Process net.dot.Interop_NativeLibrary (pid 3815) has died: fore FGS \r\n      06-21 22:19:56.215  1792  3093 W ActivityManager: Crash of app net.dot.Interop_NativeLibrary running instrumentation ComponentInfo{net.dot.Interop_NativeLibrary/net.dot.MonoRunner}\r\n      06-21 22:19:56.215  1792  3093 I ActivityManager: Force stopping net.dot.Interop_NativeLibrary appid=10158 user=0: finished inst\r\n      06-21 22:19:56.217  1535  1535 I Zygote  : Process 3815 exited cleanly (1)\r\n      06-21 22:19:56.217  1792  3835 W Binder  : Outgoing transactions from this process must be FLAG_ONEWAY\r\n      06-21 22:19:56.217  1792  3835 W Binder  : java.lang.Throwable\r\n      06-21 22:19:56.217  1792  3835 W Binder  : \tat android.os.BinderProxy.transact(BinderProxy.java:480)\r\n      06-21 22:19:56.217  1792  3835 W Binder  : \tat android.app.IInstrumentationWatcher$Stub$Proxy.instrumentationFinished(IInstrumentationWatcher.java:205)\r\n      06-21 22:19:56.217  1792  3835 W Binder  : \tat com.android.server.am.InstrumentationReporter$MyThread.run(InstrumentationReporter.java:86)\r\n      06-21 22:19:56.218  3804  3804 D AndroidRuntime: Shutting down VM\r\n      06-21 22:19:56.260  1792  1819 I libprocessgroup: Successfully killed process cgroup uid 10158 pid 3815 in 44ms\r\n```\n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAuthor:\u003c/th\u003e\n    \u003ctd\u003efanyang-mono\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAssignees:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eLabels:\u003c/th\u003e\n    \u003ctd\u003e\n\n`area-Interop-mono`, `os-android`\n\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eMilestone:\u003c/th\u003e\n    \u003ctd\u003e6.0.0\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\u003c/details\u003e",
                                           "updatedAt":  "2021-06-29T15:24:15Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDg3MDcxOTc4Nw==",
                                           "createdAt":  "2021-06-29T15:55:16Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHOBwlzAA==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "fanyang-mono",
                                                                               "createdAt":  "2021-06-29T16:00:50Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "steveisok",
                                           "body":  "@fanyang-mono I believe there needs to be an additional OS check added https://github.com/dotnet/runtime/blob/57bfe474518ab5b7cfe6bf7424a79ce3af9d6657/src/tests/Interop/NativeLibrary/NativeLibraryToLoad/NativeLibraryToLoad.cs#L14-L26",
                                           "updatedAt":  "2021-06-29T15:55:16Z"
                                       },
                                       {
                                           "id":  "MDEyOklzc3VlQ29tbWVudDg4MTA2MzI5NA==",
                                           "createdAt":  "2021-07-15T23:02:07Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "fanyang-mono",
                                           "body":  "Tests didn\u0027t pass after adding an Android switch to `NativeLibraryToLoad.cs`. There are more work to be done, in order to make the tests pass. \r\n\r\n1. Make runtime tests native build work for Android \r\nhttps://github.com/dotnet/runtime/blob/main/src/tests/build.sh#L265-L266\r\n2. Include the generated native libraries (`.so` files) in the Android app. For Xamarin.Android, build action `AndroidNativeLibrary` needs to be used.\r\nhttps://github.com/xamarin/xamarin-android/blob/681887ebdbd192ce7ce1cd02221d4939599ba762/tests/CodeGen-Binding/Xamarin.Android.JcwGen-Tests/Xamarin.Android.JcwGen-Tests.csproj#L82-L87",
                                           "updatedAt":  "2021-07-15T23:06:14Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5G85Vo",
                                           "createdAt":  "2022-07-20T14:36:29Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "steveisok",
                                           "body":  "@fanyang-mono Is this still an issue?",
                                           "updatedAt":  "2022-07-20T14:36:29Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5HpF14",
                                           "createdAt":  "2022-08-02T02:49:41Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "fanyang-mono",
                                           "body":  "Moving to 8.0.0",
                                           "updatedAt":  "2022-08-02T02:49:41Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5hpipO",
                                           "createdAt":  "2023-07-17T14:35:59Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "fanyang-mono",
                                           "body":  "Moving to 9.0.0",
                                           "updatedAt":  "2023-07-17T14:35:59Z"
                                       }
                                   ],
                         "totalCount":  6
                     },
        "title":  "[Mono][Android][Test] Unhandled Exception: System.PlatformNotSupportedException: Operation is not supported on this platform.",
        "labels":  [
                       "disabled-test",
                       "os-android",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/55742",
        "createdAt":  "2021-07-15T14:28:45Z",
        "number":  55742,
        "author":  "lambdageek",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2021-07-15T14:31:31Z",
        "body":  "There is no plan or timeline to implement ComWrappers support in Mono.\r\n\r\nHowever if we were to do so,  this issue should track the required work.\r\n\r\n\r\nRelated issues:\r\n\r\n* The original CoreCLR WinRT interop tracking issue https://github.com/dotnet/runtime/issues/35318\r\n   * ComWrappers API proposal https://github.com/dotnet/runtime/issues/1845\r\n   * CoreCLR ComWrappers implementation PR https://github.com/dotnet/runtime/pull/32091/files\r\n   * `IDynamicInterfaceCastable` API proposal https://github.com/dotnet/runtime/issues/36654",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  null,
                         "nodes":  [

                                   ],
                         "totalCount":  0
                     },
        "title":  "Mono ComWrappers tracking issue",
        "labels":  [
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/56145",
        "createdAt":  "2021-07-22T11:54:12Z",
        "number":  56145,
        "author":  "emepetres",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  "Y3Vyc29yOnYyOpHOCwETGw==",
                          "nodes":  [
                                        {
                                            "content":  "EYES",
                                            "user":  "jzebedee",
                                            "createdAt":  "2023-05-15T02:20:07Z"
                                        }
                                    ],
                          "totalCount":  1
                      },
        "updatedAt":  "2023-10-30T14:05:08Z",
        "body":  "I\u0027m trying to do a call from .Net a native function which call backs to .Net. I\u0027m using function pointers as suggested in discord channel, but I\u0027m getting the following error (maybe related to #43791?):\r\n\r\n```\r\n1:7\u003eTarget \"_GeneratePInvokeTable: (TargetId:229)\" in file \"C:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets\" from project \"C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj\" (target \"_WasmBuildNativeCore\" depends on it):\r\n                   Added Item(s): _WasmPInvokeModules=libWasmNative\r\n                   Added Item(s): _WasmPInvokeModules=libSystem.Native\r\n                   Added Item(s): _WasmPInvokeModules=libSystem.IO.Compression.Native\r\n                   Added Item(s): _WasmPInvokeModules=libSystem.Globalization.Native\r\n                   Using \"PInvokeTableGenerator\" task from assembly \"C:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\..\\tasks\\net6.0\\WasmAppBuilder.dll\".\r\n                   Task \"PInvokeTableGenerator\" (TaskId:151)\r\n                     Task Parameter:\r\n                         Assemblies=\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\Wasm.Console.Sample.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Console.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Private.Runtime.InteropServices.JavaScript.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Private.Uri.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Runtime.CompilerServices.Unsafe.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Runtime.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Private.CoreLib.dll (TaskId:151)\r\n                     Task Parameter:OutputPath=C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\wasm\\pinvoke-table.h (TaskId:151)\r\n                     Task Parameter:\r\n                         Modules=\r\n                             libWasmNative\r\n                             libSystem.Native\r\n                             libSystem.IO.Compression.Native\r\n                             libSystem.Globalization.Native (TaskId:151)\r\n                     Generating pinvoke table to \u0027C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\wasm\\pinvoke-table.h\u0027. (TaskId:151)\r\n13:27:49.489   1:7\u003eC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018: The \"PInvokeTableGenerator\" task failed unexpectedly. [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018: System.NotSupportedException: Parsing function pointer types in signatures is not supported. [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.Ecma.EcmaModule.GetFunctionPointerType(MethodSignature`1 signature) in System.Reflection.MetadataLoadContext.dll:token 0x6000619+0xa [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.Metadata.Ecma335.SignatureDecoder`2.DecodeType(BlobReader\u0026 blobReader, Boolean allowTypeSpecifications, Int32 typeCode) in System.Reflection.Metadata.dll:token 0x6000abf+0x100 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.Metadata.Ecma335.SignatureDecoder`2.DecodeMethodSignature(BlobReader\u0026 blobReader) in System.Reflection.Metadata.dll:token 0x6000ac1+0x5a [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.Ecma.EcmaMethodDecoder.SpecializeMethodSig(IRoMethodBase roMethodBase) in System.Reflection.MetadataLoadContext.dll:token 0x60005e8+0x0 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoDefinitionMethod`1.ComputeMethodSig() in System.Reflection.MetadataLoadContext.dll:token 0x6000245+0x7 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoMethod.get_MethodSig() in System.Reflection.MetadataLoadContext.dll:token 0x6000278+0xc [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoMethod.get_ReturnParameter() in System.Reflection.MetadataLoadContext.dll:token 0x6000276+0x0 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoMethod.get_ReturnType() in System.Reflection.MetadataLoadContext.dll:token 0x600027d+0x0 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.GenPInvokeDecl(PInvoke pinvoke) in WasmAppBuilder.dll:token 0x6000020+0xc9 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.EmitPInvokeTable(StreamWriter w, Dictionary`2 modules, List`1 pinvokes) in WasmAppBuilder.dll:token 0x600001e+0x59 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.GenPInvokeTable(String[] pinvokeModules, String[] assemblies) in WasmAppBuilder.dll:token 0x600001c+0xaf [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.Execute() in WasmAppBuilder.dll:token 0x600001b+0x75 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute() in Microsoft.Build.dll:token 0x60015fb+0x3e [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask) in Microsoft.Build.dll:token 0x600147a+0x2b5 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\n                   Done executing task \"PInvokeTableGenerator\" -- FAILED. (TaskId:151)\r\n```\r\n\r\nThis are the most relevants parts of the code:\r\n\r\n```csharp\r\n[DllImport(DllName)]\r\npublic static extern unsafe void callCbk(delegate*\u003cvoid\u003e cbk);\r\n```\r\n\r\n```c\r\ntypedef void (*callback)(void);\r\n\r\nvoid callCbk(callback cbk)\r\n{\r\n    cbk();\r\n}\r\n```\r\n\r\nAnd I\u0027m using version\r\n```\r\n  Microsoft.AspNetCore.App 6.0.0-rc.1.21370.12 [C:\\dotnet\\shared\\Microsoft.AspNetCore.App]\r\n  Microsoft.NETCore.App 6.0.0-rc.1.21369.14 [C:\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.WindowsDesktop.App 6.0.0-rc.1.21369.7 [C:\\dotnet\\shared\\Microsoft.WindowsDesktop.App]\r\n```",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOamlGew==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc40vcz_",
                                           "createdAt":  "2021-07-22T11:54:19Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Tagging subscribers to this area: @vitek-karas, @agocke\nSee info in [area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md) if you want to be subscribed.\n\u003cdetails\u003e\n\u003csummary\u003eIssue Details\u003c/summary\u003e\n\u003chr /\u003e\n\nI\u0027m trying to do a call from .Net a native function which call backs to .Net. I\u0027m using function pointers as suggested in discord channel, but I\u0027m getting the following error (maybe related to #43791?):\r\n\r\n```\r\n1:7\u003eTarget \"_GeneratePInvokeTable: (TargetId:229)\" in file \"C:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets\" from project \"C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj\" (target \"_WasmBuildNativeCore\" depends on it):\r\n                   Added Item(s): _WasmPInvokeModules=libWasmNative\r\n                   Added Item(s): _WasmPInvokeModules=libSystem.Native\r\n                   Added Item(s): _WasmPInvokeModules=libSystem.IO.Compression.Native\r\n                   Added Item(s): _WasmPInvokeModules=libSystem.Globalization.Native\r\n                   Using \"PInvokeTableGenerator\" task from assembly \"C:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\..\\tasks\\net6.0\\WasmAppBuilder.dll\".\r\n                   Task \"PInvokeTableGenerator\" (TaskId:151)\r\n                     Task Parameter:\r\n                         Assemblies=\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\Wasm.Console.Sample.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Console.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Private.Runtime.InteropServices.JavaScript.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Private.Uri.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Runtime.CompilerServices.Unsafe.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Runtime.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Private.CoreLib.dll (TaskId:151)\r\n                     Task Parameter:OutputPath=C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\wasm\\pinvoke-table.h (TaskId:151)\r\n                     Task Parameter:\r\n                         Modules=\r\n                             libWasmNative\r\n                             libSystem.Native\r\n                             libSystem.IO.Compression.Native\r\n                             libSystem.Globalization.Native (TaskId:151)\r\n                     Generating pinvoke table to \u0027C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\wasm\\pinvoke-table.h\u0027. (TaskId:151)\r\n13:27:49.489   1:7\u003eC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018: The \"PInvokeTableGenerator\" task failed unexpectedly. [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018: System.NotSupportedException: Parsing function pointer types in signatures is not supported. [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.Ecma.EcmaModule.GetFunctionPointerType(MethodSignature`1 signature) in System.Reflection.MetadataLoadContext.dll:token 0x6000619+0xa [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.Metadata.Ecma335.SignatureDecoder`2.DecodeType(BlobReader\u0026 blobReader, Boolean allowTypeSpecifications, Int32 typeCode) in System.Reflection.Metadata.dll:token 0x6000abf+0x100 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.Metadata.Ecma335.SignatureDecoder`2.DecodeMethodSignature(BlobReader\u0026 blobReader) in System.Reflection.Metadata.dll:token 0x6000ac1+0x5a [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.Ecma.EcmaMethodDecoder.SpecializeMethodSig(IRoMethodBase roMethodBase) in System.Reflection.MetadataLoadContext.dll:token 0x60005e8+0x0 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoDefinitionMethod`1.ComputeMethodSig() in System.Reflection.MetadataLoadContext.dll:token 0x6000245+0x7 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoMethod.get_MethodSig() in System.Reflection.MetadataLoadContext.dll:token 0x6000278+0xc [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoMethod.get_ReturnParameter() in System.Reflection.MetadataLoadContext.dll:token 0x6000276+0x0 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoMethod.get_ReturnType() in System.Reflection.MetadataLoadContext.dll:token 0x600027d+0x0 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.GenPInvokeDecl(PInvoke pinvoke) in WasmAppBuilder.dll:token 0x6000020+0xc9 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.EmitPInvokeTable(StreamWriter w, Dictionary`2 modules, List`1 pinvokes) in WasmAppBuilder.dll:token 0x600001e+0x59 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.GenPInvokeTable(String[] pinvokeModules, String[] assemblies) in WasmAppBuilder.dll:token 0x600001c+0xaf [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.Execute() in WasmAppBuilder.dll:token 0x600001b+0x75 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute() in Microsoft.Build.dll:token 0x60015fb+0x3e [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask) in Microsoft.Build.dll:token 0x600147a+0x2b5 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\n                   Done executing task \"PInvokeTableGenerator\" -- FAILED. (TaskId:151)\r\n```\r\n\r\nThis are the most relevants parts of the code:\r\n\r\n```csharp\r\n[DllImport(DllName)]\r\npublic static extern unsafe void callCbk(delegate*\u003cvoid\u003e cbk);\r\n```\r\n\r\n```c\r\ntypedef void (*callback)(void);\r\n\r\nvoid callCbk(callback cbk)\r\n{\r\n    cbk();\r\n}\r\n```\r\n\r\nAnd I\u0027m using version\r\n```\r\n  Microsoft.AspNetCore.App 6.0.0-rc.1.21370.12 [C:\\dotnet\\shared\\Microsoft.AspNetCore.App]\r\n  Microsoft.NETCore.App 6.0.0-rc.1.21369.14 [C:\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.WindowsDesktop.App 6.0.0-rc.1.21369.7 [C:\\dotnet\\shared\\Microsoft.WindowsDesktop.App]\r\n```\n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAuthor:\u003c/th\u003e\n    \u003ctd\u003eemepetres\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAssignees:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eLabels:\u003c/th\u003e\n    \u003ctd\u003e\n\n`area-HostModel`, `untriaged`\n\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eMilestone:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\u003c/details\u003e",
                                           "updatedAt":  "2021-07-22T11:54:19Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc40veGF",
                                           "createdAt":  "2021-07-22T12:04:02Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Tagging subscribers to \u0027arch-wasm\u0027: @lewing\nSee info in area-owners.md if you want to be subscribed.\n\u003cdetails\u003e\n\u003csummary\u003eIssue Details\u003c/summary\u003e\n\u003chr /\u003e\n\nI\u0027m trying to do a call from .Net a native function which call backs to .Net. I\u0027m using function pointers as suggested in discord channel, but I\u0027m getting the following error (maybe related to #43791?):\r\n\r\n```\r\n1:7\u003eTarget \"_GeneratePInvokeTable: (TargetId:229)\" in file \"C:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets\" from project \"C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj\" (target \"_WasmBuildNativeCore\" depends on it):\r\n                   Added Item(s): _WasmPInvokeModules=libWasmNative\r\n                   Added Item(s): _WasmPInvokeModules=libSystem.Native\r\n                   Added Item(s): _WasmPInvokeModules=libSystem.IO.Compression.Native\r\n                   Added Item(s): _WasmPInvokeModules=libSystem.Globalization.Native\r\n                   Using \"PInvokeTableGenerator\" task from assembly \"C:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\..\\tasks\\net6.0\\WasmAppBuilder.dll\".\r\n                   Task \"PInvokeTableGenerator\" (TaskId:151)\r\n                     Task Parameter:\r\n                         Assemblies=\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\Wasm.Console.Sample.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Console.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Private.Runtime.InteropServices.JavaScript.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Private.Uri.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Runtime.CompilerServices.Unsafe.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Runtime.dll\r\n                             C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\linked\\System.Private.CoreLib.dll (TaskId:151)\r\n                     Task Parameter:OutputPath=C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\wasm\\pinvoke-table.h (TaskId:151)\r\n                     Task Parameter:\r\n                         Modules=\r\n                             libWasmNative\r\n                             libSystem.Native\r\n                             libSystem.IO.Compression.Native\r\n                             libSystem.Globalization.Native (TaskId:151)\r\n                     Generating pinvoke table to \u0027C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\obj\\Debug\\net6.0\\wasm\\pinvoke-table.h\u0027. (TaskId:151)\r\n13:27:49.489   1:7\u003eC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018: The \"PInvokeTableGenerator\" task failed unexpectedly. [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018: System.NotSupportedException: Parsing function pointer types in signatures is not supported. [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.Ecma.EcmaModule.GetFunctionPointerType(MethodSignature`1 signature) in System.Reflection.MetadataLoadContext.dll:token 0x6000619+0xa [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.Metadata.Ecma335.SignatureDecoder`2.DecodeType(BlobReader\u0026 blobReader, Boolean allowTypeSpecifications, Int32 typeCode) in System.Reflection.Metadata.dll:token 0x6000abf+0x100 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.Metadata.Ecma335.SignatureDecoder`2.DecodeMethodSignature(BlobReader\u0026 blobReader) in System.Reflection.Metadata.dll:token 0x6000ac1+0x5a [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.Ecma.EcmaMethodDecoder.SpecializeMethodSig(IRoMethodBase roMethodBase) in System.Reflection.MetadataLoadContext.dll:token 0x60005e8+0x0 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoDefinitionMethod`1.ComputeMethodSig() in System.Reflection.MetadataLoadContext.dll:token 0x6000245+0x7 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoMethod.get_MethodSig() in System.Reflection.MetadataLoadContext.dll:token 0x6000278+0xc [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoMethod.get_ReturnParameter() in System.Reflection.MetadataLoadContext.dll:token 0x6000276+0x0 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at System.Reflection.TypeLoading.RoMethod.get_ReturnType() in System.Reflection.MetadataLoadContext.dll:token 0x600027d+0x0 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.GenPInvokeDecl(PInvoke pinvoke) in WasmAppBuilder.dll:token 0x6000020+0xc9 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.EmitPInvokeTable(StreamWriter w, Dictionary`2 modules, List`1 pinvokes) in WasmAppBuilder.dll:token 0x600001e+0x59 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.GenPInvokeTable(String[] pinvokeModules, String[] assemblies) in WasmAppBuilder.dll:token 0x600001c+0xaf [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at PInvokeTableGenerator.Execute() in WasmAppBuilder.dll:token 0x600001b+0x75 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute() in Microsoft.Build.dll:token 0x60015fb+0x3e [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\nC:\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\6.0.0-rc.1.21371.1\\Sdk\\WasmApp.Native.targets(209,5): error MSB4018:    at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask) in Microsoft.Build.dll:token 0x600147a+0x2b5 [C:\\Users\\jcarnero\\source\\dotnet-wasm-sample\\src\\console\\Wasm.Console.Sample.csproj]\r\n                   Done executing task \"PInvokeTableGenerator\" -- FAILED. (TaskId:151)\r\n```\r\n\r\nThis are the most relevants parts of the code:\r\n\r\n```csharp\r\n[DllImport(DllName)]\r\npublic static extern unsafe void callCbk(delegate*\u003cvoid\u003e cbk);\r\n```\r\n\r\n```c\r\ntypedef void (*callback)(void);\r\n\r\nvoid callCbk(callback cbk)\r\n{\r\n    cbk();\r\n}\r\n```\r\n\r\nAnd I\u0027m using version\r\n```\r\n  Microsoft.AspNetCore.App 6.0.0-rc.1.21370.12 [C:\\dotnet\\shared\\Microsoft.AspNetCore.App]\r\n  Microsoft.NETCore.App 6.0.0-rc.1.21369.14 [C:\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.WindowsDesktop.App 6.0.0-rc.1.21369.7 [C:\\dotnet\\shared\\Microsoft.WindowsDesktop.App]\r\n```\n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAuthor:\u003c/th\u003e\n    \u003ctd\u003eemepetres\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAssignees:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eLabels:\u003c/th\u003e\n    \u003ctd\u003e\n\n`arch-wasm`, `area-HostModel`, `untriaged`\n\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eMilestone:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\u003c/details\u003e",
                                           "updatedAt":  "2021-07-22T12:04:02Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc40vjai",
                                           "createdAt":  "2021-07-22T12:41:51Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "emepetres",
                                           "body":  "Just for reference, I modified the test to use _\"old delegates\"_ and _MonoPInvokeCallback_ attribute and it is working,",
                                           "updatedAt":  "2021-07-22T12:41:51Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc40vjrW",
                                           "createdAt":  "2021-07-22T12:43:38Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "vargaz",
                                           "body":  "https://github.com/dotnet/runtime/issues/43791\r\n",
                                           "updatedAt":  "2021-07-22T12:43:38Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5FJZLL",
                                           "createdAt":  "2022-06-20T07:43:39Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "ilonatommy",
                                           "body":  "@akoeplinger, what is the status on this one?",
                                           "updatedAt":  "2022-06-20T07:43:39Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5FTzHm",
                                           "createdAt":  "2022-06-22T08:39:13Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "maraf",
                                           "body":  "It\u0027s blocked by https://github.com/dotnet/runtime/issues/69273, which is scheduled for 7.0.\r\nAfter the implementation I will probably enable it here.",
                                           "updatedAt":  "2022-06-22T08:39:13Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5G_kIl",
                                           "createdAt":  "2022-07-21T05:50:27Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "maraf",
                                           "body":  "Moving to 8.0 as the required API has moved.",
                                           "updatedAt":  "2022-07-21T05:50:27Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5HAket",
                                           "createdAt":  "2022-07-21T10:43:37Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "devshgraphicsprogramming",
                                           "body":  "\u003e Just for reference, I modified the test to use _\"old delegates\"_ and _MonoPInvokeCallback_ attribute and it is working,\r\n\r\n@emepetres can you give an example of what one actually needs to do? I\u0027m a novice C# programmer.",
                                           "updatedAt":  "2022-07-21T10:43:55Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5IEXS8",
                                           "createdAt":  "2022-08-09T08:55:31Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "emepetres",
                                           "body":  "@devshgraphicsprogramming check [my samples](https://github.com/emepetres/dotnet-wasm-sample), you can find how to do this with MonoPInvokeCallback there.\r\n\r\nhttps://github.com/emepetres/dotnet-wasm-sample/blob/3967999706c364eb475abf6f09199141a99d096f/src/console-native/Program.cs#L28",
                                           "updatedAt":  "2022-08-09T08:56:13Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5MuWJW",
                                           "createdAt":  "2022-10-21T16:56:25Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "devshgraphicsprogramming",
                                           "body":  "Its a small world of dependencies, this essentially renders SWIG\u0027s Cross Language Polymorphism (Directors) feature unusable:\r\nhttps://github.com/swig/swig/pull/1262\r\n\r\nWhich we really need because C++ interfaces with JS (embind) bindings from which C# inherits is how we\u0027re working around:\r\nhttps://github.com/dotnet/aspnetcore/issues/44088",
                                           "updatedAt":  "2022-10-21T16:56:25Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5V7goF",
                                           "createdAt":  "2023-02-23T12:17:57Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "maraf",
                                           "body":  "Still blocked until we can update `System.Reflection.Metadata` in the `WasmAppBuilder`. Once the API is available, the rest of the pipeline works.",
                                           "updatedAt":  "2023-02-23T12:18:41Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5qaUZ7",
                                           "createdAt":  "2023-10-30T14:05:08Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "maraf",
                                           "body":  "An alternative would be to rewrite manage to native generator to use `System.Reflection.Metadata` API instead of `System.Reflection.MetadataLoadContext`",
                                           "updatedAt":  "2023-10-30T14:05:08Z"
                                       }
                                   ],
                         "totalCount":  12
                     },
        "title":  "[WASM] callback fron native code to .Net: Parsing function pointer types in signatures is not supported",
        "labels":  [
                       "arch-wasm",
                       "blocked",
                       "area-Build-mono",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/58939",
        "createdAt":  "2021-09-10T13:36:07Z",
        "number":  58939,
        "author":  "rolfbjarne",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  "Y3Vyc29yOnYyOpHOCTIZlQ==",
                          "nodes":  [
                                        {
                                            "content":  "THUMBS_UP",
                                            "user":  "SupinePandora43",
                                            "createdAt":  "2022-03-16T05:17:15Z"
                                        }
                                    ],
                          "totalCount":  1
                      },
        "updatedAt":  "2023-07-24T15:27:23Z",
        "body":  "### Description\r\n\r\nCalling Marshal.AllocHGlobal / Marshal.FreeHGlobal is ~150x slower in .NET compared to legacy Mono when running on a tvOS device.\r\n\r\nSample test code: https://gist.github.com/rolfbjarne/b22b844e6f351ad40c4f30e20a2a36d8\r\n\r\nOutputs something like this with legacy Mono (Xamarin.iOS from d16-10):\r\n \r\n    [...]\r\n    Elapsed: 17.03 seconds Counter: 265,779,440.00 Iterations per second: 15,608,870\r\n    Elapsed: 18.03 seconds Counter: 281,406,670.00 Iterations per second: 15,608,886\r\n    Elapsed: 19.03 seconds Counter: 297,098,501.00 Iterations per second: 15,612,343\r\n\r\nwhich is roughly 15.5M calls to Marshal.AllocHGlobal+FreeHGlobal per second.\r\n\r\nNow in .NET I get this:\r\n\r\n    [...]\r\n    Elapsed: 17.10 seconds Counter: 1,773,883.00 Iterations per second: 103,745\r\n    Elapsed: 18.10 seconds Counter: 1,878,446.00 Iterations per second: 103,784\r\n    Elapsed: 19.10 seconds Counter: 1,982,100.00 Iterations per second: 103,771\r\n\r\nthat\u0027s roughly 103k calls to Marshal.AllocHGlobal+FreeHGlobal per second; ~150x slower.\r\n\r\nThis is on an Apple TV 4K from 2017.\r\n\r\nThere\u0027s a difference in the simulator too, just not so stark (on an iMac Pro)\r\n\r\nLegacy Mono:\r\n\r\n    [...]\r\n    Elapsed: 12.02 seconds Counter: 165,442,863.00 Iterations per second: 13,759,790\r\n    Elapsed: 13.02 seconds Counter: 179,568,197.00 Iterations per second: 13,787,606\r\n    Elapsed: 14.02 seconds Counter: 193,717,056.00 Iterations per second: 13,812,942\r\n\r\nand with .NET:\r\n\r\n    [...]\r\n    Elapsed: 12.03 seconds Counter: 39,917,875.00 Iterations per second: 3,317,120\r\n    Elapsed: 13.03 seconds Counter: 43,252,347.00 Iterations per second: 3,318,392\r\n    Elapsed: 14.04 seconds Counter: 46,617,318.00 Iterations per second: 3,321,424\r\n\r\nso ~4x slower.\r\n\r\nI profiled the .NET version on device using instruments:\r\n[Marshal.trace.zip](https://github.com/dotnet/runtime/files/7144098/Marshal.trace.zip)\r\n\r\nHere\u0027s a preview:\r\n\r\n\u003cimg width=\"900\" alt=\"Screen Shot 2021-09-10 at 15 31 11\" src=\"https://user-images.githubusercontent.com/249268/132861187-2c57f30c-46b7-4af1-a8c0-a31aaa4ba13f.png\"\u003e\r\n\r\nIt seems most of the time is spent inside `mono_threads_enter_gc_safe_region_unbalanced`.\r\n\r\nThis function isn\u0027t even called in legacy Mono.\r\n\r\nHere\u0027s an Instruments trace: \r\n[MarshalMono.trace.zip](https://github.com/dotnet/runtime/files/7144132/MarshalMono.trace.zip)\r\n\r\nand a preview:\r\n\r\n\u003cimg width=\"1312\" alt=\"Screen Shot 2021-09-10 at 15 35 25\" src=\"https://user-images.githubusercontent.com/249268/132861761-8600d501-fcc1-465d-bc4e-1930ac5cf4bd.png\"\u003e\r\n\r\nI don\u0027t know if this applies to other platforms as well, I only tested tvOS.",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOSFV25Q==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc42pu9Y",
                                           "createdAt":  "2021-09-10T13:36:10Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "I couldn\u0027t figure out the best area label to add to this issue. If you have write-permissions please help me learn by adding exactly one [area label](https://github.com/dotnet/runtime/blob/master/docs/area-owners.md).",
                                           "updatedAt":  "2021-09-10T13:36:10Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42pxlZ",
                                           "createdAt":  "2021-09-10T13:51:40Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "EgorBo",
                                           "body":  "Unrelated, just a note: there is also `NativeMemory.Alloc` which should be faster than AllocHGlobal",
                                           "updatedAt":  "2021-09-10T13:51:40Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42p0Hh",
                                           "createdAt":  "2021-09-10T14:05:53Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHOB52vKw==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "EgorBo",
                                                                               "createdAt":  "2021-09-10T14:31:41Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "filipnavara",
                                           "body":  "\u003e here is also `NativeMemory.Alloc` which should be faster than AllocHGlobal\r\n\r\nOn Unix systems `Marshal.AllocHGlobal` is [just wrapper](https://github.com/dotnet/runtime/blob/b683032718a1e76ca93147fc4a273e250ef65525/src/libraries/System.Private.CoreLib/src/System/Runtime/InteropServices/Marshal.Unix.cs#L67) around `NativeMemory.Alloc`. On legacy Mono it was an icall, now it\u0027s a P/Invoke. It doesn\u0027t have the `SuppressGCTransition` attribute applied so it goes through the expensive GC transitions.",
                                           "updatedAt":  "2021-09-10T14:05:53Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42p-Eq",
                                           "createdAt":  "2021-09-10T15:01:22Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkotas",
                                           "body":  "\u003e It doesn\u0027t have the SuppressGCTransition attribute applied so it goes through the expensive GC transitions.\r\n\r\n`malloc/free` can take locks or it can end up calling OS syscalls like `mmap`. It would not be appropriate to mark it with `SuppressGCTransition`.",
                                           "updatedAt":  "2021-09-10T15:01:22Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42p_Fy",
                                           "createdAt":  "2021-09-10T15:06:42Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "filipnavara",
                                           "body":  "\u003e malloc/free can take locks or it can end up calling OS syscalls like mmap. It would not be appropriate to mark it with SuppressGCTransition.\r\n\r\nI agree it would be a correctness issue to do so. I am still thinking about benchmarking the impact though.\r\n\r\nDepending on particular use case there may be other ways to allocate the memory which are less costly (eg. stackalloc for small allocations).",
                                           "updatedAt":  "2021-09-10T15:06:42Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42qBi3",
                                           "createdAt":  "2021-09-10T15:20:10Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHOB55Bgg==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "acaly",
                                                                               "createdAt":  "2021-09-10T18:43:25Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "tannergooding",
                                           "body":  "I think `malloc` is an interesting case where common implementations try to ensure it is as fast as possible. If you look at the various implementations available, most only take locks or do syscalls in the rare edge case, not in the common path.\r\n\r\nThat is, these calls that make it \"incompatible\" with `SuppressGCTransition` largely only happen when the underlying heap needs to be created or expanded. Otherwise, small allocations avoid all of this as do many medium sized allocations.\r\n\r\nIt would perhaps be interesting to see if there was something we could do that could help support this kind of scenario.",
                                           "updatedAt":  "2021-09-10T15:20:10Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42qDRs",
                                           "createdAt":  "2021-09-10T15:30:26Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "EgorBo",
                                           "body":  "\u003e It would perhaps be interesting to see if there was something we could do that could help support this kind of scenario.\r\n\r\nlike emitting it as \r\n```\r\nif (len \u003e= someLimit)\r\n   emit machinery for gc transition\r\nNativeMemory.Alloc(len);\r\n```\r\n? where someLimit is some small value that won\u0027t cause any mmap under the hood",
                                           "updatedAt":  "2021-09-10T15:30:26Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42qDwZ",
                                           "createdAt":  "2021-09-10T15:32:59Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkotas",
                                           "body":  "\u003e ? where someLimit is some small value that won\u0027t cause any mmap under the hood\r\n\r\nYou cannot tell. Any `malloc` call, no matter how small the request block size is, can end up taking locks or calling mmap.",
                                           "updatedAt":  "2021-09-10T15:32:59Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42qD5p",
                                           "createdAt":  "2021-09-10T15:33:53Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "EgorBo",
                                           "body":  "\u003e \u003e ? where someLimit is some small value that won\u0027t cause any mmap under the hood\r\n\u003e \r\n\u003e You cannot tell. Any `malloc` call, no matter how small the request block size is, can end up taking locks or calling mmap.\r\n\r\nRight, just discovered that in glibc sources 👍 ",
                                           "updatedAt":  "2021-09-10T15:33:53Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42qEYb",
                                           "createdAt":  "2021-09-10T15:36:40Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHOCXr5LA==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "EgorBo",
                                                                               "createdAt":  "2021-09-10T15:37:19Z"
                                                                           },
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "filipnavara",
                                                                               "createdAt":  "2021-09-10T16:53:29Z"
                                                                           },
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "SupinePandora43",
                                                                               "createdAt":  "2022-04-12T15:33:05Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  3
                                                         },
                                           "author":  "jkotas",
                                           "body":  "I think the root cause of this problem is the high overhead implementation strategy used for PInvoke transitions on tvOS. This high overhead is a problem for every other PInvoke. For example, globalization PInvokes will hit it too.",
                                           "updatedAt":  "2021-09-10T15:36:40Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42rgK5",
                                           "createdAt":  "2021-09-11T09:16:14Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "filipnavara",
                                           "body":  "I\u0027ll have to revisit https://github.com/mono/mono/pull/17110 to see if the optimizations can be done correctly.\r\n\r\nOn my MacBook Air M1 I get these numbers with the provided test case:\r\n- CoreCLR under Rosetta: `Iterations per second: 12,019,291`\r\n- Mono under Rosetta: `Iterations per second: 4,003,878`\r\n- Mono ARM64: `Iterations per second: 6,845,245`",
                                           "updatedAt":  "2021-09-11T09:16:14Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42rkVC",
                                           "createdAt":  "2021-09-11T11:27:56Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "filipnavara",
                                           "body":  "There\u0027s something weird with my local runtime builds because they behave quite differently to the official ones. I\u0027ll have to figure that out first.\r\n\r\nLocal dotnet/runtime, MacCatalyst ARM64 Debug, `Iterations per second: 2,591,953`\r\nThe same with some optimizations cherry-picked from my earlier attempts to speed up the GC transitions, `Iterations per second: 2,750,647`\r\n\r\nRelease builds are way more comparable to the numbers above. My local changes produce `Iterations per second: 6,402,773` so basically it\u0027s even worse or a problem with my benchmarking numbers. Definitely not the improvement I hoped for.\r\n\r\nAnother experiment is measuring the overhead by adding `SuppressGCTransition` (MacCatalyst, Mono, x64 under Rosetta):\r\n- Baseline: `Iterations per second: 4,003,878`\r\n- SuppressGCTransition on `Free`: `Iterations per second: 5,573,670`\r\n- SuppressGCTransition on both `Free` and `Malloc`: `Iterations per second: 15,170,537`\r\n\r\nSo, yeah, the transitions are crazy expensive.",
                                           "updatedAt":  "2021-09-11T11:52:13Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42r6mi",
                                           "createdAt":  "2021-09-11T21:18:16Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHOB58klA==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "ROCKET",
                                                                               "user":  "EgorBo",
                                                                               "createdAt":  "2021-09-11T21:25:39Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "filipnavara",
                                           "body":  "I\u0027ve done some experiment locally that ensures registers are saved to stack and then saves only part of the context on the thread state transition. Saves some memory copying. It would need a lot of polishing and validation to ensure it does not break anything. Mono ARM64 gets `Iterations per second: 8,807,528` with the changes, or about 28% improvement.\r\n\r\nNot sure if I can get it ready anytime soon but here\u0027s a gist of what I was testing:\r\n- The marshalling method already saves the LMF structure (last managed frame) which contains callee saved registers. I added saving of the reference-type arguments into stack variables. This ensures that all the passed parameters (such as `SafeHandle`) exist somewhere on the stack before the native method is called or before the GC transition frame is established.\r\n- Since everything is on the stack there\u0027s no need to accurately capture all registers since variables/arguments will need to be spilled to the stack. Thus we need to capture only IP/SP (ie. `thread_state_init` can be simplified). This saves about 12% of the run time.\r\n- The `copy_stack` method is no longer needed in the P/Invoke flow since everything is on the stack already by the time `mono_threads_enter_gc_safe_region_unbalanced` is called and the stack is not unwound. This saves another ±15% of the run time.\r\n- LLVM-only mode is missing support for `save_lmf` logic. It should emit `llvm.eh.unwind.init` intrinsic to spill the callee saved registers.",
                                           "updatedAt":  "2021-09-12T21:37:49Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42vCYO",
                                           "createdAt":  "2021-09-13T15:18:23Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "marek-safar",
                                           "body":  "/cc @vargaz ",
                                           "updatedAt":  "2021-09-13T15:18:23Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42vE3R",
                                           "createdAt":  "2021-09-13T15:29:12Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "vargaz",
                                           "body":  "Fixing/improving this would require risky changes so this will unlikely to be fixed for 6.0.\r\n",
                                           "updatedAt":  "2021-09-13T15:29:12Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc42vG9i",
                                           "createdAt":  "2021-09-13T15:38:27Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "filipnavara",
                                           "body":  "I agree that this is not generally fixable for .NET 6 timeframe. Something like PR #59029 may help a bit while being backportable. PR #58992 is exploring a more radical solution (but definitely not ready for prime time).",
                                           "updatedAt":  "2021-09-13T15:38:27Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5BYRzp",
                                           "createdAt":  "2022-04-12T15:34:13Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SupinePandora43",
                                           "body":  "\u003e I\u0027ll have to revisit https://github.com/mono/mono/pull/17110 to see if the optimizations can be done correctly.\n\u003e \n\u003e On my MacBook Air M1 I get these numbers with the provided test case:\n\u003e - CoreCLR under Rosetta: `Iterations per second: 12,019,291`\n\u003e - Mono under Rosetta: `Iterations per second: 4,003,878`\n\u003e - Mono ARM64: `Iterations per second: 6,845,245`\n\nWhat about CoreCLR ARM64?",
                                           "updatedAt":  "2022-04-12T15:34:13Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5IVXbl",
                                           "createdAt":  "2022-08-12T22:19:57Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "akoeplinger",
                                           "body":  "Moving to 8.0",
                                           "updatedAt":  "2022-08-12T22:19:57Z"
                                       }
                                   ],
                         "totalCount":  18
                     },
        "title":  "Marshal.AllocHGlobal/FreeHGlobal is ~150x slower in .NET than legacy mono on device (tvOS)",
        "labels":  [
                       "os-tvos",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/59815",
        "createdAt":  "2021-09-30T16:34:28Z",
        "number":  59815,
        "author":  "jkoritzinsky",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-08-19T15:46:07Z",
        "body":  "*Update* the hosting API has been added to Mono.  This issue is mainly open now to track the remaining work needed in order to run the DllImportGenerator tests on mobile platforms (or indeed other apps that may want the desktop hosting API on mobile). See https://github.com/dotnet/runtime/issues/59815#issuecomment-932456674 for one path forward.\r\n\r\n\r\n---\r\n\r\nMono does not implement the `coreclr_create_delegate` hosting API method nor the ComponentActivator class used by the nethost library. This is blocking us from running the DllImportGenerator.Tests suite, since we use DNNE to enable easier managed-\u003enative testing in the libraries suite by implementing the \"native\" side primarily in managed code.",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHON_mq-g==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc43hUv4",
                                           "createdAt":  "2021-09-30T16:34:30Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "I couldn\u0027t figure out the best area label to add to this issue. If you have write-permissions please help me learn by adding exactly one [area label](https://github.com/dotnet/runtime/blob/master/docs/area-owners.md).",
                                           "updatedAt":  "2021-09-30T16:34:30Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43hiUe",
                                           "createdAt":  "2021-09-30T17:52:59Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "@jkoritzinsky This [CompnentActivator](https://github.com/dotnet/runtime/blob/57bfe474518ab5b7cfe6bf7424a79ce3af9d6657/src/coreclr/System.Private.CoreLib/src/Internal/Runtime/InteropServices/ComponentActivator.cs) ?  What\u0027s DNNE - I\u0027m not familiar with the acronym.",
                                           "updatedAt":  "2021-09-30T17:52:59Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43hivq",
                                           "createdAt":  "2021-09-30T17:55:37Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkoritzinsky",
                                           "body":  "Yes, that is the ComponentActivator I\u0027m referring to. DNNE is [DotNetNativeExports](https://github.com/AaronRobinsonMSFT/DNNE), an project that @AaronRobinsonMSFT started that makes exposing managed code as native exports much simpler (and has significantly streamlined our ability to test the DllImportGenerator source generator).",
                                           "updatedAt":  "2021-09-30T17:55:37Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43hk1-",
                                           "createdAt":  "2021-09-30T18:08:20Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "@jkoritzinsky What\u0027s a good way to get an overview of how the DllImportGenerator testing is designed?  You\u0027re telling me some pieces and I\u0027m having a hard time putting the whole thing together in my head.\r\n\r\n@steveisok I think we need to have a discussion about how this testing will look on mobile. ",
                                           "updatedAt":  "2021-09-30T18:08:20Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43hxDX",
                                           "createdAt":  "2021-09-30T19:21:22Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "AaronRobinsonMSFT",
                                           "body":  "\u003eWhat\u0027s a good way to get an overview of how the DllImportGenerator testing is designed? \r\n\r\n@lambdageek The design is pretty simple. The tests are XUnit based and have a series of P/Invoke signatures. The DNNE package generates native platform library that represents specific exports from the managed assembly. When the test P/Invokes into the generated native library it does two things: (1) verifies the runtime is loaded and (2) finds the associated managed function that was indicated to be exported. Loading the runtime is straight forward enough and mono supports that without issue. However, discovery of the managed function by returning a function pointer to that function isn\u0027t. That is typically done via `coreclr_create_delegate`. The basic scenario is similar to what is documented at https://docs.microsoft.com/dotnet/core/tutorials/netcore-hosting.\r\n\r\nDNNE\u0027s implementation can be found at https://github.com/AaronRobinsonMSFT/DNNE/blob/master/src/platform/platform.c.",
                                           "updatedAt":  "2021-09-30T19:23:19Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43h1g4",
                                           "createdAt":  "2021-09-30T19:51:24Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "\u003e The DNNE package generates native platform library that represents specific exports from the managed assembly.\r\n\r\nok, I think I understand so far.\r\n\r\nIn C# you write a P/Invoke declaration. It\u0027s body is some boilerplate that ultimately calls back to C#.  DNNE generates that boilerplate.  Then from a C# xunit test you invoke the P/Invoke, that calls into the generated native library which invokes a managed method and the managed method records the test success in some way?\r\n\r\n\u003e When the test P/Invokes into the generated native library it does two things: (1) verifies the runtime is loaded and (2) finds the associated managed function that was indicated to be exported.\r\n\r\nI\u0027m unclear on what (1) means.   Isn\u0027t this axiomatically true: the runtime is loaded because the test is running.\r\nMaybe I\u0027m misunderstanding what DNNE `platform.c` is doing - is it really initializing a new runtime? (in a separate process?) or it just needs to get some handle that it can then use to get the function pointer to the managed method?\r\n\r\nI\u0027m slightly unclear on what (2) means: essentially you want to get back to managed land from native.  One way to have done that was to use something like GetFunctionPointerForDelegate which would require passing the function pointer from managed to native.  But an alternate approach is to call `coreclr_create_delegate` directory and get the pointer from the runtime. Is that what\u0027s going on?\r\n\r\n---\r\n\r\nThe bigger issue is that Mono does not have corehost (and hence the corefxr entrypoints) on mobile.  But it doesn\u0027t seem like that\u0027s an essential part of this scheme - you could use the `coreclr_initialize`, `coreclr_create_delegate` functions directly, right?\r\n",
                                           "updatedAt":  "2021-09-30T19:51:24Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43h4tI",
                                           "createdAt":  "2021-09-30T20:11:15Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "AaronRobinsonMSFT",
                                           "body":  "DNNE itself is typically used for providing native exports of managed assemblies. The generated native library can be consumed naturally from a native application and the fact that the underlying implementation is managed is an implementation detail that is hidden.\r\n\r\nThe usage of DNNE in this case is to avoid having any explicit native assets to test the DllImport source generator. Testing the DllImport source generator then becomes entirely managed with the the thin native veneer useful to properly consume the test target via P/Invoke.\r\n\r\nFor (1), yes in this scenario the runtime will already be initialized and that is handled opaquely by `hostfxr` so DNNE and the test harness don\u0027t care. For (2) that is part of the veneer and an implementation detail of DNNE that the test relies upon. We could have written this all in native code but then we would have to introduce CMake and all that nonsense so we avoid that by using DNNE.\r\n\r\n\u003eBut an alternate approach is to call coreclr_create_delegate directory and get the pointer from the runtime. Is that what\u0027s going on?\r\n\r\nThat isn\u0027t the alternative approach that is how DNNE works - imagine a world where a managed assembly wants to provide the implementation to native and only project a native API. The way to do that is via DNNE and a small bit of C code that hides the runtime activation and managed to function pointer conversion away.\r\n",
                                           "updatedAt":  "2021-09-30T20:11:15Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43h-5H",
                                           "createdAt":  "2021-09-30T20:50:19Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "Thanks for the clarifications @jkoritzinsky @AaronRobinsonMSFT.\r\n\r\n\u003e For (1), yes in this scenario the runtime will already be initialized and that is handled opaquely by `hostfxr` so DNNE and the test harness don\u0027t care. For (2) that is part of the veneer and an implementation detail of DNNE that the test relies upon. We could have written this all in native code but then we would have to introduce CMake and all that nonsense so we avoid that by using DNNE.\r\n\r\nOk, great.  So I understood what\u0027s going on ;-)\r\n\r\n\u003e \u003e But an alternate approach is to call coreclr_create_delegate directory and get the pointer from the runtime. Is that what\u0027s going on?\r\n\u003e \r\n\u003e That isn\u0027t the alternative approach that is how DNNE works - imagine a world where a managed assembly wants to provide the implementation to native and only project a native API. The way to do that is via DNNE and a small bit of C code that hides the runtime activation and managed to function pointer conversion away.\r\n\r\nI didn\u0027t mean that it\u0027s an alternative for DNNE.  Just trying to make sure I understand what the tests are meant to do.\r\n\r\n---\r\n\r\nSo I think in summary to run on mobile where dynamic linking is allowed we would need to:\r\n1. Run `dnne-gen`\r\n2. Compile the resulting code with the compiler toolchain for the target plaform (Android NDK, or the Xcode SDK for ios)\r\n3. Either use the real `hostfxr` and a mono-mobile-specific `hostpolicy` or a stub standalone `hostfxr` that cuts through all the indirection and just calls the mono `coreclr_XXX` functions directly.\r\n4. Finally implement `coreclr_create_delegate` (this is yet another variation on `mono_marshal_get_managed_wrapper`+`mono_ldftn`; or more ambitiously it\u0027s a call to the appropriate function in ComponentActivator in mono SPC))\r\n\r\nFor static linking (ie ios device builds; and webassembly) we\u0027d need to do... something else - probably a different version of DNNE\u0027s `platform.c` where we can statically link the runtime plus DNNE-created libraries plus the DNNE platform code into a single executable.",
                                           "updatedAt":  "2021-09-30T21:02:27Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43ijbW",
                                           "createdAt":  "2021-10-01T00:43:42Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "AaronRobinsonMSFT",
                                           "body":  "@lambdageek I don\u0027t fully understand why all these steps are needed in this case. Is it because of mono\u0027s hosting semantics? I was assuming we could treat DNNE generated native libraries as if they were any other native binary \u0026ndash; P/Invoke into them and be none the wiser?\r\n\r\nStep (4) is all that I was expecting as actual work.",
                                           "updatedAt":  "2021-10-01T02:20:13Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43lCji",
                                           "createdAt":  "2021-10-01T18:23:02Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHOB8quYg==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "am11",
                                                                               "createdAt":  "2021-10-01T18:26:39Z"
                                                                           },
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "AaronRobinsonMSFT",
                                                                               "createdAt":  "2021-10-01T18:34:22Z"
                                                                           },
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "steveisok",
                                                                               "createdAt":  "2021-10-01T19:01:26Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  3
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "\u003e @lambdageek I don\u0027t fully understand why all these steps are needed in this case. \r\n\r\n@AaronRobinsonMSFT My assumption is: we want to run the dll import generator tests on Android,ios and wasm, not just on Linux \u0026 mac desktops with Mono instead of CoreCLR as the underlying runtime.\r\n\r\nIf we only want to run on desktops then (4) is sufficient.\r\n\r\n\u003eIs it because of mono\u0027s hosting semantics?\r\n\r\nI\u0027d say it\u0027s the hosting model, rather than something specific to mono.  There\u0027s no nethost, hostfxr or hostpolicy on mobile and any code that depends on them will not work.\r\n\r\n\u003e I was assuming we could treat DNNE generated native libraries as if they were any other native binary – P/Invoke into them and be none the wiser?\r\n\r\nThe DNNE generated native libraries are probably ok (assuming we compile them with the right toolchain).  But they depend on nethost, hostfxr and hostpolicy, right? So the functions that [`platform.c` depends on](https://github.com/AaronRobinsonMSFT/DNNE/blob/master/src/platform/platform.c#L349-L370) `get_hostfxr_path`, `hostfxr_get_runtime_delegate` etc are not present on mobile.\r\n\r\nWe haven\u0027t tried the desktop versions of `hostfxr` and `hostpolicy` on mobile - I have no idea how much work is required to get them working.  (If I had to guess... Android and iOS Simulator are probably not too much work - they may even just work if we start building them and bundling them into the tests; iOS device and WebAssembly probably require moderate to significant changes since they\u0027re static linking platforms).\r\n\r\nMy guess is that the most straightforward way would be to build a mobile `hostfxr` library that exports the symbols that DNNE needs but implements them by directly calling the `coreclr_` functions in the current process (ie there\u0027s no hostpolicy layer, and the implementation assumes the runtime is already loaded in the current process).  Then the only other change needed is `platform.c` would need to skip `get_hostfxr_path` and get the symbols from `RTLD_DEFAULT`.",
                                           "updatedAt":  "2021-10-01T18:23:02Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43lEMh",
                                           "createdAt":  "2021-10-01T18:34:16Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "AaronRobinsonMSFT",
                                           "body":  "\u003eIf we only want to run on desktops then (4) is sufficient.\r\n\r\nThe scope was what I was missing here. Thanks for the details.",
                                           "updatedAt":  "2021-10-01T18:34:16Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43lIfU",
                                           "createdAt":  "2021-10-01T19:03:05Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHOB8qvzQ==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "AaronRobinsonMSFT",
                                                                               "createdAt":  "2021-10-01T19:04:14Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "am11",
                                           "body":  "+1 for corehost support on mobile (simulators for the starters). and +2 for a true static linking support (e.g. `$ file singlefilehost_static` to return `... statically linked, with debug_info, not stripped`) 🙂",
                                           "updatedAt":  "2021-10-01T19:03:05Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43lLGq",
                                           "createdAt":  "2021-10-01T19:21:16Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "\u003e +1 for corehost support on mobile (simulators for the starters)\r\n\r\n@am11 I\u0027m curious why you say that.  What is the usecase?  From my perspective all of the logic of \"find the right runtime to run this managed code\" is already mostly irrelevant in self-contained desktop scenarios, and is completely useless on mobile - you run what\u0027s in the app bundle - there are no choices.",
                                           "updatedAt":  "2021-10-01T19:21:16Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43lNQc",
                                           "createdAt":  "2021-10-01T19:36:46Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "steveisok",
                                           "body":  "\u003e My guess is that the most straightforward way would be to build a mobile `hostfxr` library that exports the symbols that DNNE needs but implements them by directly calling the `coreclr_` functions in the current process (ie there\u0027s no hostpolicy layer, and the implementation assumes the runtime is already loaded in the current process). Then the only other change needed is `platform.c` would need to skip `get_hostfxr_path` and get the symbols from `RTLD_DEFAULT`.\r\n\r\n@AaronRobinsonMSFT @lambdageek I can have someone on my team look to provide the mobile libraries.  Safe to assume you would like this sooner rather than later?",
                                           "updatedAt":  "2021-10-01T19:36:46Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43lP2-",
                                           "createdAt":  "2021-10-01T19:57:06Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHOB8rTDg==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "lambdageek",
                                                                               "createdAt":  "2021-10-01T20:02:12Z"
                                                                           },
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "jkoritzinsky",
                                                                               "createdAt":  "2021-10-01T20:19:57Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  2
                                                         },
                                           "author":  "am11",
                                           "body":  "\u003e What is the usecase? \r\n\r\nMainly non-production/xamarin; I was coming from:\r\n* to be able to run dotnet(1) in terminal emulator on Android (with either mono/coreclr flavors); and consume other dotnet-new templates like console / libs / benchmarkdotnet etc.\r\n    * e.g. last year, we were able to build coreclr+libs+corehost to run simple applications. but since mono.Android configs are different, it\u0027s currently missing from corehost.\r\n* (in addition to the existing deploy-tests-as-app) be able to (also) execute `src/tests` with real corehost on mobile.\r\n\r\n\u003e all of the logic of \"find the right runtime to run this managed code\" is already mostly irrelevant in self-contained desktop scenarios\r\n\r\nYup, there are still some implementation details even in self-contained e.g. how it uses user configuration json files, finds the hook in (coreclr) runtime and exports symbols for sos/diagnostics etc. I think making the same (familiar) hosts work on various platforms will open avenues for broader scenarios.",
                                           "updatedAt":  "2021-10-01T19:57:06Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc433hfZ",
                                           "createdAt":  "2021-10-06T22:55:49Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "Ok, mono on desktop platforms should support this now.  (lightly verified by trying a DNNE sample with Mono https://github.com/lambdageek/dnne_monovm_sample)\r\n\r\nMobile requires a bunch of host work.  A new thing I found out is that ComponentActivator (or rather IsolatedLoadContext) depends on AssemblyDependencyResolver, which in turn depends on hostpolicy being on the device (or hostpolicy pinvoke overrides as is done for coreclr single file). See https://github.com/dotnet/runtime/issues/59961 for related work",
                                           "updatedAt":  "2021-10-06T22:55:49Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc436RtK",
                                           "createdAt":  "2021-10-07T17:55:03Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkoritzinsky",
                                           "body":  "@lambdageek I\u0027m trying this out with the DllImportGenerator.Tests test suite and I\u0027m seeing the following error messages (and crashes resulting from double faults/SIGABRTs/etc):\r\n\r\n```\r\nmono_coop_cond_timedwait Cannot transition thread 0x7f698d61f700 from STATE_BLOCKING with DO_BLOCKING\r\nmono_coop_mutex_lock Cannot transition thread 0x7f698ce1b700 from STATE_BLOCKING with DO_BLOCKING\r\nmono_threads_enter_gc_safe_region_unbalanced Cannot transition thread 0x7f698d61f700 from STATE_BLOCKING with DO_BLOCKING\r\n```\r\n\r\nThey don\u0027t seem to consistently happen due to a specific test, so I\u0027m not sure exactly what\u0027s going on.",
                                           "updatedAt":  "2021-10-07T17:55:03Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc436tCR",
                                           "createdAt":  "2021-10-07T20:34:11Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "@jkoritzinsky are there stack traces in the logs?  How do I run the DllImportGenerator.Tests suite - I think I will need to repro locally.\r\n\r\n\u003e @lambdageek I\u0027m trying this out with the DllImportGenerator.Tests test suite and I\u0027m seeing the following error messages (and crashes resulting from double faults/SIGABRTs/etc):\r\n\u003e \r\n\u003e ```\r\n\u003e mono_coop_cond_timedwait Cannot transition thread 0x7f698d61f700 from STATE_BLOCKING with DO_BLOCKING\r\n\u003e mono_coop_mutex_lock Cannot transition thread 0x7f698ce1b700 from STATE_BLOCKING with DO_BLOCKING\r\n\u003e mono_threads_enter_gc_safe_region_unbalanced Cannot transition thread 0x7f698d61f700 from STATE_BLOCKING with DO_BLOCKING\r\n\u003e ```\r\n\u003e \r\n\u003e They don\u0027t seem to consistently happen due to a specific test, so I\u0027m not sure exactly what\u0027s going on.\r\n\r\n",
                                           "updatedAt":  "2021-10-07T20:34:11Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc436vP5",
                                           "createdAt":  "2021-10-07T20:48:27Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkoritzinsky",
                                           "body":  "Here\u0027s the output from Mono\u0027s dump (this is in a release build):\r\n\r\n```log\r\nmono_threads_enter_gc_safe_region_unbalanced Cannot transition thread 0x7f0c0a514700 from STATE_BLOCKING with DO_BLOCKING\r\n\r\n=================================================================\r\n        Native Crash Reporting\r\n=================================================================\r\nGot a SIGABRT while executing native code. This usually indicates\r\na fatal error in the mono runtime or one of the native libraries \r\nused by your application.\r\n=================================================================\r\n\r\n=================================================================\r\n        Native stacktrace:\r\n=================================================================\r\n        0x7f0c15348732 - Unknown\r\n        0x7f0c152ede1e - Unknown\r\n        0x7f0c15348008 - Unknown\r\n        0x7f0c16615980 - Unknown\r\n        0x7f0c1570dfb7 - Unknown\r\n        0x7f0c1570f921 - Unknown\r\n        0x7f0c15396d65 - Unknown\r\n        0x7f0c151e0543 - Unknown\r\n        0x7f0c15397125 - Unknown\r\n        0x7f0c1539725e - Unknown\r\n        0x7f0c151f02bc - Unknown\r\n        0x7f0c151f19d1 - Unknown\r\n        0x7f0c151f1a67 - Unknown\r\n        0x404f98a3 - Unknown\r\n\r\n=================================================================\r\n        External Debugger Dump:\r\n=================================================================\r\nmono_coop_cond_timedwait Cannot transition thread 0x7f0c09d10700 from STATE_BLOCKING with DO_BLOCKING\r\n=================================================================\r\n        Native Crash Reporting\r\n=================================================================\r\nGot a SIGSEGV while executing native code. This usually indicates\r\na fatal error in the mono runtime or one of the native libraries \r\nused by your application.\r\n=================================================================\r\n\r\nAn error has occured in the native fault reporting. Some diagnostic information will be unavailable.\r\n\r\n=================================================================\r\n        Native stacktrace:\r\n=================================================================\r\n        0x7f0c15348732 - Unknown\r\n        0x7f0c152ede1e - Unknown\r\n        0x7f0c15251b31 - Unknown\r\n        0x7f0c16615980 - Unknown\r\n        0x404a5417 - Unknown\r\n\r\n=================================================================\r\n        External Debugger Dump:\r\n=================================================================\r\nmono_threads_enter_gc_safe_region_unbalanced Cannot transition thread 0x7f0c09b0f700 from STATE_BLOCKING with DO_BLOCKINGmono_threads_enter_gc_safe_region_unbalanced Cannot transition thread 0x7f0c09f11700 from STATE_BLOCKING with DO_BLOCKINGmono_threads_enter_gc_safe_region_unbalanced Cannot transition thread 0x7f0c0a112700 from STATE_BLOCKING with DO_BLOCKINGmono_threads_enter_gc_safe_region_unbalanced Cannot transition thread 0x7f0c0a715700 from STATE_BLOCKING with DO_BLOCKING[New LWP 9440]\r\n[New LWP 9441]\r\n[New LWP 9442]\r\n[New LWP 9444]\r\n[New LWP 9447]\r\n[New LWP 9448]\r\n[New LWP 9449]\r\n[New LWP 9450]\r\n[New LWP 9451]\r\n[New LWP 9452]\r\n[New LWP 9453]\r\n[New LWP 9454]\r\n[New LWP 9455]\r\n[New LWP 9456]\r\n[New LWP 9457]\r\n[New LWP 9458]\r\nCould not attach to process.  If your uid matches the uid of the target\r\nprocess, check the setting of /proc/sys/kernel/yama/ptrace_scope, or try\r\nagain as the root user.  For more details, see /etc/sysctl.d/10-ptrace.conf\r\n/tmp/mono-gdb-commands.9439:1: Error in sourced command file:\r\nwarning: process 9439 is already traced by process 9459\r\nptrace: Operation not permitted.\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\n0x00007f0c16610ad3 in futex_wait_cancelable (private=\u003coptimized out\u003e, expected=0, futex_word=0x562abe8bc6e4) at ../sysdeps/unix/sysv/linux/futex-internal.h:88\r\n88      ../sysdeps/unix/sysv/linux/futex-internal.h: No such file or directory.\r\n  Id   Target Id         Frame \r\n* 1    Thread 0x7f0c16a30740 (LWP 9439) \"dotnet\" 0x00007f0c16610ad3 in futex_wait_cancelable (private=\u003coptimized out\u003e, expected=0, futex_word=0x562abe8bc6e4) at ../sysdeps/unix/sysv/linux/futex-internal.h:88\r\n  2    Thread 0x7f0c147ff700 (LWP 9440) \"SGen worker\" 0x00007f0c16610ad3 in futex_wait_cancelable (private=\u003coptimized out\u003e, expected=0, futex_word=0x7f0c156c64dc \u003cwork_cond+44\u003e) at ../sysdeps/unix/sysv/linux/futex-internal.h:88\r\n  3    Thread 0x7f0c12bff700 (LWP 9441) \"dotnet\" 0x00007f0c157e3cb9 in __GI___poll (fds=0x7f0c0c002d40, nfds=1, timeout=-1) at ../sysdeps/unix/sysv/linux/poll.c:29\r\n  4    Thread 0x7f0c129fe700 (LWP 9442) \"Finalizer\" __lll_lock_wait () at ../sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\r\n  5    Thread 0x7f0c0b58f700 (LWP 9444) \"dotnet\" 0x00007f0c16614474 in __libc_read (fd=9, buf=0x7f0c0b58eebb, nbytes=1) at ../sysdeps/unix/sysv/linux/read.c:27\r\n  6    Thread 0x7f0c0ad76700 (LWP 9447) \".NET Long Runni\" mono_stack_mark_pop (info=\u003coptimized out\u003e, stackmark=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/metadata/handle.h:166\r\n  7    Thread 0x7f0c0ab75700 (LWP 9448) \".NET ThreadPool\" 0x00007f0c16610fb9 in futex_reltimed_wait_cancelable (private=\u003coptimized out\u003e, reltime=0x7f0c0ab746a0, expected=0, futex_word=0x7f0bfc008c90) at ../sysdeps/unix/sysv/linux/futex-internal.h:142\r\n  8    Thread 0x7f0c0a96e700 (LWP 9449) \".NET ThreadPool\" 0x00007f0c16610fb9 in futex_reltimed_wait_cancelable (private=\u003coptimized out\u003e, reltime=0x7f0c0a96d810, expected=0, futex_word=0x7f0bf00467c0) at ../sysdeps/unix/sysv/linux/futex-internal.h:142\r\n  9    Thread 0x7f0c0a92c700 (LWP 9450) \".NET ThreadPool\" 0x00007f0c16610fb9 in futex_reltimed_wait_cancelable (private=\u003coptimized out\u003e, reltime=0x7f0c0a92b890, expected=0, futex_word=0x7f0c0a92b9c8) at ../sysdeps/unix/sysv/linux/futex-internal.h:142\r\n  10   Thread 0x7f0c0a715700 (LWP 9451) \".NET Long Runni\" 0x00007f0c151f02c0 in mono_threads_transition_do_blocking (info=\u003coptimized out\u003e, func=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-state-machine.c:759\r\n  11   Thread 0x7f0c0a514700 (LWP 9452) \".NET Long Runni\" 0x00007f0c1661532a in __waitpid (pid=9459, stat_loc=0x7f0c0a50ea40, options=0) at ../sysdeps/unix/sysv/linux/waitpid.c:30\r\n  12   Thread 0x7f0c0a313700 (LWP 9453) \".NET Long Runni\" 0x00007f0c1661532a in __waitpid (pid=9460, stat_loc=0x7f0c0a30e6c0, options=0) at ../sysdeps/unix/sysv/linux/waitpid.c:30\r\n  13   Thread 0x7f0c0a112700 (LWP 9454) \".NET Long Runni\" 0x00007f0c151f02c0 in mono_threads_transition_do_blocking (info=\u003coptimized out\u003e, func=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-state-machine.c:759\r\n  14   Thread 0x7f0c09f11700 (LWP 9455) \".NET Long Runni\" 0x00007f0c151f02c0 in mono_threads_transition_do_blocking (info=\u003coptimized out\u003e, func=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-state-machine.c:759\r\n  15   Thread 0x7f0c09d10700 (LWP 9456) \".NET Long Runni\" 0x00007f0c151f02c0 in mono_threads_transition_do_blocking (info=\u003coptimized out\u003e, func=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-state-machine.c:759\r\n  16   Thread 0x7f0c09b0f700 (LWP 9457) \".NET Long Runni\" 0x00007f0c151f02c0 in mono_threads_transition_do_blocking (info=\u003coptimized out\u003e, func=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-state-machine.c:759\r\n  17   Thread 0x7f0c0990e700 (LWP 9458) \".NET Long Runni\" 0x00007f0c1511530d in mono_class_from_mono_type_internal (type=0x562abe1ee340) at /home/jekoritz/runtime2/src/mono/mono/metadata/class.c:2171\r\n\r\nThread 17 (Thread 0x7f0c0990e700 (LWP 9458)):\r\n#0  0x00007f0c1511530d in mono_class_from_mono_type_internal (type=0x562abe1ee340) at /home/jekoritz/runtime2/src/mono/mono/metadata/class.c:2171\r\n#1  0x00007f0c15116e36 in mono_class_is_variant_compatible (klass=0x562abe1ecaa0, oklass=\u003coptimized out\u003e, check_for_reference_conv=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/metadata/class.c:3631\r\n#2  0x00007f0c15116a52 in mono_class_interface_offset_with_variance (klass=0x562abe7b9368, itf=0x562abe1ecaa0, non_exact_match=0x7f0c0990b8ec) at /home/jekoritz/runtime2/src/mono/mono/metadata/class.c:1931\r\n#3  0x00007f0c152ef980 in mini_resolve_imt_method (vt=0x7f0be4095ec8, vtable_slot=0x7f0be4095e90, imt_method=0x562abe1f76e0, impl_method=0x7f0c0990b9a0, out_aot_addr=0x7f0c0990b9c0, out_need_rgctx_tramp=0x7f0c0990b96c, variant_iface=0x7f0c0990b998, error=0x7f0c0990ba28) at /home/jekoritz/runtime2/src/mono/mono/mini/mini-trampolines.c:205\r\n#4  0x00007f0c152f0127 in common_call_trampoline (regs=\u003coptimized out\u003e, code=\u003coptimized out\u003e, m=0x0, vt=\u003coptimized out\u003e, vtable_slot=0x7f0be4095e90, error=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/mini/mini-trampolines.c:471\r\n#5  0x00007f0c152f122e in mono_vcall_trampoline (regs=0x7f0c0990bad8, code=0x40592335 \"H\\213\\310H\\213D$\\030H\\203\\300\\060H\\211\\bH\\211L$\\020H\\213\\320H\\301\\352\\tH\\201\\342\\377\\377\\177\", slot=-7, tramp=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/mini/mini-trampolines.c:852\r\n#6  0x0000000040165296 in ?? ()\r\n#7  0x00007f0bd4002455 in ?? ()\r\n#8  0x00007f0c14976560 in ?? ()\r\n#9  0x00007f0c0990bca0 in ?? ()\r\n#10 0x00007f0c0990bad8 in ?? ()\r\n#11 0x00007f0bd4001be0 in ?? ()\r\n#12 0x00007f0be4095ec8 in ?? ()\r\n#13 0x0000000000000011 in ?? ()\r\n#14 0x00007f0c0990ea30 in ?? ()\r\n#15 0x00007f0c0964f0b0 in ?? ()\r\n#16 0x00007f0c0990bca0 in ?? ()\r\n#17 0x00007f0c0990c2a0 in ?? ()\r\n#18 0x0000000000000001 in ?? ()\r\n#19 0x00007f0c14976560 in ?? ()\r\n#20 0x00007f0c0990b928 in ?? ()\r\n#21 0x0000000000000000 in ?? ()\r\n\r\nThread 16 (Thread 0x7f0c09b0f700 (LWP 9457)):\r\n#0  0x00007f0c151f02c0 in mono_threads_transition_do_blocking (info=\u003coptimized out\u003e, func=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-state-machine.c:759\r\n#1  0x00007f0c151f19d1 in mono_threads_enter_gc_safe_region_unbalanced_with_info (info=0x7f0bd0000b20, stackdata=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:322\r\n#2  0x00007f0c151f1a67 in mono_threads_enter_gc_safe_region_unbalanced_internal (stackdata=0x7f0c09b0b948) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:288\r\n#3  mono_threads_enter_gc_safe_region_unbalanced (stackpointer=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:296\r\n#4  0x00000000404f98a3 in ?? ()\r\n#5  0x00007f0c09b0bd10 in ?? ()\r\n#6  0x0000562abe7baf60 in ?? ()\r\n#7  0x00007f0c09b0bc48 in ?? ()\r\n#8  0x000000000000000c in ?? ()\r\n#9  0x000000000000001a in ?? ()\r\n#10 0x00007f0bd0000b20 in ?? ()\r\n#11 0x00007f0c153ef68f in ?? () from /home/jekoritz/runtime2/artifacts/bin/testhost/net7.0-Linux-Release-x64/shared/Microsoft.NETCore.App/7.0.0/libcoreclr.so\r\n#12 0x00007f0c09b0bb18 in ?? ()\r\n#13 0x00007f0c09b0bba0 in ?? ()\r\n#14 0x00007f0c09b0b960 in ?? ()\r\n#15 0x00007f0c0936637a in ?? () from /home/jekoritz/runtime2/artifacts/bin/DllImportGenerator.Tests/net7.0-Release/Microsoft.Interop.Tests.NativeExportsNE.so\r\n#16 0x00007f0c1518da74 in mono_threads_detach_coop_internal (cookie=0x0, stackdata=0x7f0c09b0b9c8) at /home/jekoritz/runtime2/src/mono/mono/metadata/threads.c:4754\r\n#17 mono_threads_detach_coop (orig=\u003coptimized out\u003e, dummy=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/metadata/threads.c:4772\r\n#18 0x00000000404f978c in ?? ()\r\n#19 0x000000000000001a in ?? ()\r\n#20 0x00000000404f974c in ?? ()\r\n#21 0x000000000000001a in ?? ()\r\n#22 0x00000000404a54b8 in ?? ()\r\n#23 0x00007f0c09b0bba0 in ?? ()\r\n#24 0x0000562abe7baf60 in ?? ()\r\n#25 0x00007f0c09b0bc48 in ?? ()\r\n#26 0x00007f0bd0001be0 in ?? ()\r\n#27 0x00007f0c09b0bb50 in ?? ()\r\n#28 0x00007f0c09b0ba50 in ?? ()\r\n#29 0x00007f0c09b0ba80 in ?? ()\r\n#30 0x00007f0c151f2008 in copy_stack_data_internal (info=\u003coptimized out\u003e, stackdata_begin=0x7f0c09b0bd10, wrapper_data1=\u003coptimized out\u003e, wrapper_data2=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:193\r\n#31 copy_stack_data (info=0x1a, stackdata_begin=0x7f0c09b0bd10) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:246\r\n#32 0x000000004065b1f8 in ?? ()\r\n#33 0x00007f0c12c49360 in ?? ()\r\n#34 0x0000000000000000 in ?? ()\r\n\r\nThread 15 (Thread 0x7f0c09d10700 (LWP 9456)):\r\n#0  0x00007f0c151f02c0 in mono_threads_transition_do_blocking (info=\u003coptimized out\u003e, func=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-state-machine.c:759\r\n#1  0x00007f0c151f19d1 in mono_threads_enter_gc_safe_region_unbalanced_with_info (info=0x7f0bdc000b20, stackdata=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:322\r\n#2  0x00007f0c151b4d42 in mono_coop_cond_timedwait (cond=\u003coptimized out\u003e, mutex=\u003coptimized out\u003e, timeout_ms=4294967295) at /home/jekoritz/runtime2/src/mono/mono/mini/../../mono/utils/mono-coop-mutex.h:101\r\n#3  coop_cond_timedwait_alertable (cond=0x7f0c156b7330 \u003cpending_done_cond\u003e, mutex=0x7f0c156b7300 \u003cpending_done_mutex\u003e, timeout_ms=4294967295, alertable=0x7f0c09d0ca74) at /home/jekoritz/runtime2/src/mono/mono/metadata/gc.c:164\r\n#4  ves_icall_System_GC_WaitForPendingFinalizers () at /home/jekoritz/runtime2/src/mono/mono/metadata/gc.c:625\r\n#5  0x0000000040673987 in ?? ()\r\n#6  0x00007f0c09d0cd10 in ?? ()\r\n#7  0x0000562abe7bb160 in ?? ()\r\n#8  0x00007f0c09d0cc48 in ?? ()\r\n#9  0x0000000000000000 in ?? ()\r\n\r\nThread 14 (Thread 0x7f0c09f11700 (LWP 9455)):\r\n#0  0x00007f0c151f02c0 in mono_threads_transition_do_blocking (info=\u003coptimized out\u003e, func=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-state-machine.c:759\r\n#1  0x00007f0c151f19d1 in mono_threads_enter_gc_safe_region_unbalanced_with_info (info=0x7f0bd8000b20, stackdata=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:322\r\n#2  0x00007f0c151f1a67 in mono_threads_enter_gc_safe_region_unbalanced_internal (stackdata=0x7f0c09f0d7c8) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:288\r\n#3  mono_threads_enter_gc_safe_region_unbalanced (stackpointer=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:296\r\n#4  0x00000000404f98a3 in ?? ()\r\n#5  0x00007f0bd80acb40 in ?? ()\r\n#6  0x00007f0c14847df8 in ?? ()\r\n#7  0x00007f0bd8001be0 in ?? ()\r\n#8  0x00007f0c09f0d9f0 in ?? ()\r\n#9  0x0000000000000018 in ?? ()\r\n#10 0x0000000000000000 in ?? ()\r\n\r\nThread 13 (Thread 0x7f0c0a112700 (LWP 9454)):\r\n#0  0x00007f0c151f02c0 in mono_threads_transition_do_blocking (info=\u003coptimized out\u003e, func=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-state-machine.c:759\r\n#1  0x00007f0c151f19d1 in mono_threads_enter_gc_safe_region_unbalanced_with_info (info=0x7f0be4000b20, stackdata=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:322\r\n#2  0x00007f0c151f1a67 in mono_threads_enter_gc_safe_region_unbalanced_internal (stackdata=0x7f0c0a10e648) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:288\r\n#3  mono_threads_enter_gc_safe_region_unbalanced (stackpointer=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:296\r\n#4  0x00000000404f98a3 in ?? ()\r\n#5  0x00007f0c0a10e840 in ?? ()\r\n#6  0x00007f0c12c00280 in ?? ()\r\n#7  0x00007f0c0a10e840 in ?? ()\r\n#8  0x000000000000000d in ?? ()\r\n#9  0x000000000000000e in ?? ()\r\n#10 0x00007f0be4000b20 in ?? ()\r\n#11 0x00007f0c153ef68f in ?? () from /home/jekoritz/runtime2/artifacts/bin/testhost/net7.0-Linux-Release-x64/shared/Microsoft.NETCore.App/7.0.0/libcoreclr.so\r\n#12 0x00007f0c0a10e808 in ?? ()\r\n#13 0x00007f0c0a10e9b0 in ?? ()\r\n#14 0x00007f0c0a10e660 in ?? ()\r\n#15 0x00007f0c09366310 in ?? () from /home/jekoritz/runtime2/artifacts/bin/DllImportGenerator.Tests/net7.0-Release/Microsoft.Interop.Tests.NativeExportsNE.so\r\n#16 0x00007f0c1518da74 in mono_threads_detach_coop_internal (cookie=0x0, stackdata=0x7f0c0a10e6c8) at /home/jekoritz/runtime2/src/mono/mono/metadata/threads.c:4754\r\n#17 mono_threads_detach_coop (orig=\u003coptimized out\u003e, dummy=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/metadata/threads.c:4772\r\n#18 0x00000000404f978c in ?? ()\r\n#19 0x000000000000000e in ?? ()\r\n#20 0x00000000404f974c in ?? ()\r\n#21 0x000000000000000e in ?? ()\r\n#22 0x00000000404a5cc8 in ?? ()\r\n#23 0x00007f0c0a10e9b0 in ?? ()\r\n#24 0x00007f0c12c00280 in ?? ()\r\n#25 0x00007f0c0a10e840 in ?? ()\r\n#26 0x00007f0be4001be0 in ?? ()\r\n#27 0x00007f0c0a10e840 in ?? ()\r\n#28 0x00007f0c151f2008 in copy_stack_data_internal (info=\u003coptimized out\u003e, stackdata_begin=0x7f0c0a10e840, wrapper_data1=\u003coptimized out\u003e, wrapper_data2=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:193\r\n#29 copy_stack_data (info=0xe, stackdata_begin=0x7f0c0a10e840) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:246\r\n#30 0x0000000040693374 in ?? ()\r\n#31 0x0000000040693320 in ?? ()\r\n#32 0x0000000000000000 in ?? ()\r\n\r\nThread 12 (Thread 0x7f0c0a313700 (LWP 9453)):\r\n#0  0x00007f0c1661532a in __waitpid (pid=9460, stat_loc=0x7f0c0a30e6c0, options=0) at ../sysdeps/unix/sysv/linux/waitpid.c:30\r\n#1  0x00007f0c15348877 in dump_native_stacktrace (signal=\u003coptimized out\u003e, mctx=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/mini/mini-posix.c:842\r\n#2  mono_dump_native_crash_info (signal=\u003coptimized out\u003e, mctx=0x7f0c0a30f230, info=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/mini/mini-posix.c:869\r\n#3  0x00007f0c152ede1e in mono_handle_native_crash (signal=0x7f0c15402991 \"SIGSEGV\", mctx=0x7f0c0a30f230, info=0x7f0c0a30f4f0) at /home/jekoritz/runtime2/src/mono/mono/mini/mini-exceptions.c:2940\r\n#4  0x00007f0c15251b31 in mono_sigsegv_signal_handler_debug (_dummy=11, _info=0x7f0c0a30f4f0, context=0x7f0c0a30f3c0, debug_fault_addr=0x2500000018) at /home/jekoritz/runtime2/src/mono/mono/mini/mini-runtime.c:3719\r\n#5  \u003csignal handler called\u003e\r\n#6  0x00000000404a5417 in ?? ()\r\n#7  0x0000002500000018 in ?? ()\r\n#8  0x0000000000000076 in ?? ()\r\n#9  0x0000000000000004 in ?? ()\r\n#10 0x0000000000000076 in ?? ()\r\n#11 0x0000000000000004 in ?? ()\r\n#12 0x000000000000003b in ?? ()\r\n#13 0x0000000000000002 in ?? ()\r\n#14 0x000000004065d93d in ?? ()\r\n#15 0x00007f0c0a30fd10 in ?? ()\r\n#16 0x0000562abe7ba858 in ?? ()\r\n#17 0x00007f0c0a30fc48 in ?? ()\r\n#18 0x00007f0c14803be8 in ?? ()\r\n#19 0x000000004065d170 in ?? ()\r\n#20 0x00007f0c0a30fa58 in ?? ()\r\n#21 0x00007f0c0a30fe38 in ?? ()\r\n#22 0x00007f0c15150e9d in mono_os_mutex_unlock (mutex=0x2500000018) at /home/jekoritz/runtime2/src/mono/mono/mini/../../mono/utils/mono-os-mutex.h:127\r\n#23 mono_coop_mutex_unlock (mutex=0x2500000018) at /home/jekoritz/runtime2/src/mono/mono/mini/../../mono/utils/mono-coop-mutex.h:71\r\n#24 mono_loader_unlock () at /home/jekoritz/runtime2/src/mono/mono/metadata/loader.c:142\r\n#25 0x00007f0c151201ac in mono_class_create_from_typedef (image=0x562abe7ba858, type_token=1080414576, error=0x7f0c0a30fc30) at /home/jekoritz/runtime2/src/mono/mono/metadata/class-init.c:445\r\n#26 0x0000000000000000 in ?? ()\r\n\r\nThread 11 (Thread 0x7f0c0a514700 (LWP 9452)):\r\n#0  0x00007f0c1661532a in __waitpid (pid=9459, stat_loc=0x7f0c0a50ea40, options=0) at ../sysdeps/unix/sysv/linux/waitpid.c:30\r\n#1  0x00007f0c15348877 in dump_native_stacktrace (signal=\u003coptimized out\u003e, mctx=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/mini/mini-posix.c:842\r\n#2  mono_dump_native_crash_info (signal=\u003coptimized out\u003e, mctx=0x7f0c0a50f558, info=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/mini/mini-posix.c:869\r\n#3  0x00007f0c152ede1e in mono_handle_native_crash (signal=0x7f0c15402972 \"SIGABRT\", mctx=0x7f0c0a50f558, info=0x7f0c0a50f830) at /home/jekoritz/runtime2/src/mono/mono/mini/mini-exceptions.c:2940\r\n#4  0x00007f0c15348008 in sigabrt_signal_handler (_dummy=\u003coptimized out\u003e, _info=0x7f0c0a50f830, context=0x7f0c0a50f700) at /home/jekoritz/runtime2/src/mono/mono/mini/mini-posix.c:224\r\n#5  \u003csignal handler called\u003e\r\n#6  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\r\n#7  0x00007f0c1570f921 in __GI_abort () at abort.c:79\r\n#8  0x00007f0c15396d65 in monoeg_assert_abort () at /home/jekoritz/runtime2/src/mono/mono/eglib/goutput.c:57\r\n#9  0x00007f0c151e0543 in mono_log_write_logfile (log_domain=\u003coptimized out\u003e, level=\u003coptimized out\u003e, hdr=\u003coptimized out\u003e, message=0x7f0bec0a43c0 \"mono_threads_enter_gc_safe_region_unbalanced Cannot transition thread 0x7f0c0a514700 from STATE_BLOCKING with DO_BLOCKING\") at /home/jekoritz/runtime2/src/mono/mono/utils/mono-log-common.c:136\r\n#10 0x00007f0c15397125 in monoeg_g_logstr (log_domain=0x0, log_level=G_LOG_LEVEL_ERROR, msg=0x0) at /home/jekoritz/runtime2/src/mono/mono/eglib/goutput.c:151\r\n#11 monoeg_g_logv_nofree (log_domain=\u003coptimized out\u003e, log_level=\u003coptimized out\u003e, format=\u003coptimized out\u003e, args=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/eglib/goutput.c:166\r\n#12 monoeg_g_logv (log_domain=0x0, log_level=G_LOG_LEVEL_ERROR, format=\u003coptimized out\u003e, args=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/eglib/goutput.c:173\r\n#13 0x00007f0c1539725e in monoeg_g_log (log_domain=0x2 \u003cerror: Cannot access memory at address 0x2\u003e, log_level=173079744, format=0x0) at /home/jekoritz/runtime2/src/mono/mono/eglib/goutput.c:182\r\n#14 0x00007f0c151f02bc in mono_threads_transition_do_blocking (info=\u003coptimized out\u003e, func=0x8 \u003cerror: Cannot access memory at address 0x8\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-state-machine.c:759\r\n#15 0x00007f0c151f19d1 in mono_threads_enter_gc_safe_region_unbalanced_with_info (info=0x7f0bec000b20, stackdata=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:322\r\n#16 0x00007f0c151f1a67 in mono_threads_enter_gc_safe_region_unbalanced_internal (stackdata=0x7f0c0a510528) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:288\r\n#17 mono_threads_enter_gc_safe_region_unbalanced (stackpointer=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:296\r\n#18 0x00000000404f98a3 in ?? ()\r\n#19 0x00007f0c0a510b40 in ?? ()\r\n#20 0x0000562abe7bb350 in ?? ()\r\n#21 0x00007f0bec001e40 in ?? ()\r\n#22 0x0000000000000018 in ?? ()\r\n#23 0x0000000000000018 in ?? ()\r\n#24 0x000000004065d12b in ?? ()\r\n#25 0x00007f0c09366216 in ?? () from /home/jekoritz/runtime2/artifacts/bin/DllImportGenerator.Tests/net7.0-Release/Microsoft.Interop.Tests.NativeExportsNE.so\r\n#26 0x00007f0c0a5106b8 in ?? ()\r\n#27 0x00007f0c0a510750 in ?? ()\r\n#28 0x00007f0c0a510540 in ?? ()\r\n#29 0x00007f0c153ef68f in ?? () from /home/jekoritz/runtime2/artifacts/bin/testhost/net7.0-Linux-Release-x64/shared/Microsoft.NETCore.App/7.0.0/libcoreclr.so\r\n#30 0x00007f0c09366216 in ?? () from /home/jekoritz/runtime2/artifacts/bin/DllImportGenerator.Tests/net7.0-Release/Microsoft.Interop.Tests.NativeExportsNE.so\r\n#31 0x0000000200000000 in ?? ()\r\n#32 0x00000000404f97d8 in ?? ()\r\n#33 0x00007f0c1485e0c0 in ?? ()\r\n#34 0x00000000404f978c in ?? ()\r\n#35 0x0000000000000018 in ?? ()\r\n#36 0x00000000404f974c in ?? ()\r\n#37 0x0000000000000018 in ?? ()\r\n#38 0x000000004065dcf8 in ?? ()\r\n#39 0x00007f0c0a510b40 in ?? ()\r\n#40 0x0000562abe7bb350 in ?? ()\r\n#41 0x00007f0bec001e40 in ?? ()\r\n#42 0xffffffff80070057 in ?? ()\r\n#43 0x00007f0c0a510728 in ?? ()\r\n#44 0x0000000000000000 in ?? ()\r\n\r\nThread 10 (Thread 0x7f0c0a715700 (LWP 9451)):\r\n#0  0x00007f0c151f02c0 in mono_threads_transition_do_blocking (info=\u003coptimized out\u003e, func=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-state-machine.c:759\r\n#1  0x00007f0c151f19d1 in mono_threads_enter_gc_safe_region_unbalanced_with_info (info=0x7f0be8000b20, stackdata=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:322\r\n#2  0x00007f0c151f1a67 in mono_threads_enter_gc_safe_region_unbalanced_internal (stackdata=0x7f0c0a711258) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:288\r\n#3  mono_threads_enter_gc_safe_region_unbalanced (stackpointer=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-threads-coop.c:296\r\n#4  0x00000000404f98a3 in ?? ()\r\n#5  0x0000000000000000 in ?? ()\r\n\r\nThread 9 (Thread 0x7f0c0a92c700 (LWP 9450)):\r\n#0  0x00007f0c16610fb9 in futex_reltimed_wait_cancelable (private=\u003coptimized out\u003e, reltime=0x7f0c0a92b890, expected=0, futex_word=0x7f0c0a92b9c8) at ../sysdeps/unix/sysv/linux/futex-internal.h:142\r\n#1  __pthread_cond_wait_common (abstime=0x7f0c0a92b948, mutex=0x7f0bf8062da0, cond=0x7f0c0a92b9a0) at pthread_cond_wait.c:533\r\n#2  __pthread_cond_timedwait (cond=0x7f0c0a92b9a0, mutex=0x7f0bf8062da0, abstime=0x7f0c0a92b948) at pthread_cond_wait.c:667\r\n#3  0x00007f0c151e28c4 in mono_os_cond_timedwait (cond=0x7f0c0a92b9a0, mutex=0x7f0bf8062da0, timeout_ms=20000) at /home/jekoritz/runtime2/src/mono/mono/utils/mono-os-mutex.c:75\r\n#4  0x00007f0c151e9bc4 in mono_coop_cond_timedwait (cond=0x7f0c0a92b9a0, mutex=\u003coptimized out\u003e, timeout_ms=20000) at /home/jekoritz/runtime2/src/mono/mono/mini/../../mono/utils/mono-coop-mutex.h:103\r\n#5  mono_lifo_semaphore_timed_wait (semaphore=0x7f0bf8062da0, timeout_ms=20000) at /home/jekoritz/runtime2/src/mono/mono/utils/lifo-semaphore.c:48\r\n#6  0x0000000040604097 in ?? ()\r\n#7  0x0000000000000008 in ?? ()\r\n#8  0x0000000000000046 in ?? ()\r\n#9  0x00007f0c14bcbec8 in ?? ()\r\n#10 0x00007f0c14bcbec8 in ?? ()\r\n#11 0x0000000000004e20 in ?? ()\r\n#12 0x00007f0bf4002450 in ?? ()\r\n#13 0x0000000000000046 in ?? ()\r\n#14 0x00007f0c0a92ba10 in ?? ()\r\n#15 0x0000000000000046 in ?? ()\r\n#16 0x0000000040603fd8 in ?? ()\r\n#17 0x00007f0c14bcbec8 in ?? ()\r\n#18 0x0000000000004e20 in ?? ()\r\n#19 0x0000000000000046 in ?? ()\r\n#20 0x0000000040603734 in ?? ()\r\n#21 0x0000000000004e20 in ?? ()\r\n#22 0x0000000000000000 in ?? ()\r\n\r\nThread 8 (Thread 0x7f0c0a96e700 (LWP 9449)):\r\n#0  0x00007f0c16610fb9 in futex_reltimed_wait_cancelable (private=\u003coptimized out\u003e, reltime=0x7f0c0a96d810, expected=0, futex_word=0x7f0bf00467c0) at ../sysdeps/unix/sysv/linux/futex-internal.h:142\r\n#1  __pthread_cond_wait_common (abstime=0x7f0c0a96d8b0, mutex=0x7f0bf0046770, cond=0x7f0bf0046798) at pthread_cond_wait.c:533\r\n#2  __pthread_cond_timedwait (cond=0x7f0bf0046798, mutex=0x7f0bf0046770, abstime=0x7f0c0a96d8b0) at pthread_cond_wait.c:667\r\n#3  0x00007f0c123f91a7 in SystemNative_LowLevelMonitor_TimedWait (monitor=0x7f0bf0046770, timeoutMilliseconds=500) at /home/jekoritz/runtime2/src/libraries/Native/Unix/System.Native/pal_threading.c:192\r\n#4  0x0000000040601047 in ?? ()\r\n#5  0x0000000071fb2bce in ?? ()\r\n#6  0x0000000000000000 in ?? ()\r\n\r\nThread 7 (Thread 0x7f0c0ab75700 (LWP 9448)):\r\n#0  0x00007f0c16610fb9 in futex_reltimed_wait_cancelable (private=\u003coptimized out\u003e, reltime=0x7f0c0ab746a0, expected=0, futex_word=0x7f0bfc008c90) at ../sysdeps/unix/sysv/linux/futex-internal.h:142\r\n#1  __pthread_cond_wait_common (abstime=0x7f0c0ab74740, mutex=0x7f0bfc008c40, cond=0x7f0bfc008c68) at pthread_cond_wait.c:533\r\n#2  __pthread_cond_timedwait (cond=0x7f0bfc008c68, mutex=0x7f0bfc008c40, abstime=0x7f0c0ab74740) at pthread_cond_wait.c:667\r\n#3  0x00007f0c123f91a7 in SystemNative_LowLevelMonitor_TimedWait (monitor=0x7f0bfc008c40, timeoutMilliseconds=12000) at /home/jekoritz/runtime2/src/libraries/Native/Unix/System.Native/pal_threading.c:192\r\n#4  0x0000000040601047 in ?? ()\r\n#5  0x0000000071fb2bce in ?? ()\r\n#6  0x0000000000000000 in ?? ()\r\n\r\nThread 6 (Thread 0x7f0c0ad76700 (LWP 9447)):\r\n#0  mono_stack_mark_pop (info=\u003coptimized out\u003e, stackmark=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/metadata/handle.h:166\r\n#1  ves_icall_RuntimeTypeHandle_GetCorElementType_raw (a0=0x7f0c0ad75710) at /home/jekoritz/runtime2/src/mono/mono/metadata/icall-def-netcore.h:405\r\n#2  0x0000000040564824 in ?? ()\r\n#3  0x00007f0c09621710 in ?? ()\r\n#4  0x0000000000000001 in ?? ()\r\n#5  0x00007f0c1499f448 in ?? ()\r\n#6  0x00007f0c149716d0 in ?? ()\r\n#7  0x00007f0c12c2ac28 in ?? ()\r\n#8  0x00007f0bf8009400 in ?? ()\r\n#9  0x00007f0c0ad758d0 in ?? ()\r\n#10 0x00007f0c0ad756d0 in ?? ()\r\n#11 0x00007f0c12c2ac28 in ?? ()\r\n#12 0x000000004056475c in ?? ()\r\n#13 0x00007f0c12c2ac28 in ?? ()\r\n#14 0x000000004056471c in ?? ()\r\n#15 0x00007f0c12c2ac28 in ?? ()\r\n#16 0x00000000405646e0 in ?? ()\r\n#17 0x00007f0c12c2ac28 in ?? ()\r\n#18 0x0000000040564610 in ?? ()\r\n#19 0x0000000000000001 in ?? ()\r\n#20 0x00007f0c1499f448 in ?? ()\r\n#21 0x00007f0c149716d0 in ?? ()\r\n#22 0x00007f0c12c2ac28 in ?? ()\r\n#23 0x00007f0c096e8a90 in ?? ()\r\n#24 0x000000004058e8f8 in ?? ()\r\n#25 0x00007f0c1499f448 in ?? ()\r\n#26 0x00007f0c149716d0 in ?? ()\r\n#27 0x00007f0c1480d700 in ?? ()\r\n#28 0x00007f0c096e8a90 in ?? ()\r\n#29 0x00007f0c09621710 in ?? ()\r\n#30 0x00000000405a8dfc in ?? ()\r\n#31 0x00007f0c09611630 in ?? ()\r\n#32 0x0000562abea93468 in ?? ()\r\n#33 0x0000000000000000 in ?? ()\r\n\r\nThread 5 (Thread 0x7f0c0b58f700 (LWP 9444)):\r\n#0  0x00007f0c16614474 in __libc_read (fd=9, buf=0x7f0c0b58eebb, nbytes=1) at ../sysdeps/unix/sysv/linux/read.c:27\r\n#1  0x00007f0c123f8d7f in SignalHandlerLoop (arg=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/libraries/Native/Unix/System.Native/pal_signal.c:321\r\n#2  0x00007f0c1660a6db in start_thread (arg=0x7f0c0b58f700) at pthread_create.c:463\r\n#3  0x00007f0c157f071f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n\r\nThread 4 (Thread 0x7f0c129fe700 (LWP 9442)):\r\n#0  __lll_lock_wait () at ../sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\r\n#1  0x00007f0c1660d025 in __GI___pthread_mutex_lock (mutex=0x7f0c156b7300 \u003cpending_done_mutex\u003e) at ../nptl/pthread_mutex_lock.c:80\r\n#2  0x00007f0c151b4730 in mono_os_mutex_lock (mutex=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/mini/../../mono/utils/mono-os-mutex.h:105\r\n#3  mono_coop_mutex_lock (mutex=0x7f0c156b7300 \u003cpending_done_mutex\u003e) at /home/jekoritz/runtime2/src/mono/mono/mini/../../mono/utils/mono-coop-mutex.h:57\r\n#4  0x00007f0c151b5ec3 in finalizer_thread (unused=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/metadata/gc.c:900\r\n#5  0x00007f0c1518e11a in start_wrapper_internal (start_info=0x0, stack_ptr=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/metadata/threads.c:1200\r\n#6  0x00007f0c1518dfa9 in start_wrapper (data=0x562abe19d900) at /home/jekoritz/runtime2/src/mono/mono/metadata/threads.c:1262\r\n#7  0x00007f0c1660a6db in start_thread (arg=0x7f0c129fe700) at pthread_create.c:463\r\n#8  0x00007f0c157f071f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n\r\nThread 3 (Thread 0x7f0c12bff700 (LWP 9441)):\r\n#0  0x00007f0c157e3cb9 in __GI___poll (fds=0x7f0c0c002d40, nfds=1, timeout=-1) at ../sysdeps/unix/sysv/linux/poll.c:29\r\n#1  0x00007f0c153e534a in ipc_poll_fds (fds=\u003coptimized out\u003e, nfds=1, timeout=4294967295) at /home/jekoritz/runtime2/src/native/eventpipe/ds-ipc-pal-socket.c:470\r\n#2  ds_ipc_poll (poll_handles_data=0x7f0c0c002530, poll_handles_data_len=1, timeout_ms=4294967295, callback=0x7f0c153e4840 \u003cserver_warning_callback\u003e) at /home/jekoritz/runtime2/src/native/eventpipe/ds-ipc-pal-socket.c:1082\r\n#3  0x00007f0c153e2995 in ds_ipc_stream_factory_get_next_available_stream (callback=0x7f0c153e4840 \u003cserver_warning_callback\u003e) at /home/jekoritz/runtime2/src/native/eventpipe/ds-ipc.c:395\r\n#4  0x00007f0c153e11f9 in server_thread (data=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/native/eventpipe/ds-server.c:127\r\n#5  0x00007f0c153e4821 in ep_rt_thread_mono_start_func (data=0x562abe181f60) at /home/jekoritz/runtime2/src/mono/mono/mini/../eventpipe/ep-rt-mono.h:1266\r\n#6  0x00007f0c1660a6db in start_thread (arg=0x7f0c12bff700) at pthread_create.c:463\r\n#7  0x00007f0c157f071f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n\r\nThread 2 (Thread 0x7f0c147ff700 (LWP 9440)):\r\n#0  0x00007f0c16610ad3 in futex_wait_cancelable (private=\u003coptimized out\u003e, expected=0, futex_word=0x7f0c156c64dc \u003cwork_cond+44\u003e) at ../sysdeps/unix/sysv/linux/futex-internal.h:88\r\n#1  __pthread_cond_wait_common (abstime=0x0, mutex=0x7f0c156c6488 \u003clock\u003e, cond=0x7f0c156c64b0 \u003cwork_cond\u003e) at pthread_cond_wait.c:502\r\n#2  __pthread_cond_wait (cond=0x7f0c156c64b0 \u003cwork_cond\u003e, mutex=0x7f0c156c6488 \u003clock\u003e) at pthread_cond_wait.c:655\r\n#3  0x00007f0c152393b3 in mono_os_cond_wait (cond=\u003coptimized out\u003e, mutex=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/mini/../../mono/utils/mono-os-mutex.h:219\r\n#4  get_work (worker_index=\u003coptimized out\u003e, work_context=\u003coptimized out\u003e, do_idle=\u003coptimized out\u003e, job=\u003coptimized out\u003e) at /home/jekoritz/runtime2/src/mono/mono/sgen/sgen-thread-pool.c:167\r\n#5  thread_func (data=0x0) at /home/jekoritz/runtime2/src/mono/mono/sgen/sgen-thread-pool.c:198\r\n#6  0x00007f0c1660a6db in start_thread (arg=0x7f0c147ff700) at pthread_create.c:463\r\n#7  0x00007f0c157f071f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n\r\nThread 1 (Thread 0x7f0c16a30740 (LWP 9439)):\r\n#0  0x00007f0c16610ad3 in futex_wait_cancelable (private=\u003coptimized out\u003e, expected=0, futex_word=0x562abe8bc6e4) at ../sysdeps/unix/sysv/linux/futex-internal.h:88\r\n#1  __pthread_cond_wait_common (abstime=0x0, mutex=0x562abe8bc690, cond=0x562abe8bc6b8) at pthread_cond_wait.c:502\r\n#2  __pthread_cond_wait (cond=0x562abe8bc6b8, mutex=0x562abe8bc690) at pthread_cond_wait.c:655\r\n#3  0x00000000405b6d7c in ?? ()\r\n#4  0x00007f0c14bba208 in ?? ()\r\n#5  0x00007f0c14aaf318 in ?? ()\r\n#6  0xffffffffffffffff in ?? ()\r\n#7  0x0000000000000001 in ?? ()\r\n#8  0x00007f0c14aaf348 in ?? ()\r\n#9  0x00007f0c14aaf318 in ?? ()\r\n#10 0xffffffffffffffff in ?? ()\r\n#11 0x0000562abe179220 in ?? ()\r\n#12 0x00007ffcceff92e0 in ?? ()\r\n#13 0x00007ffcceff91f0 in ?? ()\r\n#14 0x0000562abe114eb0 in ?? ()\r\n#15 0x00000000405b6b6c in ?? ()\r\n#16 0xffffffffffffffff in ?? ()\r\n#17 0x00000000405b6b2c in ?? ()\r\n#18 0x00007f0c14aaf348 in ?? ()\r\n#19 0x00000000405b6208 in ?? ()\r\n#20 0x0000562abe0b1cd0 in ?? ()\r\n#21 0x0000000000000000 in ?? ()\r\n\r\nExiting early due to double fault.\r\n```\r\n\r\nHere\u0027s what I did to repro:\r\n\r\n1. Check out the `feature/use-dllimport-generator` branch.\r\n2. Merge the `main` branch into that branch to get the implementation of `coreclr_get_delegate`.\r\n3. Remove the `src/libraries/System.Runtime.InteropServices/tests/DllImportGenerator.Tests/AssemblyInfo.cs` file to remove the \"skip on mono\" attribute.\r\n4. Run `./build.sh mono+libs -c Release`\r\n5. Run `./dotnet.sh build /t:Test -c Release src/libraries/System.Runtime.InteropServices/tests/DllImportGenerator.Tests/DllImportGenerator.Tests.csproj`\r\n\r\nThat should show you the failures, as well as give you repro instructions to directly run the test process without the `dotnet test` layer in the middle using the XUnit console runner.",
                                           "updatedAt":  "2021-10-07T20:48:27Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc436wvH",
                                           "createdAt":  "2021-10-07T20:58:35Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHOB9deVA==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "jkoritzinsky",
                                                                               "createdAt":  "2021-10-07T21:06:13Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "@jkoritzinsky thanks I\u0027ll take a look.\r\n\r\nBest guess so far is that `ComponentActivator.InternalGetFunctionPointer` isn\u0027t doing the right thing on Mono - either wrapping a managed method too many times or not enough times.  I suspect we\u0027re missing a check for `UnmanagedCallersOnly` somewhere on the native side in mono for `methodInfo.MethodHandle.GetFunctionPointer()`.  Probably won\u0027t be a difficult fix once I find where the problem is.",
                                           "updatedAt":  "2021-10-07T20:58:35Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43-NWq",
                                           "createdAt":  "2021-10-08T19:02:10Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "Yea so it\u0027s failing in the call to `Interop.Sys.Malloc` in methods like\r\n\r\n```csharp\r\n        [UnmanagedCallersOnly(EntryPoint = \"hresult_out_ushort_string\")]\r\n        public static int ReturnAsOutString(int hr, ushort** ret)\r\n        {\r\n            string str = hr.ToString();\r\n            *ret = (ushort*)Marshal.StringToCoTaskMemUni(str);     /// this is Interop.Sys.Malloc\r\n            return hr;\r\n        }\r\n```\r\n\r\nbecause evidently we\u0027re already in GC Safe mode.  Which presumably means we got a function pointer to the managed method (`ReturnAsOutString`) instead of a n2m wrapper.\r\n\r\n---\r\n\r\nSeparately the interpreter has some warnings about mismatching stack types\r\n```\r\nFunctionPointerTests.InvokedAfterGC: Store local stack type mismatch 1 7\r\n```\r\n\r\nbut I can\u0027t tell yet if that\u0027s related to any failure or if it\u0027s benign.",
                                           "updatedAt":  "2021-10-08T19:02:10Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43-QXt",
                                           "createdAt":  "2021-10-08T19:24:12Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  " ```\r\n ~/work/dotnet-runtime/runtime/artifacts/bin/DllImportGenerator.Tests/net7.0-Release ~/work/dotnet-runtime/runtime/src/libraries/System.Runtime.InteropServices/tests/DllImportGenerator.Tests\r\n    Discovering: DllImportGenerator.Tests (method display = ClassAndMethod, method display options = None)\r\n    Discovered:  DllImportGenerator.Tests (found 94 test cases)\r\n    Starting:    DllImportGenerator.Tests (parallel test collections = on, max threads = 12)\r\n    Finished:    DllImportGenerator.Tests\r\n  === TEST EXECUTION SUMMARY ===\r\n     DllImportGenerator.Tests  Total: 206, Errors: 0, Failed: 0, Skipped: 0, Time: 0.264s\r\n  ~/work/dotnet-runtime/runtime/src/libraries/System.Runtime.InteropServices/tests/DllImportGenerator.Tests\r\n```\r\n\r\nThat\u0027s with the JIT (and presumably AOT will be ok, too, given the issue).  But the interpreter is **very** unhappy.\r\n```\r\nAn error has occured in the native fault reporting. Some diagnostic information will be unavailable.\r\n```",
                                           "updatedAt":  "2021-10-08T19:24:12Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43-ZAA",
                                           "createdAt":  "2021-10-08T20:36:49Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "Ah ok, in the interpreter, `RuntimeMethodHandle.GetFunctionPointer(IntPtr)` is an intrinsic that translates to `MINT_LDFTN_DYNAMIC` which doesn\u0027t have a special case for `UnmanagedCallersOnly` methods.  So it returns a pointer to an `imethod_to_ftnptr` (either an `InterpMethod*` or a `MonoFtnDesc*`), not an interp entry point.",
                                           "updatedAt":  "2021-10-08T20:36:49Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc43-ar6",
                                           "createdAt":  "2021-10-08T20:51:52Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHOB9pCMg==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "HOORAY",
                                                                               "user":  "jkoritzinsky",
                                                                               "createdAt":  "2021-10-08T21:38:56Z"
                                                                           },
                                                                           {
                                                                               "content":  "HOORAY",
                                                                               "user":  "am11",
                                                                               "createdAt":  "2021-10-09T09:53:52Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  2
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "With #60200, the DllImportGenerator.Tests suite passes for me on desktop (macOS) MonoVM with both the JIT or the interpreter.",
                                           "updatedAt":  "2021-10-08T20:51:52Z"
                                       }
                                   ],
                         "totalCount":  24
                     },
        "title":  "Mono does not implement coreclr_create_delegate hosting API or ComponentActivator",
        "labels":  [
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/60271",
        "createdAt":  "2021-10-11T22:22:25Z",
        "number":  60271,
        "author":  "jkoritzinsky",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-08-19T15:46:08Z",
        "body":  "This causes the DllImportGenerator.IntegrationTests.SetLastErrorTests.ClearPreviousError test to fail intermittently when run on Mono (this hit on CI, but did not hit in local testing).\r\n\r\nRelated to #51600 and #59721",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOSFB8ZA==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc44Kwn0",
                                           "createdAt":  "2021-10-13T14:07:56Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "Not super clear where we pollute errno.  Perhaps here https://github.com/dotnet/runtime/blob/5829730d1671cd96e9997292b5059b122c35c67d/src/mono/mono/metadata/marshal-ilgen.c#L6399-L6403  ",
                                           "updatedAt":  "2021-10-13T14:07:56Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5IUHxk",
                                           "createdAt":  "2022-08-12T15:28:10Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "@BrzVlad - assigning to you, possibly might be fixed by your ongoing changes in interop area. Moving to 8.0.0 too.",
                                           "updatedAt":  "2022-08-12T15:28:10Z"
                                       }
                                   ],
                         "totalCount":  2
                     },
        "title":  "Mono leaks native errno value during UnmanagedCallersOnly prolog/epilog",
        "labels":  [
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/61685",
        "createdAt":  "2021-11-16T19:21:56Z",
        "number":  61685,
        "author":  "lambdageek",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-08-19T15:46:08Z",
        "body":  "The [`DisableRuntimeMarshallingAttribute`](https://github.com/dotnet/runtime/issues/60639) is added to a module to indicate that it should:\r\n* Consider all unmanaged types as blittable\r\n* Promise that the current assembly does not need the default runtime marshaling behavior (that is responsible for converting strings between encodings, supporting SafeHandle, etc, etc).  The idea is that a DllImportGenerator is used to generate those kinds of wrappers, and the runtime is only responsible for dealing with primitive types.\r\n\r\nFor mono that means:\r\n- [x] Support treating all unmanaged types as blittable if the attribute is present on a module https://github.com/dotnet/runtime/pull/63320\r\n- [x] Move the legacy marshalling support code into a mono component https://github.com/dotnet/runtime/pull/71203\r\n  - Marshalling code has been refactored into marshal-lightweight (which must remain in the runtime) and marshal-ilgen (which has been moved to a component).\r\n- [x] Enable tooling to drop the component (WASM)\r\n- [x] Enable tooling to drop the component (iOS)\r\n- [ ] Enable tooling to drop the component (Android)\r\n\r\nWe can drop the component if every single assembly meets one of these criteria:\r\n     *  Is also tagged with the `DisableRuntimeMarshalingAttribute`.  \r\n     * Uses only PInvokes with blitable types\r\n\r\nTooling consists of the `RuntimeMarhsalingScannner` which scans assemblies for these criteria. \r\n\r\nThe user sets `RuntimeMarshaling` to one of three values: `Auto`, `Disable`, and `Enable`. `Auto` uses the `RuntimeMarshalingScanner` to scan all assemblies, and drops the component if all assemblies meet the criteria. `Disable` forces disabling of runtime marshaling, and the SDK will emit warnings for incompatible assemblies. `Enable` preserves runtime marshaling, regardless of the results of the `RuntimeMarshalingScanner`.\r\n\r\n\r\nImplementation plan:\r\n\r\n- First pass implements the scanner, but this can only implement warnings on an assembly eevel\r\n- Platform order: wasm, iOS, android\r\n- Second version uses source analyzer for better errors.",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOZ-c-1g==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc49gXJX",
                                           "createdAt":  "2022-02-07T20:33:05Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "We should also take advantage of the `DISABLE_NONBLITTABLE` work that was done as part of https://github.com/dotnet/runtime/pull/46444 albeit using mono runtime components instead of ifdefs",
                                           "updatedAt":  "2022-02-07T20:33:05Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5IPU_3",
                                           "createdAt":  "2022-08-11T13:17:54Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SamMonoRT",
                                           "body":  "moving the tracking issue to 8.0.0  -- Based on the design and complexity of actually moving/dropping components and respective size savings we will consider backporting fixes.",
                                           "updatedAt":  "2022-08-11T13:17:54Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5hYoTw",
                                           "createdAt":  "2023-07-13T09:00:51Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jandupej",
                                           "body":  "Moving the entire issue to net9.0. Created a separate issue for the iOS implementation, which should be included in net8.0",
                                           "updatedAt":  "2023-07-13T09:00:51Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5n4sx2",
                                           "createdAt":  "2023-10-02T12:22:19Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jandupej",
                                           "body":  "@simonrozsival @lambdageek Are we ready for implementing this also on Android? cc: @SamMonoRT ",
                                           "updatedAt":  "2023-10-02T12:22:19Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5n5z7W",
                                           "createdAt":  "2023-10-02T15:13:57Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "\u003e @simonrozsival @lambdageek Are we ready for implementing this also on Android? cc: @SamMonoRT\r\n\r\nI think we should check what is the state of android bindings, if they use `LibraryImport` (or possibly `DllImport` with only blittlable arguments) extensively enough that doing the work is profitable.\r\n\r\nAndroid is also a pretty dynamic environment, do we know they don\u0027t generate non-blittable pinvokes at runtime?",
                                           "updatedAt":  "2023-10-02T15:14:09Z"
                                       }
                                   ],
                         "totalCount":  5
                     },
        "title":  "[Mono] Add support for DisableRuntimeMarshallingAttribute",
        "labels":  [
                       "tracking",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/64127",
        "createdAt":  "2022-01-21T23:09:34Z",
        "number":  64127,
        "author":  "radical",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-04-26T04:06:56Z",
        "body":  "[wasm] New interop `DisabledRuntimeMarshalling*` tests failing\r\n\r\n[Build](https://dev.azure.com/dnceng/public/_build/results?buildId=1565521\u0026view=logs\u0026jobId=190ad6c8-5950-568c-cadd-f2dfb7d5a79f\u0026j=190ad6c8-5950-568c-cadd-f2dfb7d5a79f\u0026t=c0f6fdc1-ac5d-583c-8ae1-a18de0846552), and [Log](https://helixre8s23ayyeko0k025g8.blob.core.windows.net/dotnet-runtime-refs-pull-64109-merge-1850cf60227a479486/Interop/1/console.70960392.log?sv=2019-07-07\u0026se=2022-02-10T21%3A18%3A38Z\u0026sr=c\u0026sp=rl\u0026sig=NS951kHrX8XCHaaF3K64ArmrFR5s0EWf%2FGpavAE3YzA%3D):\r\n\r\n```\r\nInterop/DisabledRuntimeMarshalling/DisabledRuntimeMarshalling_NativeAssemblyDisabled/DisabledRuntimeMarshalling_NativeAssemblyDisabled.sh \r\n...\r\n      System.DllNotFoundException: DisabledRuntimeMarshallingNative\r\n         at DisabledRuntimeMarshalling.PInvokeAssemblyMarshallingDisabled.DelegatesFromExternalAssembly.StructWithDefaultNonBlittableFields_DoesNotMarshal()\r\n         at Program.\u003cMain\u003e$(String[] args)\r\n      Expected: 100\r\n      Actual: 101\r\n...\r\n```\r\n\r\n```\r\nDisabledRuntimeMarshalling_Disabled_NativeTypeInAssembly/DisabledRuntimeMarshalling_Disabled_NativeTypeInAssembly.sh\r\nDisabledRuntimeMarshalling_Disabled_NativeTypeInAssembly_ro/DisabledRuntimeMarshalling_Disabled_NativeTypeInAssembly_ro.sh [FAIL]\r\nDisabledRuntimeMarshalling_Disabled_NativeAssemblyEnabled/DisabledRuntimeMarshalling_Disabled_NativeAssemblyEnabled.sh\r\nDisabledRuntimeMarshalling_Disabled_NativeAssemblyDisabled/DisabledRuntimeMarshalling_Disabled_NativeAssemblyDisabled.sh\r\n```\r\n\r\nThe test was added in https://github.com/dotnet/runtime/pull/63320 ",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOdKB2GA==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc48u6V4",
                                           "createdAt":  "2022-01-21T23:09:46Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Tagging subscribers to \u0027arch-wasm\u0027: @lewing\nSee info in area-owners.md if you want to be subscribed.\n\u003cdetails\u003e\n\u003csummary\u003eIssue Details\u003c/summary\u003e\n\u003chr /\u003e\n\n[Build](https://dev.azure.com/dnceng/public/_build/results?buildId=1565521\u0026view=logs\u0026jobId=190ad6c8-5950-568c-cadd-f2dfb7d5a79f\u0026j=190ad6c8-5950-568c-cadd-f2dfb7d5a79f\u0026t=c0f6fdc1-ac5d-583c-8ae1-a18de0846552), and [Log](https://helixre8s23ayyeko0k025g8.blob.core.windows.net/dotnet-runtime-refs-pull-64109-merge-1850cf60227a479486/Interop/1/console.70960392.log?sv=2019-07-07\u0026se=2022-02-10T21%3A18%3A38Z\u0026sr=c\u0026sp=rl\u0026sig=NS951kHrX8XCHaaF3K64ArmrFR5s0EWf%2FGpavAE3YzA%3D):\r\n\r\n```\r\n...\r\n      System.DllNotFoundException: DisabledRuntimeMarshallingNative\r\n         at DisabledRuntimeMarshalling.PInvokeAssemblyMarshallingDisabled.DelegatesFromExternalAssembly.StructWithDefaultNonBlittableFields_DoesNotMarshal()\r\n         at Program.\u003cMain\u003e$(String[] args)\r\n      Expected: 100\r\n      Actual: 101\r\n...\r\n```\r\n\r\nThe test was added in https://github.com/dotnet/runtime/pull/63320 \n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAuthor:\u003c/th\u003e\n    \u003ctd\u003eradical\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAssignees:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eLabels:\u003c/th\u003e\n    \u003ctd\u003e\n\n`arch-wasm`, `blocking-clean-ci`\n\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eMilestone:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\u003c/details\u003e",
                                           "updatedAt":  "2022-01-21T23:09:46Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc48wfLW",
                                           "createdAt":  "2022-01-22T19:26:33Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkoritzinsky",
                                           "body":  "This test fails for the same reason on Wasm as many of the other interop tests: We don’t have the test build configured to support native library building or references for any of the “mobile” platforms or wasm.",
                                           "updatedAt":  "2022-01-22T19:26:33Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5B-rCP",
                                           "createdAt":  "2022-04-22T22:27:11Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "danmoseley",
                                           "body":  "test was disabled, so removing \u0027blocking-clean-ci\u0027",
                                           "updatedAt":  "2022-04-22T22:27:11Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5D1Py5",
                                           "createdAt":  "2022-05-26T01:06:13Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "radical",
                                           "body":  "update: I got the native code to compile for the runtime tests. Now, these need to be linked in to each of the test assemblies, which will need relinking dotnet.wasm, adding to the build time.",
                                           "updatedAt":  "2022-05-26T01:06:13Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5D1b0-",
                                           "createdAt":  "2022-05-26T02:34:21Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "radical",
                                           "body":  "I\u0027m able to relink now, with some changes to WasmTestRunner.proj, which fails with:\r\n\r\n```\r\n/workspaces/runtime/artifacts/tests/coreclr/Browser.wasm.Release/Tests/Core_Root/build/WasmApp.Native.targets(286,5):\r\nerror : Parameter types of pinvoke callback method \u0027System.Boolean CheckStructWithShortAndBoolManaged(DisabledRuntimeMarshallingNative+StructWithShortAndBool, System.Int16, System.Boolean)\u0027 needs to be blittable. \r\n[/workspaces/runtime/artifacts/tests/coreclr/Browser.wasm.Release/Tests/Core_Root/wasm-test-runner/WasmTestRunner.proj]\r\n```",
                                           "updatedAt":  "2022-05-26T02:34:21Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5hU9lI",
                                           "createdAt":  "2023-07-12T16:52:11Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "@radical what is the status of this one?",
                                           "updatedAt":  "2023-07-12T16:52:11Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5iY-f0",
                                           "createdAt":  "2023-07-25T23:47:16Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "radical",
                                           "body":  "\u003e @radical what is the status of this one?\r\n\r\nThis is incomplete, and won\u0027t be finished for 8.0 .",
                                           "updatedAt":  "2023-07-25T23:47:16Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5lUb5Z",
                                           "createdAt":  "2023-08-30T21:17:46Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHODFUFOA==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "radical",
                                                                               "createdAt":  "2023-08-30T21:25:30Z"
                                                                           },
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "lambdageek",
                                                                               "createdAt":  "2023-08-30T21:31:19Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  2
                                                         },
                                           "author":  "fanyang-mono",
                                           "body":  "This prevented a newly added test for nested struct with PInvoke from running with wasm. Furthermore, this issue appears to extend to all PInvoke tests on the WASM platform, serving as a significant obstacle in the comprehensive testing of PInvoke functionality for WASM.",
                                           "updatedAt":  "2023-08-30T21:17:46Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc50lVFk",
                                           "createdAt":  "2024-02-21T05:51:21Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "@jeffschwMSFT @steveisok thoughts on where this should land?",
                                           "updatedAt":  "2024-02-21T05:51:21Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc50oHYY",
                                           "createdAt":  "2024-02-21T13:38:38Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "steveisok",
                                           "body":  "\u003e @jeffschwMSFT @steveisok thoughts on where this should land?\n\nOn balance, I think it should stay on your team. My reasoning is that the test infra is so specialized, you\u0027ll have to be involved regardless. ",
                                           "updatedAt":  "2024-02-21T13:38:38Z"
                                       }
                                   ],
                         "totalCount":  10
                     },
        "title":  "[wasm] Missing support for building native libraries as part of tests",
        "labels":  [
                       "arch-wasm",
                       "disabled-test",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/66194",
        "createdAt":  "2022-03-04T13:52:36Z",
        "number":  66194,
        "author":  "lambdageek",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  "Y3Vyc29yOnYyOpHOCqR6RQ==",
                          "nodes":  [
                                        {
                                            "content":  "THUMBS_UP",
                                            "user":  "vslee",
                                            "createdAt":  "2022-08-25T00:39:57Z"
                                        }
                                    ],
                          "totalCount":  1
                      },
        "updatedAt":  "2022-03-04T13:52:58Z",
        "body":  "As followup to https://github.com/dotnet/runtime/issues/64456 we\u0027re now in a position where it should be possible to take the tests in https://github.com/Unity-Technologies/runtime/pull/4 and use them from the runtime tests infrastructure in `src/tests/Interop/MonoAPI` with minimal changes.\r\n",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOPyHPUw==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc4_Ic9T",
                                           "createdAt":  "2022-03-04T13:52:39Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "I couldn\u0027t figure out the best area label to add to this issue. If you have write-permissions please help me learn by adding exactly one [area label](https://github.com/dotnet/runtime/blob/master/docs/area-owners.md).",
                                           "updatedAt":  "2022-03-04T13:52:39Z"
                                       }
                                   ],
                         "totalCount":  1
                     },
        "title":  "Port Unity\u0027s Mono embedding API tests to src/tests/Interop/MonoAPI",
        "labels":  [
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/67047",
        "createdAt":  "2022-03-23T15:51:28Z",
        "number":  67047,
        "author":  "lateralusX",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2022-06-01T10:27:25Z",
        "body":  "### Description\n\nNewly added MonoAPI runtime tests doesn\u0027t work on Mono Windows and needs to be implemented.\n\n### Reproduction Steps\n\nBuild and run individual runtime test on Windows Mono as described here, https://github.com/dotnet/runtime/blob/main/docs/workflow/testing/mono/testing.md\n\n### Expected behavior\n\nFollowing tests should pass:\r\n\r\nInterop/MonoAPI/MonoMono/PInvokeDetach\r\nInterop/MonoAPI/MonoMono/Thunks\r\nInterop/MonoAPI/MonoMono/InstallEHCallback\n\n### Actual behavior\n\nFollowing tests fails and have been disabled due to this issue:\r\n\r\nInterop/MonoAPI/MonoMono/PInvokeDetach\r\nInterop/MonoAPI/MonoMono/Thunks\r\nInterop/MonoAPI/MonoMono/InstallEHCallback\n\n### Regression?\n\nNo, this has never worked on Mono Windows.\n\n### Known Workarounds\n\n_No response_\n\n### Configuration\n\n_No response_\n\n### Other information\n\n_No response_",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  null,
                         "nodes":  [

                                   ],
                         "totalCount":  0
                     },
        "title":  "[Mono]: Interop/MonoAPI/MonoMono PInvokeDetach+Thunks+InstallEHCallback fails on Mono Windows.",
        "labels":  [
                       "os-windows",
                       "runtime-mono",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/69205",
        "createdAt":  "2022-05-11T20:06:39Z",
        "number":  69205,
        "author":  "radekdoulik",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-04-29T15:41:27Z",
        "body":  "3.1.9 changed how parameter is passed to ftruncate64 syscall, instead of 2 integers it uses double (performance improvement?). https://github.com/emscripten-core/emscripten/commit/401e698e06a8c1c574074c223b05295bff969140#diff-217fe089a83fef74f6896c463a9f75ace675a7ad90364f0dde18050892840108L727-R718 this leads to few failing tests on wasm.\r\n\r\nmeanwhile emscripten changed the it again to use 53bit integer https://github.com/emscripten-core/emscripten/commit/510ef7552403ce7b72008e4f6dfde3757d40adeb, it will be available in the following emscripten versions (3.1.11)",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOYSU8eg==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc5DAogr",
                                           "createdAt":  "2022-05-11T20:06:42Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Tagging subscribers to \u0027arch-wasm\u0027: @lewing\nSee info in area-owners.md if you want to be subscribed.\n\u003cdetails\u003e\n\u003csummary\u003eIssue Details\u003c/summary\u003e\n\u003chr /\u003e\n\n3.1.9 changed how parameter is passed to ftruncate64 syscall, instead of 2 integers it uses double (performance improvement?). https://github.com/emscripten-core/emscripten/commit/401e698e06a8c1c574074c223b05295bff969140#diff-217fe089a83fef74f6896c463a9f75ace675a7ad90364f0dde18050892840108L727-R718 this leads to few failing tests on wasm.\r\n\r\nmeanwhile emscripten changed the it again to use 53bit integer https://github.com/emscripten-core/emscripten/commit/510ef7552403ce7b72008e4f6dfde3757d40adeb, it will be available in the following emscripten versions (3.1.11)\n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAuthor:\u003c/th\u003e\n    \u003ctd\u003eradekdoulik\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAssignees:\u003c/th\u003e\n    \u003ctd\u003eradekdoulik\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eLabels:\u003c/th\u003e\n    \u003ctd\u003e\n\n`arch-wasm`, `area-Interop-mono`\n\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eMilestone:\u003c/th\u003e\n    \u003ctd\u003e7.0.0\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\u003c/details\u003e",
                                           "updatedAt":  "2022-05-11T20:06:42Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5hJTx6",
                                           "createdAt":  "2023-07-10T22:45:37Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "ping @radekdoulik ",
                                           "updatedAt":  "2023-07-10T22:45:37Z"
                                       }
                                   ],
                         "totalCount":  2
                     },
        "title":  "[wasm] emscripten 3.1.9 ftruncate64 syscall regression",
        "labels":  [
                       "arch-wasm",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/69531",
        "createdAt":  "2022-05-19T00:50:47Z",
        "number":  69531,
        "author":  "tannergooding",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-08-06T10:54:51Z",
        "body":  "https://github.com/dotnet/runtime/pull/69204 introduced the `Int128` and `UInt128` types and included interop tests validating they are passed correctly to/from native.\r\n\r\nHowever, they are currently disabled for Mono as are a large number of the `Interop/PInvoke/*` tests. These tests need to be enabled for Mono to ensure that these types work correctly in Interop scenarios.\r\n\r\nThe other `Interop/PInvoke/*` tests should likely be looked at as well since a majority of them currently appear to be disabled. See https://github.com/dotnet/runtime/blob/main/src/tests/issues.targets#L1716-L1772 under https://github.com/dotnet/runtime/blob/main/src/tests/issues.targets#L1446-L1447",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHORx5d9g==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc5DZ8db",
                                           "createdAt":  "2022-05-19T00:50:49Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "I couldn\u0027t figure out the best area label to add to this issue. If you have write-permissions please help me learn by adding exactly one [area label](https://github.com/dotnet/runtime/blob/master/docs/area-owners.md).",
                                           "updatedAt":  "2022-05-19T00:50:49Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5DZ9IY",
                                           "createdAt":  "2022-05-19T00:52:39Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "tannergooding",
                                           "body":  "The android tests in particular were failing because they can\u0027t find the corresponding native library: `System.DllNotFoundException: Int128Native`.\r\n\r\nThe iOS and tvOS tests didn\u0027t run as the jobs hit other more general issues, such as timeouts at 240 minutes.",
                                           "updatedAt":  "2022-05-19T00:52:39Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5HHjRO",
                                           "createdAt":  "2022-07-23T17:40:13Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "BrzVlad",
                                           "body":  "@tannergooding do you remember if this issue is caused by https://github.com/dotnet/runtime/issues/69399",
                                           "updatedAt":  "2022-07-23T17:40:13Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5HHl32",
                                           "createdAt":  "2022-07-23T18:55:22Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "tannergooding",
                                           "body":  "That\u0027s the main issue AFAIK, but there may be other issues.\r\n\r\n`Int128`/`UInt128` in particular are the \"ABI primitive\" types and so they may need special handling in the LLVM/Mono backend (same goes for `Vector64/128/256\u003cT\u003e`).",
                                           "updatedAt":  "2022-07-23T18:55:22Z"
                                       }
                                   ],
                         "totalCount":  4
                     },
        "title":  "Enable Int128/UInt128 interop tests for Mono",
        "labels":  [
                       "disabled-test",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/79706",
        "createdAt":  "2022-12-15T15:34:22Z",
        "number":  79706,
        "author":  "akravch",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  "Y3Vyc29yOnYyOpHOCuc1_g==",
                          "nodes":  [
                                        {
                                            "content":  "THUMBS_UP",
                                            "user":  "roygoode",
                                            "createdAt":  "2023-02-17T09:56:12Z"
                                        }
                                    ],
                          "totalCount":  1
                      },
        "updatedAt":  "2024-05-28T17:42:58Z",
        "body":  "# TLDR\r\nIs there any API in Android/iOS .NET 6/7 apps to replace Mono.Runtime.RemoveSignalHandlers/InstallSignalHandlers which are unavailable now?\r\n\r\n# Motivation\r\n\r\nWe have Xamarin.Android and Xamarin.iOS apps that can catch and report native crashes by installing their own signal handlers like this:\r\n\r\n```c#\r\nMono.Runtime.RemoveSignalHandlers();\r\n\r\ntry\r\n{\r\n    NativeCrashListener.Initialize();\r\n}\r\nfinally\r\n{\r\n    Mono.Runtime.InstallSignalHandlers();\r\n}\r\n```\r\n\r\nMigrating from Xamarin to .NET 6 I noticed that the `Mono.Runtime` type is not accessible any more, even though the Mono runtime is still there for Android and iOS, so obviously, you can\u0027t remove and install the handlers like this.\r\n\r\nMono [suggests](https://www.mono-project.com/docs/advanced/signals/) the following alternative:\r\n\r\n```c#\r\nIntPtr sigbus = Marshal.AllocHGlobal (512);\r\nIntPtr sigsegv = Marshal.AllocHGlobal (512);\r\n\r\n// Store Mono\u0027s SIGSEGV and SIGBUS handlers\r\nsigaction (Signal.SIGBUS, IntPtr.Zero, sigbus);\r\nsigaction (Signal.SIGSEGV, IntPtr.Zero, sigsegv);\r\n\r\n// Enable crash reporting libraries\r\nEnableCrashReporting ();\r\n\r\n// Restore Mono SIGSEGV and SIGBUS handlers\r\nsigaction (Signal.SIGBUS, sigbus, IntPtr.Zero);\r\nsigaction (Signal.SIGSEGV, sigsegv, IntPtr.Zero);\r\n\r\nMarshal.FreeHGlobal (sigbus);\r\nMarshal.FreeHGlobal (sigsegv);\r\n```\r\n\r\nWe tried both the way Mono recommends and getting rid of the remove/install code at all on our Xamarin apps to see if it makes a difference. Turns out that it does, and the number of crashes that we get significantly differs in both cases. It is hard to say which way is more correct though, since you can only see the difference on big numbers, but in any case the behavior is not the same.\r\n\r\nI would still want to apply something similar to the .NET 6 apps, and I wonder whether there is an alternative API I didn\u0027t find. I know that there is some API to work with POSIX signals now in .NET 6, so maybe I\u0027m just missing something.\r\n\r\nSo is there a way to achieve something like that in .NET 6+ apps or any plans to add a new API to support this?",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOf02iqw==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc5QqWRQ",
                                           "createdAt":  "2022-12-15T15:34:30Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Tagging subscribers to this area: @dotnet/interop-contrib\nSee info in [area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md) if you want to be subscribed.\n\u003cdetails\u003e\n\u003csummary\u003eIssue Details\u003c/summary\u003e\n\u003chr /\u003e\n\n# TLDR\r\nIs there any API in Android/iOS .NET 6/7 apps to replace Mono.Runtime.RemoveSignalHandlers/InstallSignalHandlers which are unavailable now?\r\n\r\n# Motivation\r\n\r\nWe have Xamarin.Android and Xamarin.iOS apps that can catch and report native crashes by installing their own signal handlers like this:\r\n\r\n```c#\r\nMono.Runtime.RemoveSignalHandlers();\r\n\r\ntry\r\n{\r\n    NativeCrashListener.Initialize();\r\n}\r\nfinally\r\n{\r\n    Mono.Runtime.InstallSignalHandlers();\r\n}\r\n```\r\n\r\nMigrating from Xamarin to .NET 6 I noticed that the `Mono.Runtime` type is not accessible any more, even though the Mono runtime is still there for Android and iOS, so obviously, you can\u0027t remove and install the handlers like this.\r\n\r\nMono [suggests](https://www.mono-project.com/docs/advanced/signals/) the following alternative:\r\n\r\n```c#\r\nIntPtr sigbus = Marshal.AllocHGlobal (512);\r\nIntPtr sigsegv = Marshal.AllocHGlobal (512);\r\n\r\n// Store Mono\u0027s SIGSEGV and SIGBUS handlers\r\nsigaction (Signal.SIGBUS, IntPtr.Zero, sigbus);\r\nsigaction (Signal.SIGSEGV, IntPtr.Zero, sigsegv);\r\n\r\n// Enable crash reporting libraries\r\nEnableCrashReporting ();\r\n\r\n// Restore Mono SIGSEGV and SIGBUS handlers\r\nsigaction (Signal.SIGBUS, sigbus, IntPtr.Zero);\r\nsigaction (Signal.SIGSEGV, sigsegv, IntPtr.Zero);\r\n\r\nMarshal.FreeHGlobal (sigbus);\r\nMarshal.FreeHGlobal (sigsegv);\r\n```\r\n\r\nWe tried both the way Mono recommends and getting rid of the remove/install code at all on our Xamarin apps to see if it makes a difference. Turns out that it does, and the number of crashes that we get significantly differs in both cases. It is hard to say which way is more correct though, since you can only see the difference on big numbers, but in any case the behavior is not the same.\r\n\r\nI would still want to apply something similar to the .NET 6 apps, and I wonder whether there is an alternative API I didn\u0027t find. I know that there is some API to work with POSIX signals now in .NET 6, so maybe I\u0027m just missing something.\r\n\r\nSo is there a way to achieve something like that in .NET 6+ apps or any plans to add a new API to support this?\n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAuthor:\u003c/th\u003e\n    \u003ctd\u003eakravch\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAssignees:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eLabels:\u003c/th\u003e\n    \u003ctd\u003e\n\n`area-System.Runtime.InteropServices`\n\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eMilestone:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\u003c/details\u003e",
                                           "updatedAt":  "2022-12-15T15:34:30Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5R50QL",
                                           "createdAt":  "2023-01-06T20:43:34Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "cc @rolfbjarne @jonpryor @jonathanpeppers  do we have any guidance for .NET 6/7 customers who want to use a third party crash reporting library on mobile?\r\n\r\nWe don\u0027t seem to support `PosixSignalRegistration` on mobile (it throws PNSE) but maybe we should? Although it wouldn\u0027t solve the issue with null reference exceptions.\r\n\r\nThe problem that `Mono.Runtime.RemoveSignalHandlers`/`Mono.Runtime.InstallSignalHandlers` were meant to solve is that normally we want the runtime to handle `SIGBUS`/`SIGSEGV` first (to handle null managed pointer derefs and convert them to `NullReferenceException`s).  Mono\u0027s normal signal handler first checks the faulting page and if it is in the managed heap it will create the NRE otherwise it will chain to the signal handler that was registered at runtime startup (normally the system default handler, but in embedders it could be something else).\r\n\r\nIn order to install a custom crash handler, however, the user code would want to insert itself _after_ mono\u0027s default handler.  (ie: `PosixSignalRegistration.Create (SIGSEGV, ...)` would create a chain like this:  `UserHandler -\u003e MonoHandler -\u003e SystemDefault`, but we would like this: `MonoHandler -\u003e UserHandler -\u003e SystemDefault`).  I don\u0027t see a way to achieve that with `PosixSignalRegistration`.\r\n\r\n",
                                           "updatedAt":  "2023-01-06T20:43:34Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5R50ch",
                                           "createdAt":  "2023-01-06T20:44:28Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Tagging subscribers to \u0027os-ios\u0027: @steveisok, @akoeplinger\nSee info in area-owners.md if you want to be subscribed.\n\u003cdetails\u003e\n\u003csummary\u003eIssue Details\u003c/summary\u003e\n\u003chr /\u003e\n\n# TLDR\r\nIs there any API in Android/iOS .NET 6/7 apps to replace Mono.Runtime.RemoveSignalHandlers/InstallSignalHandlers which are unavailable now?\r\n\r\n# Motivation\r\n\r\nWe have Xamarin.Android and Xamarin.iOS apps that can catch and report native crashes by installing their own signal handlers like this:\r\n\r\n```c#\r\nMono.Runtime.RemoveSignalHandlers();\r\n\r\ntry\r\n{\r\n    NativeCrashListener.Initialize();\r\n}\r\nfinally\r\n{\r\n    Mono.Runtime.InstallSignalHandlers();\r\n}\r\n```\r\n\r\nMigrating from Xamarin to .NET 6 I noticed that the `Mono.Runtime` type is not accessible any more, even though the Mono runtime is still there for Android and iOS, so obviously, you can\u0027t remove and install the handlers like this.\r\n\r\nMono [suggests](https://www.mono-project.com/docs/advanced/signals/) the following alternative:\r\n\r\n```c#\r\nIntPtr sigbus = Marshal.AllocHGlobal (512);\r\nIntPtr sigsegv = Marshal.AllocHGlobal (512);\r\n\r\n// Store Mono\u0027s SIGSEGV and SIGBUS handlers\r\nsigaction (Signal.SIGBUS, IntPtr.Zero, sigbus);\r\nsigaction (Signal.SIGSEGV, IntPtr.Zero, sigsegv);\r\n\r\n// Enable crash reporting libraries\r\nEnableCrashReporting ();\r\n\r\n// Restore Mono SIGSEGV and SIGBUS handlers\r\nsigaction (Signal.SIGBUS, sigbus, IntPtr.Zero);\r\nsigaction (Signal.SIGSEGV, sigsegv, IntPtr.Zero);\r\n\r\nMarshal.FreeHGlobal (sigbus);\r\nMarshal.FreeHGlobal (sigsegv);\r\n```\r\n\r\nWe tried both the way Mono recommends and getting rid of the remove/install code at all on our Xamarin apps to see if it makes a difference. Turns out that it does, and the number of crashes that we get significantly differs in both cases. It is hard to say which way is more correct though, since you can only see the difference on big numbers, but in any case the behavior is not the same.\r\n\r\nI would still want to apply something similar to the .NET 6 apps, and I wonder whether there is an alternative API I didn\u0027t find. I know that there is some API to work with POSIX signals now in .NET 6, so maybe I\u0027m just missing something.\r\n\r\nSo is there a way to achieve something like that in .NET 6+ apps or any plans to add a new API to support this?\n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAuthor:\u003c/th\u003e\n    \u003ctd\u003eakravch\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAssignees:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eLabels:\u003c/th\u003e\n    \u003ctd\u003e\n\n`os-android`, `os-ios`, `area-Interop-mono`\n\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eMilestone:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\u003c/details\u003e",
                                           "updatedAt":  "2023-01-06T20:44:28Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5R6XBC",
                                           "createdAt":  "2023-01-06T23:29:08Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jonathanpeppers",
                                           "body":  "What would a coreclr console app do on Linux, for example? `AppDomain.CurrentDomain.UnhandledException` is for managed-land, is there an equivalent for native crashes?",
                                           "updatedAt":  "2023-01-06T23:29:08Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5R6oTx",
                                           "createdAt":  "2023-01-07T01:04:10Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkotas",
                                           "body":  "\u003e What would a coreclr console app do on Linux, for example?\r\n\r\nPreload the native crash reporting library using `LD_PRELOAD`.",
                                           "updatedAt":  "2023-01-07T01:04:10Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5R-VtK",
                                           "createdAt":  "2023-01-09T09:04:59Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "rolfbjarne",
                                           "body":  "\u003e \u003e What would a coreclr console app do on Linux, for example?\r\n\u003e \r\n\u003e Preload the native crash reporting library using `LD_PRELOAD`.\r\n\r\nThat\u0027s not an option on iOS :/\r\n\r\nA library initializer in a static library might work:\r\n\r\n```c\r\nvoid initialize_crash_reporting () __attribute__ ((constructor));\r\nvoid initialize_crash_reporting ()\r\n{\r\n    // initialize...\r\n}\r\n```\r\n\r\nwhich is a rather steep hill for app developers (since they\u0027d likely be the ones who\u0027d have to write and build the initializing static library to use the actual crash reporting library).\r\n\r\n\u003e In order to install a custom crash handler, however, the user code would want to insert itself _after_ mono\u0027s default handler. (ie: `PosixSignalRegistration.Create (SIGSEGV, ...)` would create a chain like this: `UserHandler -\u003e MonoHandler -\u003e SystemDefault`, but we would like this: `MonoHandler -\u003e UserHandler -\u003e SystemDefault`). I don\u0027t see a way to achieve that with `PosixSignalRegistration`.\r\n\r\nAnother point is that `PosixSignalRegistration` only seems to allow managed callbacks. Executing managed code in a signal that causes a crash is not really a good idea at all.",
                                           "updatedAt":  "2023-01-09T09:04:59Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5SRr_6",
                                           "createdAt":  "2023-01-12T13:37:07Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "akravch",
                                           "body":  "\u003e A library initializer in a static library might work\r\n\r\nBut can we actually use static libraries in .NET for Android? I believe that was not possible with Xamarin.Android unless it\u0027s wrapped into a dynamic library, and loading a dynamic library still happens after Mono signal handlers are installed.",
                                           "updatedAt":  "2023-01-12T13:37:07Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5ccs5z",
                                           "createdAt":  "2023-05-17T09:06:44Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "akravch",
                                           "body":  "Are there any updates or ideas on this topic? It is still very relevant for me and I wouldn\u0027t even mind an ugliest workaround if it existed.",
                                           "updatedAt":  "2023-05-17T09:06:44Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5eXzBs",
                                           "createdAt":  "2023-06-08T20:31:10Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "karpikpl",
                                           "body":  "Is there a plan to include this in .Net 7/8 ?\r\n\r\nWhat are alternatives for handling process crashes in native code in .NET? If `EnableCrashReporting();` is not an option, is there a way to monitor the .Net process in some other way, produce dumps and report them?",
                                           "updatedAt":  "2023-06-08T20:31:10Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5eafdF",
                                           "createdAt":  "2023-06-09T05:36:42Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHODFPjGA==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "karpikpl",
                                                                               "createdAt":  "2023-06-09T14:14:06Z"
                                                                           },
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "akravch",
                                                                               "createdAt":  "2023-08-30T10:09:20Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  2
                                                         },
                                           "author":  "jkotas",
                                           "body":  "This is open design discussion with milestone set to Future. There is no agreed upon plan for how to resolve this issue.\r\n\r\nInstallSignalHandlers/RemoveSignalHandlers APIs are difficult to implement 100% reliably and they come with portability issues. I do not think they would be a good addition to the platform.\r\n\r\nIf the goal is to allow installation of the custom signal handlers before the runtime ones, writing a [custom runtime host](https://learn.microsoft.com/dotnet/core/tutorials/netcore-hosting) and registering the signals before the runtime starts is the way to go. This tutorial works for Windows/Linux/macOS apps that typically run on CoreCLR runtime. We do not have a tutorial like this for mobile apps (they use custom hosting) so that would be the piece to fill in.\r\n\r\nIf the goal is to get good actionable crash dumps, CoreCLR runtime comes with crash dump capabilities: https://learn.microsoft.com/dotnet/core/diagnostics/collect-dumps-crash . The built-in crash dump collector is better than the generic crash dump collectors since it understands the structure of the .NET runtime and the piece that must be saved into the crashdump. We can keep evolving this solution to meet the needs.\r\n\r\nIf the goal is to allow interception of fatal process crashes, we can consider introducing an API for it. The API would allow registering unmanaged callback. The callback would have to be implemented with signal handler style restrictions in unmanaged code. This callback would be issued for any fatal crashes that are intercepted by the .NET runtime. In addition to fatal signals, this callback would be also issued for `Environment.FailFast` and other similar situations where the runtime terminates process without giving anybody chance to intercept it today.",
                                           "updatedAt":  "2023-06-09T05:36:42Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5lQu9m",
                                           "createdAt":  "2023-08-30T10:14:16Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "akravch",
                                           "body":  "Since custom hosting and dump collection are not options for Android/iOS applications, I would love to see the signal handling API implemented.\r\nI will wait for any updates on the topic. Thank you very much!",
                                           "updatedAt":  "2023-08-30T10:14:16Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5lV6ic",
                                           "createdAt":  "2023-08-31T01:58:11Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkotas",
                                           "body":  "I assume that you are interested in 3rd point (allow interception of fatal process crashes). The managed APIs for that can look like this:\r\n\r\nThis is what the APIs can look like: \r\n```csharp\r\n// Returns a pointer to a function that can be used to check whether given instruction pointer is managed code.\r\n// The function is safe to call in signal handlers. The 3rd party crash handlers can use this function to check\r\n// whether the .NET runtime is going to handle signal at this instruction pointer.\r\npublic static delegate* unmanaged\u003cIntPtr, int\u003e GetIsManagedCode();\r\n\r\n// .NET runtime is going to call `fatalErrorHandler` set by this method before its own\r\n// fatal error handling (creating .NET runtime-specific crash dump, etc.). This can be only called once in given\r\n// process. \r\n// TODO: What should be the signature of the `fatalErrorHandler`?\r\npublic static void SetFatalErrorHandler(IntPtr fatalErrorHandler);\r\n```\r\nWould that work for you?",
                                           "updatedAt":  "2023-08-31T01:58:11Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5lWlfP",
                                           "createdAt":  "2023-08-31T06:07:22Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "rolfbjarne",
                                           "body":  "The main scenario here is to use third-party crash reporters.\r\n\r\nThen one important question comes up: do we want a solution that would require modifications to any third-party crash reporters that might want to support .NET apps, or do we want a solution that would work with any third-party crash reporters as-is?\r\n\r\nThe former Mono API (RemoveSignalHandlers/InstallSignalHandlers) is in the latter category, it just required a few lines of code by the app developer.\r\n\r\nIf we want to go with the former category, the API needs to be designed together with those third-party crash reporter vendors. It doesn\u0027t make much sense to design and implement an API that\u0027s hard/impossible for them to use.",
                                           "updatedAt":  "2023-08-31T06:07:22Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5_TaKr",
                                           "createdAt":  "2024-05-28T17:42:57Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHODj6oJQ==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "akravch",
                                                                               "createdAt":  "2024-05-29T08:00:46Z"
                                                                           },
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "yuuhhe",
                                                                               "createdAt":  "2024-05-30T07:43:45Z"
                                                                           },
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "lambdageek",
                                                                               "createdAt":  "2024-05-30T17:44:08Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  3
                                                         },
                                           "author":  "jkotas",
                                           "body":  "API proposal for customization of fatal error handling: https://github.com/dotnet/runtime/issues/101560",
                                           "updatedAt":  "2024-05-28T17:42:57Z"
                                       }
                                   ],
                         "totalCount":  14
                     },
        "title":  "[.NET 6/7] An alternative to Mono.Runtime.RemoveSignalHandlers/InstallSignalHandlers in .NET 6/7?",
        "labels":  [
                       "os-android",
                       "feature-request",
                       "os-ios",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/91388",
        "createdAt":  "2023-08-31T12:16:16Z",
        "number":  91388,
        "author":  "fanyang-mono",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2025-07-14T15:44:04Z",
        "body":  "It is likely that all interop tests are prevented from running on Android because of this issue.\r\n\r\nOne example is the newly added test: `Interop/StructMarshalling/PInvoke/NestedStruct/NestedStruct.sh`\r\n\r\nThe log:\r\n\r\n```\r\nInterop/StructMarshalling/PInvoke/NestedStruct/NestedStruct.sh [FAIL]\r\n      \r\n      Return code:      80\r\n      Raw output file:      /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct/NestedStruct.output.txt\r\n      Raw output:\r\n      BEGIN EXECUTION\r\n      [8.0.0-prerelease.23421.1+1c09ef5b669c11e1aeca92089d0c1e4408169582] XHarness command issued: android run --instrumentation=net.dot.MonoRunner --package-name=net.dot.Interop_StructMarshalling --output-directory=/datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct --arg=entrypoint:libname=NestedStruct.dll --expected-exit-code=100 -v\r\n      dbug: ADBRunner using ADB.exe supplied from /datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/tools/net7.0/any/../../../runtimes/any/native/adb/linux/adb\r\n      dbug: Full resolved path:\u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb\u0027\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb start-server\u0027\r\n      dbug: \r\n      info: Finding attached devices/emulators...\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb devices -l\u0027\r\n      dbug: Found 2 possible devices\r\n      dbug: Evaluating output line for device serial: emulator-5554          device product:sdk_phone_x86 model:Android_SDK_built_for_x86 device:generic_x86 transport_id:1\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5554 shell pm list packages -3\u0027\r\n      dbug: Evaluating output line for device serial: emulator-5556          device product:sdk_phone_x86_64 model:Android_SDK_built_for_x86_64 device:generic_x86_64 transport_id:2\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 shell pm list packages -3\u0027\r\n      dbug: Found 1 possible devices. Using \u0027emulator-5556\u0027\r\n      info: Active Android device set to serial \u0027emulator-5556\u0027\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 -s emulator-5556 shell getprop ro.product.cpu.abi\u0027\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 -s emulator-5556 shell getprop ro.build.version.sdk\u0027\r\n      info: Waiting for device to be available (max 5 minutes)\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 wait-for-device\u0027\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 -s emulator-5556 shell getprop sys.boot_completed\u0027\r\n      dbug: sys.boot_completed = \u00271\u0027\r\n      dbug: Waited 0 seconds for device boot completion\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 version\u0027\r\n      dbug: Working with API Android Debug Bridge version 1.0.41\r\n            Version 29.0.6-6198805\r\n            Installed as /datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb\r\n            \r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 logcat -b all -c\u0027\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 logcat -P \"\u0027\\\"\"\"\\\"\"\"\u0027\"\u0027\r\n      warn: Unable to disable chatty. Logcat may hide what it finds to be repeating entries.\r\n      info: Starting instrumentation class \u0027net.dot.MonoRunner\u0027 on net.dot.Interop_StructMarshalling\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 shell am instrument -e entrypoint:libname NestedStruct.dll -w net.dot.Interop_StructMarshalling/net.dot.MonoRunner\u0027\r\n      info: Running instrumentation class net.dot.MonoRunner took 7.3421609 seconds\r\n      dbug: Exit code: 0\r\n            Std out:\r\n            INSTRUMENTATION_RESULT: shortMsg=Process crashed.\r\n            INSTRUMENTATION_CODE: 0\r\n            \r\n            \r\n            \r\n      info: Short message:\r\n            Process crashed.\r\n      fail: No value for \u0027return-code\u0027 provided in instrumentation result. This may indicate a crashed test (see log)\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 logcat -d \u0027\r\n      info: Wrote current ADB log to /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct/adb-logcat-net.dot.Interop_StructMarshalling-net.dot.MonoRunner.log\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 bugreport /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct/adb-bugreport-net.dot.Interop_StructMarshalling.zip\u0027\r\n      info: Wrote ADB bugreport to /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct/adb-bugreport-net.dot.Interop_StructMarshalling.zip\r\n      dbug: Saving diagnostics data to \u0027/datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/e/diagnostics.json\u0027\r\n      XHarness exit code: 80 (APP_CRASH)\r\n      Test failed. Trying to see if dump file was created in /home/helixbot/dotnetbuild/dumps since 8/30/2023 11:31:54 PM\r\n      Test Harness Exitcode is : 80\r\n      To run the test:\r\n      \u003e set CORE_ROOT=/datadisks/disk1/work/B3BF09F6/p\r\n      \u003e /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/e/Interop/StructMarshalling/PInvoke/NestedStruct/NestedStruct.sh\r\n      --------- beginning of main\r\n      08-30 23:31:50.849 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:50.849 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:50.899 18319 18466 D WifiConfigStore: Writing to stores completed in 1362 ms.\r\n      08-30 23:31:50.900 18319 18466 E PasspointManager: No app ops listener found for net.dot.Interop_DllImportSearchPaths\r\n      --------- beginning of system\r\n      08-30 23:31:50.920 18319 18466 I DropBoxManagerService: add tag=system_server_wtf isTagEnabled=true flags=0x2\r\n      08-30 23:31:51.312 19092 19119 I ssioncontrolle: Background concurrent copying GC freed 20624(1215KB) AllocSpace objects, 0(0B) LOS objects, 52% free, 1380KB/2916KB, paused 879us total 310.075ms\r\n      08-30 23:31:51.408 19885 19885 D DocumentsApplication: OverlayManager.setEnabled() result: true\r\n      08-30 23:31:51.414 18319 19249 I ActivityManager: Killing 19363:com.android.calendar/u0a107 (adj 985): empty #17\r\n      08-30 23:31:51.422 18319 18319 W Looper  : Drained\r\n      08-30 23:31:51.423 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:51.423 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:51.453 18300 18300 I Zygote  : Process 19363 exited due to signal 9 (Killed)\r\n      08-30 23:31:51.455 18319 18370 I libprocessgroup: Successfully killed process cgroup uid 10107 pid 19363 in 39ms\r\n      08-30 23:31:51.734 19161 19931 I MediaProvider: Begin Intent { act=android.intent.action.PACKAGE_FULLY_REMOVED dat=package:net.dot.Interop_DllImportSearchPaths flg=0x5000010 cmp=com.android.providers.media/.MediaService (has extras) }\r\n      08-30 23:31:51.735 19161 19931 I MediaProvider: End Intent { act=android.intent.action.PACKAGE_FULLY_REMOVED dat=package:net.dot.Interop_DllImportSearchPaths flg=0x5000010 cmp=com.android.providers.media/.MediaService (has extras) }\r\n      08-30 23:31:52.215 18319 18366 I RoleUserState: Wrote roles.xml successfully\r\n      08-30 23:31:52.310 18319 18418 I PackageManager: Un-granting permission android.permission.GLOBAL_SEARCH from package com.android.quicksearchbox (protectionLevel=18 flags=0x3088be45)\r\n      08-30 23:31:52.310 18319 18418 I PackageManager: Un-granting permission android.permission.BIND_WALLPAPER from package com.android.camera2 (protectionLevel=18 flags=0x20d8bc45)\r\n      08-30 23:31:52.316 18319 18418 I PackageManager: Un-granting permission android.permission.CONNECTIVITY_USE_RESTRICTED_NETWORKS from package com.android.captiveportallogin (protectionLevel=18 flags=0x38c8be45)\r\n      08-30 23:31:52.316 18319 18418 I PackageManager: Un-granting permission android.permission.NETWORK_BYPASS_PRIVATE_DNS from package com.android.captiveportallogin (protectionLevel=2 flags=0x38c8be45)\r\n      08-30 23:31:51.850 18319 18319 W Binder:18319_6: type=1400 audit(0.0:43): avc: denied { getopt } for scontext=u:r:system_server:s0 tcontext=u:r:shell:s0 tclass=unix_stream_socket permissive=0\r\n      08-30 23:31:52.339 18319 18418 D PackageManager: Instant App installer not found with android.intent.action.INSTALL_INSTANT_APP_PACKAGE\r\n      08-30 23:31:52.339 18319 18418 D PackageManager: Clear ephemeral installer activity\r\n      08-30 23:31:52.345 18319 18418 I PackageManager.DexOptimizer: Running dexopt (dexoptNeeded=1) on: /data/app/net.dot.Interop_StructMarshalling-ZF_Wc1074DAofa8LqBQPKg==/base.apk pkg=net.dot.Interop_StructMarshalling isa=x86_64 dexoptFlags=boot_complete,profile_guided,public,enable_hidden_api_checks targetFilter=speed-profile oatDir=/data/app/net.dot.Interop_StructMarshalling-ZF_Wc1074DAofa8LqBQPKg==/oat classLoaderContext=PCL[]\r\n      08-30 23:31:52.346  1779  9971 V installd: DexInv: --- BEGIN \u0027/data/app/net.dot.Interop_StructMarshalling-ZF_Wc1074DAofa8LqBQPKg==/base.apk\u0027 ---\r\n      08-30 23:31:52.364 19932 19932 W dex2oat : Unexpected CPU variant for X86 using defaults: x86_64\r\n      08-30 23:31:52.364 19932 19932 I dex2oat : /apex/com.android.runtime/bin/dex2oat --input-vdex-fd=-1 --output-vdex-fd=10 --resolve-startup-const-strings=true --max-image-block-size=524288 --compiler-filter=speed-profile --classpath-dir=/data/app/net.dot.Interop_StructMarshalling-ZF_Wc1074DAofa8LqBQPKg== --class-loader-context=PCL[] --generate-mini-debug-info --compact-dex-level=none --compilation-reason=install\r\n      08-30 23:31:52.366 19932 19932 I dex2oat : setting boot class path to /apex/com.android.runtime/javalib/core-oj.jar:/apex/com.android.runtime/javalib/core-libart.jar:/apex/com.android.runtime/javalib/okhttp.jar:/apex/com.android.runtime/javalib/bouncycastle.jar:/apex/com.android.runtime/javalib/apache-xml.jar:/system/framework/framework.jar:/system/framework/ext.jar:/system/framework/telephony-common.jar:/system/framework/voip-common.jar:/system/framework/ims-common.jar:/system/framework/android.test.base.jar\r\n      08-30 23:31:52.411 19932 19932 I dex2oat : Explicit concurrent copying GC freed 98(64KB) AllocSpace objects, 0(0B) LOS objects, 99% free, 712B/1536KB, paused 848us total 4.952ms\r\n      08-30 23:31:52.462 19932 19932 I dex2oat : dex2oat took 98.824ms (89.998ms cpu) (threads: 1) arena alloc=1000B (1000B) java alloc=16KB (17096B) native alloc=1765KB (1807360B) free=439KB (449536B)\r\n      08-30 23:31:52.465  1779  9971 V installd: DexInv: --- END \u0027/data/app/net.dot.Interop_StructMarshalling-ZF_Wc1074DAofa8LqBQPKg==/base.apk\u0027 (success) ---\r\n      08-30 23:31:52.466 18319 18418 V BackupManagerService: restoreAtInstall pkg=net.dot.Interop_StructMarshalling token=2 restoreSet=0\r\n      08-30 23:31:52.467 18319 18418 V BackupManagerService: Finishing install immediately\r\n      08-30 23:31:52.477 18310 18510 I netd    : trafficSetNetPermForUids(4, [10117]) \u003c0.10ms\u003e\r\n      08-30 23:31:52.492  1555 13240 D vold    : Remounting 10117 as mode default\r\n      08-30 23:31:52.502  1779  9971 E         : Couldn\u0027t opendir /data/app/vmdl436292097.tmp: No such file or directory\r\n      08-30 23:31:52.502  1779  9971 E installd: Failed to delete /data/app/vmdl436292097.tmp: No such file or directory\r\n      08-30 23:31:52.500 18319 18319 W Binder:18319_6: type=1400 audit(0.0:44): avc: denied { getopt } for scontext=u:r:system_server:s0 tcontext=u:r:shell:s0 tclass=unix_stream_socket permissive=0\r\n      08-30 23:31:52.597 18319 18319 I RoleManagerService: Granting default permissions...\r\n      08-30 23:31:52.500 18319 18319 I chatty  : uid=1000 system_server identical 1 line\r\n      08-30 23:31:52.500 18319 18319 W Binder:18319_6: type=1400 audit(0.0:46): avc: denied { getopt } for scontext=u:r:system_server:s0 tcontext=u:r:shell:s0 tclass=unix_stream_socket permissive=0\r\n      08-30 23:31:52.722 18319 18458 I InputReader: Reconfiguring input devices.  changes=0x00000010\r\n      08-30 23:31:52.725 18319 19248 W BroadcastQueue: Background execution not allowed: receiving Intent { act=android.intent.action.PACKAGE_ADDED dat=package:net.dot.Interop_StructMarshalling flg=0x4000010 (has extras) } to com.android.packageinstaller/.PackageInstalledReceiver\r\n      08-30 23:31:52.726 18319 18367 W BroadcastQueue: Background execution not allowed: receiving Intent { act=android.intent.action.PACKAGE_ADDED dat=package:net.dot.Interop_StructMarshalling flg=0x4000010 (has extras) } to com.android.gallery3d/.app.PackagesMonitor\r\n      08-30 23:31:52.726 18319 18367 W BroadcastQueue: Background execution not allowed: receiving Intent { act=android.intent.action.PACKAGE_ADDED dat=package:net.dot.Interop_StructMarshalling flg=0x4000010 (has extras) } to com.android.musicfx/.Compatibility$Receiver\r\n      08-30 23:31:52.780 18319 18366 W VoiceInteractionManagerService: no available voice recognition services found for user 0\r\n      08-30 23:31:52.793 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:52.793 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:52.956 18653 18653 D CarrierSvcBindHelper: No carrier app for: 0\r\n      08-30 23:31:52.995 18319 18358 W Looper  : Slow dispatch took 115ms android.fg h=android.os.Handler c=\u003crecycled PooledLambda@d9e233f\u003e m=0\r\n      08-30 23:31:53.007 18653 18653 D CarrierConfigLoader: mHandler: 9 phoneId: 0\r\n      08-30 23:31:53.040 18319 18319 W Looper  : Slow dispatch took 330ms main h=android.app.ActivityThread$H c=android.app.-$$Lambda$LoadedApk$ReceiverDispatcher$Args$_BumDX2UKsnxLVrE6UJsJZkotuA@ccc640c m=0\r\n      08-30 23:31:53.040 18319 18319 W Looper  : Slow delivery took 335ms main h=android.app.ActivityThread$H c=android.app.-$$Lambda$LoadedApk$ReceiverDispatcher$Args$_BumDX2UKsnxLVrE6UJsJZkotuA@6ca7155 m=0\r\n      08-30 23:31:53.049 18319 18335 I system_server: Background concurrent copying GC freed 62230(4303KB) AllocSpace objects, 44(2984KB) LOS objects, 42% free, 7726KB/13MB, paused 671us total 548.527ms\r\n      08-30 23:31:53.053 18319 18358 W Looper  : Slow delivery took 207ms android.fg h=android.os.Handler c=\u003crecycled PooledLambda@6dbb45b\u003e m=0\r\n      08-30 23:31:53.058 18319 18319 I Telecom : DefaultDialerCache: Refreshing default dialer for user 0: now com.android.dialer: CM.CCCR-\u003eCM.UECNT-\u003eCM.CCCR-\u003eCM.UECNT@AD8\r\n      08-30 23:31:53.060 18319 18319 V BackupManagerConstants: getFullBackupIntervalMilliseconds(...) returns 86400000\r\n      08-30 23:31:53.071 18319 18319 V BackupManagerConstants: getFullBackupRequiredNetworkType(...) returns 2\r\n      08-30 23:31:53.071 18319 18319 V BackupManagerConstants: getFullBackupRequireCharging(...) returns true\r\n      08-30 23:31:53.256 18319 18358 W Looper  : Drained\r\n      08-30 23:31:52.500  1759  1759 W adbd    : type=1400 audit(0.0:47): avc: denied { shutdown } for scontext=u:r:adbd:s0 tcontext=u:r:shell:s0 tclass=unix_stream_socket permissive=0\r\n      08-30 23:31:53.818 18319 18366 I RoleUserState: Wrote roles.xml successfully\r\n      08-30 23:31:54.026 19955 19955 D AndroidRuntime: \u003e\u003e\u003e\u003e\u003e\u003e START com.android.internal.os.RuntimeInit uid 2000 \u003c\u003c\u003c\u003c\u003c\u003c\r\n      08-30 23:31:54.035 19955 19955 E libc    : Access denied finding property \"persist.device_config.runtime_native_boot.enable_apex_image\"\r\n      08-30 23:31:54.035 19955 19955 I AndroidRuntime: Using default boot image\r\n      08-30 23:31:54.035 19955 19955 E libc    : Access denied finding property \"persist.device_config.runtime_native_boot.disable_lock_profiling\"\r\n      08-30 23:31:54.035 19955 19955 I AndroidRuntime: Leaving lock profiling enabled\r\n      08-30 23:31:54.036 19955 19955 E libc    : Access denied finding property \"persist.device_config.runtime_native_boot.enable_generational_cc\"\r\n      08-30 23:31:54.037 19955 19955 I app_process: Core platform API reporting enabled, enforcing=false\r\n      08-30 23:31:54.097 19955 19955 D ICU     : Time zone APEX file found: /apex/com.android.tzdata/etc/icu/icu_tzdata.dat\r\n      08-30 23:31:54.107 19955 19955 W app_process: Unexpected CPU variant for X86 using defaults: x86_64\r\n      08-30 23:31:54.108 19955 19955 I app_process: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:54.119 19955 19955 W app_process: JNI RegisterNativeMethods: attempt to register 0 native methods for android.media.AudioAttributes\r\n      08-30 23:31:54.122 19955 19955 D AndroidRuntime: Calling main entry com.android.commands.am.Am\r\n      08-30 23:31:54.132 18319 19351 I ActivityManager: Force stopping net.dot.Interop_StructMarshalling appid=10117 user=0: start instr\r\n      08-30 23:31:54.143 18319 18319 W Looper  : Drained\r\n      08-30 23:31:54.148 18300 18300 D Zygote  : Forked child process 19966\r\n      08-30 23:31:54.150 18319 18369 I ActivityManager: Start proc 19966:net.dot.Interop_StructMarshalling/u0a117 for added application net.dot.Interop_StructMarshalling\r\n      08-30 23:31:54.155 19966 19966 W ructMarshallin: Unexpected CPU variant for X86 using defaults: x86_64\r\n      08-30 23:31:54.177 19966 19966 I DOTNET  : JNI_OnLoad: JNI_OnLoad in pal_jni.c\r\n      08-30 23:31:54.177 19966 19966 D DOTNET  : GetOptionalClassGRef: optional class com/android/org/conscrypt/OpenSSLEngineImpl was not found\r\n      08-30 23:31:54.184 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.XmlSerializer.dll\r\n      08-30 23:31:54.185 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.Contracts.dll\r\n      08-30 23:31:54.185 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Compression.Brotli.dll\r\n      08-30 23:31:54.189 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Private.DataContractSerialization.dll\r\n      08-30 23:31:54.250 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.dll\r\n      08-30 23:31:54.252 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Collections.NonGeneric.dll\r\n      08-30 23:31:54.254 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Serialization.Xml.dll\r\n      08-30 23:31:54.255 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Collections.Immutable.dll\r\n      08-30 23:31:54.283 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.DiagnosticSource.dll\r\n      08-30 23:31:54.295 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/OSExtensions.dll\r\n      08-30 23:31:54.298 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Serialization.dll\r\n      08-30 23:31:54.299 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ValueTuple.dll\r\n      08-30 23:31:54.300 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.Process.dll\r\n      08-30 23:31:54.310 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.FileVersionInfo.dll\r\n      08-30 23:31:54.312 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Http.Json.dll\r\n      08-30 23:31:54.316 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.WebSockets.dll\r\n      08-30 23:31:54.321 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Pipes.AccessControl.dll\r\n      08-30 23:31:54.322 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Formats.Asn1.dll\r\n      08-30 23:31:54.329 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.DiaSymReader.Native.amd64.dll\r\n      08-30 23:31:54.477 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.DiaSymReader.Native.x86.dll\r\n      08-30 23:31:54.661 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/TestLibrary.dll\r\n      08-30 23:31:54.667 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.TypeExtensions.dll\r\n      08-30 23:31:54.668 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.dll\r\n      08-30 23:31:54.669 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Web.HttpUtility.dll\r\n      08-30 23:31:54.672 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.VisualBasic.Core.dll\r\n      08-30 23:31:54.710 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Linq.dll\r\n      08-30 23:31:54.724 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Newtonsoft.Json.dll\r\n      08-30 23:31:54.792 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Resources.ResourceManager.dll\r\n      08-30 23:31:54.795 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.FileSystem.DriveInfo.dll\r\n      08-30 23:31:54.799 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Linq.Expressions.dll\r\n      08-30 23:31:54.845 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/DelegatePInvokeTest.dll\r\n      08-30 23:31:54.849 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Primitives.dll\r\n      08-30 23:31:54.860 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.dll\r\n      08-30 23:31:54.863 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Overlapped.dll\r\n      08-30 23:31:54.864 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Transactions.Local.dll\r\n      08-30 23:31:54.873 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.InteropServices.RuntimeInformation.dll\r\n      08-30 23:31:54.874 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.Annotations.dll\r\n      08-30 23:31:54.882 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ObjectModel.dll\r\n      08-30 23:31:54.884 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Drawing.dll\r\n      08-30 23:31:54.885 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.WebSockets.Client.dll\r\n      08-30 23:31:54.888 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.XPath.dll\r\n      08-30 23:31:54.889 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.Diagnostics.Tracing.TraceEvent.dll\r\n      08-30 23:31:54.020 19955 19955 W app_process: type=1400 audit(0.0:48): avc: denied { read } for name=\"u:object_r:device_config_runtime_native_boot_prop:s0\" dev=\"tmpfs\" ino=6676 scontext=u:r:shell:s0 tcontext=u:object_r:device_config_runtime_native_boot_prop:s0 tclass=file permissive=0\r\n      08-30 23:31:54.030 19955 19955 I chatty  : uid=2000(shell) app_process identical 1 line\r\n      08-30 23:31:54.030 19955 19955 W app_process: type=1400 audit(0.0:50): avc: denied { read } for name=\"u:object_r:device_config_runtime_native_boot_prop:s0\" dev=\"tmpfs\" ino=6676 scontext=u:r:shell:s0 tcontext=u:object_r:device_config_runtime_native_boot_prop:s0 tclass=file permissive=0\r\n      08-30 23:31:55.059 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:55.059 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:55.073 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.175 18319 19984 I chatty  : uid=1000 system_server identical 4 lines\r\n      08-30 23:31:55.295 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.319 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Collections.Concurrent.dll\r\n      08-30 23:31:55.329 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.FileSystem.Watcher.dll\r\n      08-30 23:31:55.347 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.XPath.XDocument.dll\r\n      08-30 23:31:55.348 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.dll\r\n      08-30 23:31:55.349 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.CompilerServices.Unsafe.dll\r\n      08-30 23:31:55.350 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Collections.Specialized.dll\r\n      08-30 23:31:55.355 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.VisualBasic.dll\r\n      08-30 23:31:55.356 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.AccessControl.dll\r\n      08-30 23:31:55.360 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.InteropServices.dll\r\n      08-30 23:31:55.368 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.DispatchProxy.dll\r\n      08-30 23:31:55.373 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.dll\r\n      08-30 23:31:55.373 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Web.dll\r\n      08-30 23:31:55.374 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.Win32.Primitives.dll\r\n      08-30 23:31:55.375 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.dll\r\n      08-30 23:31:55.377 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ServiceProcess.dll\r\n      08-30 23:31:55.378 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Http.dll\r\n      08-30 23:31:55.385 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.387 18319 19984 I chatty  : uid=1000 system_server identical 1 line\r\n      08-30 23:31:55.389 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.459 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Extensions.dll\r\n      08-30 23:31:55.460 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Sockets.dll\r\n      08-30 23:31:55.469 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.488 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.WebProxy.dll\r\n      08-30 23:31:55.489 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.WebClient.dll\r\n      08-30 23:31:55.494 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Thread.dll\r\n      08-30 23:31:55.494 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.Encoding.Extensions.dll\r\n      08-30 23:31:55.495 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.HttpListener.dll\r\n      08-30 23:31:55.506 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.Encodings.Web.dll\r\n      08-30 23:31:55.509 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Mail.dll\r\n      08-30 23:31:55.532 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.537 18319 19984 I chatty  : uid=1000 system_server identical 3 lines\r\n      08-30 23:31:55.539 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.548 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Linq.Queryable.dll\r\n      08-30 23:31:55.553 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Resources.Reader.dll\r\n      08-30 23:31:55.554 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Resources.Writer.dll\r\n      08-30 23:31:55.556 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.AppContext.dll\r\n      08-30 23:31:55.557 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Data.dll\r\n      08-30 23:31:55.558 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Security.dll\r\n      08-30 23:31:55.575 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.NetworkInformation.dll\r\n      08-30 23:31:55.579 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.InteropServices.JavaScript.dll\r\n      08-30 23:31:55.582 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.SecureString.dll\r\n      08-30 23:31:55.583 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Console.dll\r\n      08-30 23:31:55.587 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.TypeConverter.dll\r\n      08-30 23:31:55.602 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.604 18319 19984 I chatty  : uid=1000 system_server identical 1 line\r\n      08-30 23:31:55.606 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.607 18319 19984 I PackageManager.DexOptimizer: Running dexopt (dexoptNeeded=1) on: /system/product/app/ModuleMetadata/ModuleMetadata.apk pkg=com.android.modulemetadata isa=x86_64 dexoptFlags=boot_complete,public,enable_hidden_api_checks targetFilter=verify oatDir=null classLoaderContext=PCL[]{PCL[/system/framework/android.hidl.manager-V1.0-java.jar]{PCL[/system/framework/android.hidl.base-V1.0-java.jar]}#PCL[/system/framework/android.hidl.base-V1.0-java.jar]}\r\n      08-30 23:31:55.608  1779  9971 V installd: DexInv: --- BEGIN \u0027/system/product/app/ModuleMetadata/ModuleMetadata.apk\u0027 ---\r\n      08-30 23:31:55.620 19985 19985 W dex2oat : Unexpected CPU variant for X86 using defaults: x86_64\r\n      08-30 23:31:55.627 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Private.Uri.dll\r\n      08-30 23:31:55.635 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Emit.ILGeneration.dll\r\n      08-30 23:31:55.635 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.Linq.dll\r\n      08-30 23:31:55.636 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.FileSystem.dll\r\n      08-30 23:31:55.637 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Configuration.dll\r\n      08-30 23:31:55.638 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.EventBasedAsync.dll\r\n      08-30 23:31:55.640 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Extensions.dll\r\n      08-30 23:31:55.640 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Private.CoreLib.dll\r\n      08-30 23:31:55.933 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.Json.dll\r\n      08-30 23:31:55.970 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Drawing.Primitives.dll\r\n      08-30 23:31:55.974 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.NameResolution.dll\r\n      08-30 23:31:55.977 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.execution.dotnet.dll\r\n      08-30 23:31:56.001 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Transactions.dll\r\n      08-30 23:31:56.002 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.ReaderWriter.dll\r\n      08-30 23:31:56.003 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Compression.FileSystem.dll\r\n      08-30 23:31:56.004 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.assert.dll\r\n      08-30 23:31:56.015 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Serialization.Json.dll\r\n      08-30 23:31:56.015 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Compression.dll\r\n      08-30 23:31:56.025 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.DataAnnotations.dll\r\n      08-30 23:31:56.026 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Serialization.Formatters.dll\r\n      08-30 23:31:56.029 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Private.Xml.Linq.dll\r\n      08-30 23:31:56.039 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Dia2Lib.dll\r\n      08-30 23:31:56.047 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.ServicePoint.dll\r\n      08-30 23:31:56.048 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.RegularExpressions.dll\r\n      08-30 23:31:56.075 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.FileSystem.AccessControl.dll\r\n      08-30 23:31:56.077 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/TraceReloggerLib.dll\r\n      08-30 23:31:56.079 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/ReversePInvokeTest.dll\r\n      08-30 23:31:56.083 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.dll\r\n      08-30 23:31:56.085 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.abstractions.dll\r\n      08-30 23:31:56.087 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Data.DataSetExtensions.dll\r\n      08-30 23:31:56.088 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/netstandard.dll\r\n      08-30 23:31:56.092 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Channels.dll\r\n      08-30 23:31:56.095 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.CSharp.dll\r\n      08-30 23:31:56.118 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.IsolatedStorage.dll\r\n      08-30 23:31:56.121 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Globalization.Calendars.dll\r\n      08-30 23:31:56.122 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.dll\r\n      08-30 23:31:56.214 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Timer.dll\r\n      08-30 23:31:56.215 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Emit.dll\r\n      08-30 23:31:56.219 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Loader.dll\r\n      08-30 23:31:56.219 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Handles.dll\r\n      08-30 23:31:56.220 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Serialization.Primitives.dll\r\n      08-30 23:31:56.222 19985 19985 I dex2oat : /apex/com.android.runtime/bin/dex2oat --input-vdex-fd=-1 --output-vdex-fd=10 --resolve-startup-const-strings=true --max-image-block-size=524288 --compiler-filter=verify --classpath-dir=/system/product/app/ModuleMetadata --class-loader-context=PCL[]{PCL[/system/framework/android.hidl.manager-V1.0-java.jar]{PCL[/system/framework/android.hidl.base-V1.0-java.jar]}#PCL[/system/framework/android.hidl.base-V1.0-java.jar]} --generate-mini-debug-info --compact-dex-level=none --compilation-reason=boot\r\n      08-30 23:31:56.224 19985 19985 I dex2oat : setting boot class path to /apex/com.android.runtime/javalib/core-oj.jar:/apex/com.android.runtime/javalib/core-libart.jar:/apex/com.android.runtime/javalib/okhttp.jar:/apex/com.android.runtime/javalib/bouncycastle.jar:/apex/com.android.runtime/javalib/apache-xml.jar:/system/framework/framework.jar:/system/framework/ext.jar:/system/framework/telephony-common.jar:/system/framework/voip-common.jar:/system/framework/ims-common.jar:/system/framework/android.test.base.jar\r\n      08-30 23:31:56.232 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.StackTrace.dll\r\n      08-30 23:31:56.233 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.Csp.dll\r\n      08-30 23:31:56.234 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.Debug.dll\r\n      08-30 23:31:56.235 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.core.dll\r\n      08-30 23:31:56.244 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Tasks.Extensions.dll\r\n      08-30 23:31:56.246 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.Algorithms.dll\r\n      08-30 23:31:56.247 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Pipes.dll\r\n      08-30 23:31:56.251 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.XmlDocument.dll\r\n      08-30 23:31:56.253 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.Encoding.dll\r\n      08-30 23:31:56.253 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.DiaSymReader.Native.arm.dll\r\n      08-30 23:31:56.373 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.X509Certificates.dll\r\n      08-30 23:31:56.373 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Numerics.dll\r\n      08-30 23:31:56.374 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.Win32.Registry.dll\r\n      08-30 23:31:56.375 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Formats.Tar.dll\r\n      08-30 23:31:56.384 19966 19976 I ructMarshallin: Background young concurrent copying GC freed 36379(4420KB) AllocSpace objects, 0(0B) LOS objects, 84% free, 1120KB/7264KB, paused 769us total 228.830ms\r\n      08-30 23:31:56.388 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Principal.dll\r\n      08-30 23:31:56.388 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Metadata.dll\r\n      08-30 23:31:56.419 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.CodeAnalysis.CSharp.dll\r\n      08-30 23:31:56.884 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/CommandLine.dll\r\n      08-30 23:31:56.910 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Primitives.dll\r\n      08-30 23:31:56.911 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Claims.dll\r\n      08-30 23:31:56.917 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ServiceModel.Web.dll\r\n      08-30 23:31:56.917 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Globalization.dll\r\n      08-30 23:31:56.918 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.Encoding.CodePages.dll\r\n      08-30 23:31:57.145 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.OpenSsl.dll\r\n      08-30 23:31:57.159 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/MarshalStructAsLayoutSeq.dll\r\n      08-30 23:31:57.220 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/WindowsBase.dll\r\n      08-30 23:31:57.222 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Newtonsoft.Json.Bson.dll\r\n      08-30 23:31:57.241 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.DotNet.XUnitExtensions.dll\r\n      08-30 23:31:57.245 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Buffers.dll\r\n      08-30 23:31:57.260 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Ping.dll\r\n      08-30 23:31:57.268 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.TraceSource.dll\r\n      08-30 23:31:57.273 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Principal.Windows.dll\r\n      08-30 23:31:57.274 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Tasks.Dataflow.dll\r\n      08-30 23:31:57.287 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Windows.dll\r\n      08-30 23:31:57.289 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.Tools.dll\r\n      08-30 23:31:57.289 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.CompilerServices.VisualC.dll\r\n      08-30 23:31:57.290 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.runner.reporters.netcoreapp10.dll\r\n      08-30 23:31:57.298 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Dynamic.Runtime.dll\r\n      08-30 23:31:57.298 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.FileSystem.Primitives.dll\r\n      08-30 23:31:57.299 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Globalization.Extensions.dll\r\n      08-30 23:31:57.299 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.Primitives.dll\r\n      08-30 23:31:57.301 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.UnmanagedMemoryStream.dll\r\n      08-30 23:31:57.301 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.dll\r\n      08-30 23:31:57.302 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Collections.dll\r\n      08-30 23:31:57.310 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Tasks.Parallel.dll\r\n      08-30 23:31:57.315 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.XDocument.dll\r\n      08-30 23:31:57.316 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.Encoding.dll\r\n      08-30 23:31:57.316 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Quic.dll\r\n      08-30 23:31:57.325 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.Cng.dll\r\n      08-30 23:31:57.325 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Requests.dll\r\n      08-30 23:31:57.337 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.Serialization.dll\r\n      08-30 23:31:57.338 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.dll\r\n      08-30 23:31:57.340 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Emit.Lightweight.dll\r\n      08-30 23:31:57.343 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.TextWriterTraceListener.dll\r\n      08-30 23:31:57.344 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.Tracing.dll\r\n      08-30 23:31:57.345 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Compression.ZipFile.dll\r\n      08-30 23:31:57.349 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.ThreadPool.dll\r\n      08-30 23:31:57.350 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.MemoryMappedFiles.dll\r\n      08-30 23:31:57.353 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.runner.utility.netcoreapp10.dll\r\n      08-30 23:31:57.374 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Numerics.Vectors.dll\r\n      08-30 23:31:57.375 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Core.dll\r\n      08-30 23:31:57.376 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/NestedStruct.dll\r\n      08-30 23:31:57.376 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.Primitives.dll\r\n      08-30 23:31:57.379 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Tasks.dll\r\n      08-30 23:31:57.379 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Data.Common.dll\r\n      08-30 23:31:57.540 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.WebHeaderCollection.dll\r\n      08-30 23:31:57.557 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Intrinsics.dll\r\n      08-30 23:31:57.558 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.Diagnostics.FastSerialization.dll\r\n      08-30 23:31:57.565 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.console.dll\r\n      08-30 23:31:57.605 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/mscorlib.dll\r\n      08-30 23:31:57.610 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Memory.dll\r\n      08-30 23:31:57.615 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Linq.Parallel.dll\r\n      08-30 23:31:57.644 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Private.Xml.dll\r\n      08-30 23:31:57.779 19985 19985 I dex2oat : dex2oat took 2.159s (30.139ms cpu) (threads: 1) arena alloc=0B (0B) java alloc=16KB (16400B) native alloc=1680KB (1721184B) free=491KB (502944B)\r\n      08-30 23:31:58.125 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.CodeAnalysis.dll\r\n      08-30 23:31:58.414 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Numerics.dll\r\n      08-30 23:31:58.423 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.CodeAnalysis.VisualBasic.dll\r\n      08-30 23:31:58.461  1779  9971 V installd: DexInv: --- END \u0027/system/product/app/ModuleMetadata/ModuleMetadata.apk\u0027 (success) ---\r\n      08-30 23:31:58.463 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:58.465 18319 19984 I chatty  : uid=1000 system_server identical 1 line\r\n      08-30 23:31:58.467 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:58.525 18319 18335 I system_server: Background concurrent copying GC freed 18696(1320KB) AllocSpace objects, 10(328KB) LOS objects, 42% free, 7196KB/12MB, paused 204.696ms total 740.668ms\r\n      08-30 23:31:58.528 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:58.777 18319 19984 I chatty  : uid=1000 system_server identical 47 lines\r\n      08-30 23:31:58.778 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:58.842 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.DiaSymReader.Native.arm64.dll\r\n      08-30 23:31:58.863 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:58.880 18319 19984 I chatty  : uid=1000 system_server identical 5 lines\r\n      08-30 23:31:59.004 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.063 18319 19351 D WificondControl: Scan result ready event\r\n      08-30 23:31:59.107 19966 19983 I DOTNET  : MonoRunner initialize,, entryPointLibName=NestedStruct.dll\r\n      08-30 23:31:59.108 19966 19983 D DOTNET  : file_path: /data/user/0/net.dot.Interop_StructMarshalling/files/runtimeconfig.bin\r\n      08-30 23:31:59.124 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.148 18319 19984 I chatty  : uid=1000 system_server identical 5 lines\r\n      08-30 23:31:59.149 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.164 19966 19983 D DOTNET  : assembly_preload_hook: System.Private.CoreLib (null) /data/user/0/net.dot.Interop_StructMarshalling/files\r\n      08-30 23:31:59.306 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.505 18319 18360 I DropBoxManagerService: add tag=system_server_strictmode isTagEnabled=true flags=0x2\r\n      08-30 23:31:59.449 18319 19984 I chatty  : uid=1000 system_server identical 5 lines\r\n      08-30 23:31:59.569 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.761 19966 19983 D DOTNET  : assembly_preload_hook: NestedStruct.dll (null) /data/user/0/net.dot.Interop_StructMarshalling/files\r\n      08-30 23:31:59.762 19966 19983 D DOTNET  : Executable: NestedStruct.dll\r\n      08-30 23:31:59.762 19966 19983 D DOTNET  : assembly_preload_hook: System.Runtime  /data/user/0/net.dot.Interop_StructMarshalling/files\r\n      08-30 23:31:59.766 19966 19983 D DOTNET  : assembly_preload_hook: System.Console  /data/user/0/net.dot.Interop_StructMarshalling/files\r\n      08-30 23:31:59.766 19966 19983 D DOTNET  : assembly_preload_hook: System.Runtime.InteropServices  /data/user/0/net.dot.Interop_StructMarshalling/files\r\n      08-30 23:31:59.866 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.870 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.935 18319 19984 I BackgroundDexOptService: Pinning optimized code {com.android.modulemetadata}\r\n      08-30 23:31:59.595 18319 18360 I chatty  : uid=1000(system) android.io identical 4 lines\r\n      08-30 23:31:59.596 18319 18360 I DropBoxManagerService: add tag=system_server_strictmode isTagEnabled=true flags=0x2\r\n      08-30 23:31:59.939 18319 18319 I ActivityManager: Killing 19611:com.android.camera2/u0a115 (adj 985): empty #17\r\n      08-30 23:31:59.944 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:59.944 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:59.947 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:59.947 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:59.950 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:59.950 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:59.982 18300 18300 I Zygote  : Process 19611 exited due to signal 9 (Killed)\r\n      08-30 23:32:00.022 18319 18370 I libprocessgroup: Successfully killed process cgroup uid 10115 pid 19611 in 80ms\r\n      08-30 23:32:00.078 18550 18550 D KeyguardClockSwitch: Updating clock: 1132\r\n      08-30 23:32:00.754 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:32:00.754 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:32:00.756 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:32:00.756 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:32:00.758 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:32:00.758 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:32:01.103 19966 19983 E mono    : \r\n      08-30 23:32:01.103 19966 19983 E mono    : Unhandled Exception:\r\n      08-30 23:32:01.103 19966 19983 E mono    : System.DllNotFoundException: MarshalStructAsParam\r\n      08-30 23:32:01.103 19966 19983 E mono    :    at Managed.Main()\r\n      08-30 23:32:01.104 19966 19983 E DOTNET  : UnhandledException: System.DllNotFoundException MarshalStructAsParam    at Managed.Main()\r\n      08-30 23:32:01.153 18300 18300 I Zygote  : Process 19966 exited cleanly (1)\r\n      08-30 23:32:01.154 18319 19352 I ActivityManager: Process net.dot.Interop_StructMarshalling (pid 19966) has died: fore FGS \r\n      08-30 23:32:01.156 18319 19352 W ActivityManager: Crash of app net.dot.Interop_StructMarshalling running instrumentation ComponentInfo{net.dot.Interop_StructMarshalling/net.dot.MonoRunner}\r\n      08-30 23:32:01.158 18319 19352 I ActivityManager: Force stopping net.dot.Interop_StructMarshalling appid=10117 user=0: finished inst\r\n      08-30 23:32:01.163 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:32:01.163 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:32:01.169 18319 19993 W Binder  : Outgoing transactions from this process must be FLAG_ONEWAY\r\n      08-30 23:32:01.169 18319 19993 W Binder  : java.lang.Throwable\r\n      08-30 23:32:01.169 18319 19993 W Binder  : \tat android.os.BinderProxy.transact(BinderProxy.java:480)\r\n      08-30 23:32:01.169 18319 19993 W Binder  : \tat android.app.IInstrumentationWatcher$Stub$Proxy.instrumentationFinished(IInstrumentationWatcher.java:205)\r\n      08-30 23:32:01.169 18319 19993 W Binder  : \tat com.android.server.am.InstrumentationReporter$MyThread.run(InstrumentationReporter.java:86)\r\n      08-30 23:32:01.170 19955 19955 D AndroidRuntime: Shutting down VM\r\n      08-30 23:32:01.192 18319 18370 I libprocessgroup: Successfully killed process cgroup uid 10117 pid 19966 in 40ms\r\n      Expected: True\r\n      Actual:   False\r\n      Stack Trace:\r\n           at Interop_StructMarshalling._PInvoke_NestedStruct_NestedStruct_._PInvoke_NestedStruct_NestedStruct_sh()\r\n           at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)\r\n           at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)\r\n      Output:\r\n        \r\n        Return code:      80\r\n        Raw output file:      /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct/NestedStruct.output.txt\r\n        Raw output:\r\n```",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOZW3dCw==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc5lYhVt",
                                           "createdAt":  "2023-08-31T12:16:24Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Tagging subscribers to \u0027arch-android\u0027: @steveisok, @akoeplinger\nSee info in area-owners.md if you want to be subscribed.\n\u003cdetails\u003e\n\u003csummary\u003eIssue Details\u003c/summary\u003e\n\u003chr /\u003e\n\nIt is likely that all interop tests are prevented from running on Android because of this issue.\r\n\r\nOne example is the newly added test: `Interop/StructMarshalling/PInvoke/NestedStruct/NestedStruct.sh`\r\n\r\nThe log:\r\n\r\n```\r\nInterop/StructMarshalling/PInvoke/NestedStruct/NestedStruct.sh [FAIL]\r\n      \r\n      Return code:      80\r\n      Raw output file:      /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct/NestedStruct.output.txt\r\n      Raw output:\r\n      BEGIN EXECUTION\r\n      [8.0.0-prerelease.23421.1+1c09ef5b669c11e1aeca92089d0c1e4408169582] XHarness command issued: android run --instrumentation=net.dot.MonoRunner --package-name=net.dot.Interop_StructMarshalling --output-directory=/datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct --arg=entrypoint:libname=NestedStruct.dll --expected-exit-code=100 -v\r\n      dbug: ADBRunner using ADB.exe supplied from /datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/tools/net7.0/any/../../../runtimes/any/native/adb/linux/adb\r\n      dbug: Full resolved path:\u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb\u0027\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb start-server\u0027\r\n      dbug: \r\n      info: Finding attached devices/emulators...\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb devices -l\u0027\r\n      dbug: Found 2 possible devices\r\n      dbug: Evaluating output line for device serial: emulator-5554          device product:sdk_phone_x86 model:Android_SDK_built_for_x86 device:generic_x86 transport_id:1\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5554 shell pm list packages -3\u0027\r\n      dbug: Evaluating output line for device serial: emulator-5556          device product:sdk_phone_x86_64 model:Android_SDK_built_for_x86_64 device:generic_x86_64 transport_id:2\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 shell pm list packages -3\u0027\r\n      dbug: Found 1 possible devices. Using \u0027emulator-5556\u0027\r\n      info: Active Android device set to serial \u0027emulator-5556\u0027\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 -s emulator-5556 shell getprop ro.product.cpu.abi\u0027\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 -s emulator-5556 shell getprop ro.build.version.sdk\u0027\r\n      info: Waiting for device to be available (max 5 minutes)\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 wait-for-device\u0027\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 -s emulator-5556 shell getprop sys.boot_completed\u0027\r\n      dbug: sys.boot_completed = \u00271\u0027\r\n      dbug: Waited 0 seconds for device boot completion\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 version\u0027\r\n      dbug: Working with API Android Debug Bridge version 1.0.41\r\n            Version 29.0.6-6198805\r\n            Installed as /datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb\r\n            \r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 logcat -b all -c\u0027\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 logcat -P \"\u0027\\\"\"\"\\\"\"\"\u0027\"\u0027\r\n      warn: Unable to disable chatty. Logcat may hide what it finds to be repeating entries.\r\n      info: Starting instrumentation class \u0027net.dot.MonoRunner\u0027 on net.dot.Interop_StructMarshalling\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 shell am instrument -e entrypoint:libname NestedStruct.dll -w net.dot.Interop_StructMarshalling/net.dot.MonoRunner\u0027\r\n      info: Running instrumentation class net.dot.MonoRunner took 7.3421609 seconds\r\n      dbug: Exit code: 0\r\n            Std out:\r\n            INSTRUMENTATION_RESULT: shortMsg=Process crashed.\r\n            INSTRUMENTATION_CODE: 0\r\n            \r\n            \r\n            \r\n      info: Short message:\r\n            Process crashed.\r\n      fail: No value for \u0027return-code\u0027 provided in instrumentation result. This may indicate a crashed test (see log)\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 logcat -d \u0027\r\n      info: Wrote current ADB log to /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct/adb-logcat-net.dot.Interop_StructMarshalling-net.dot.MonoRunner.log\r\n      dbug: Executing command: \u0027/datadisks/disk1/work/B3BF09F6/p/microsoft.dotnet.xharness.cli/8.0.0-prerelease.23421.1/runtimes/any/native/adb/linux/adb -s emulator-5556 bugreport /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct/adb-bugreport-net.dot.Interop_StructMarshalling.zip\u0027\r\n      info: Wrote ADB bugreport to /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct/adb-bugreport-net.dot.Interop_StructMarshalling.zip\r\n      dbug: Saving diagnostics data to \u0027/datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/e/diagnostics.json\u0027\r\n      XHarness exit code: 80 (APP_CRASH)\r\n      Test failed. Trying to see if dump file was created in /home/helixbot/dotnetbuild/dumps since 8/30/2023 11:31:54 PM\r\n      Test Harness Exitcode is : 80\r\n      To run the test:\r\n      \u003e set CORE_ROOT=/datadisks/disk1/work/B3BF09F6/p\r\n      \u003e /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/e/Interop/StructMarshalling/PInvoke/NestedStruct/NestedStruct.sh\r\n      --------- beginning of main\r\n      08-30 23:31:50.849 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:50.849 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:50.899 18319 18466 D WifiConfigStore: Writing to stores completed in 1362 ms.\r\n      08-30 23:31:50.900 18319 18466 E PasspointManager: No app ops listener found for net.dot.Interop_DllImportSearchPaths\r\n      --------- beginning of system\r\n      08-30 23:31:50.920 18319 18466 I DropBoxManagerService: add tag=system_server_wtf isTagEnabled=true flags=0x2\r\n      08-30 23:31:51.312 19092 19119 I ssioncontrolle: Background concurrent copying GC freed 20624(1215KB) AllocSpace objects, 0(0B) LOS objects, 52% free, 1380KB/2916KB, paused 879us total 310.075ms\r\n      08-30 23:31:51.408 19885 19885 D DocumentsApplication: OverlayManager.setEnabled() result: true\r\n      08-30 23:31:51.414 18319 19249 I ActivityManager: Killing 19363:com.android.calendar/u0a107 (adj 985): empty #17\r\n      08-30 23:31:51.422 18319 18319 W Looper  : Drained\r\n      08-30 23:31:51.423 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:51.423 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:51.453 18300 18300 I Zygote  : Process 19363 exited due to signal 9 (Killed)\r\n      08-30 23:31:51.455 18319 18370 I libprocessgroup: Successfully killed process cgroup uid 10107 pid 19363 in 39ms\r\n      08-30 23:31:51.734 19161 19931 I MediaProvider: Begin Intent { act=android.intent.action.PACKAGE_FULLY_REMOVED dat=package:net.dot.Interop_DllImportSearchPaths flg=0x5000010 cmp=com.android.providers.media/.MediaService (has extras) }\r\n      08-30 23:31:51.735 19161 19931 I MediaProvider: End Intent { act=android.intent.action.PACKAGE_FULLY_REMOVED dat=package:net.dot.Interop_DllImportSearchPaths flg=0x5000010 cmp=com.android.providers.media/.MediaService (has extras) }\r\n      08-30 23:31:52.215 18319 18366 I RoleUserState: Wrote roles.xml successfully\r\n      08-30 23:31:52.310 18319 18418 I PackageManager: Un-granting permission android.permission.GLOBAL_SEARCH from package com.android.quicksearchbox (protectionLevel=18 flags=0x3088be45)\r\n      08-30 23:31:52.310 18319 18418 I PackageManager: Un-granting permission android.permission.BIND_WALLPAPER from package com.android.camera2 (protectionLevel=18 flags=0x20d8bc45)\r\n      08-30 23:31:52.316 18319 18418 I PackageManager: Un-granting permission android.permission.CONNECTIVITY_USE_RESTRICTED_NETWORKS from package com.android.captiveportallogin (protectionLevel=18 flags=0x38c8be45)\r\n      08-30 23:31:52.316 18319 18418 I PackageManager: Un-granting permission android.permission.NETWORK_BYPASS_PRIVATE_DNS from package com.android.captiveportallogin (protectionLevel=2 flags=0x38c8be45)\r\n      08-30 23:31:51.850 18319 18319 W Binder:18319_6: type=1400 audit(0.0:43): avc: denied { getopt } for scontext=u:r:system_server:s0 tcontext=u:r:shell:s0 tclass=unix_stream_socket permissive=0\r\n      08-30 23:31:52.339 18319 18418 D PackageManager: Instant App installer not found with android.intent.action.INSTALL_INSTANT_APP_PACKAGE\r\n      08-30 23:31:52.339 18319 18418 D PackageManager: Clear ephemeral installer activity\r\n      08-30 23:31:52.345 18319 18418 I PackageManager.DexOptimizer: Running dexopt (dexoptNeeded=1) on: /data/app/net.dot.Interop_StructMarshalling-ZF_Wc1074DAofa8LqBQPKg==/base.apk pkg=net.dot.Interop_StructMarshalling isa=x86_64 dexoptFlags=boot_complete,profile_guided,public,enable_hidden_api_checks targetFilter=speed-profile oatDir=/data/app/net.dot.Interop_StructMarshalling-ZF_Wc1074DAofa8LqBQPKg==/oat classLoaderContext=PCL[]\r\n      08-30 23:31:52.346  1779  9971 V installd: DexInv: --- BEGIN \u0027/data/app/net.dot.Interop_StructMarshalling-ZF_Wc1074DAofa8LqBQPKg==/base.apk\u0027 ---\r\n      08-30 23:31:52.364 19932 19932 W dex2oat : Unexpected CPU variant for X86 using defaults: x86_64\r\n      08-30 23:31:52.364 19932 19932 I dex2oat : /apex/com.android.runtime/bin/dex2oat --input-vdex-fd=-1 --output-vdex-fd=10 --resolve-startup-const-strings=true --max-image-block-size=524288 --compiler-filter=speed-profile --classpath-dir=/data/app/net.dot.Interop_StructMarshalling-ZF_Wc1074DAofa8LqBQPKg== --class-loader-context=PCL[] --generate-mini-debug-info --compact-dex-level=none --compilation-reason=install\r\n      08-30 23:31:52.366 19932 19932 I dex2oat : setting boot class path to /apex/com.android.runtime/javalib/core-oj.jar:/apex/com.android.runtime/javalib/core-libart.jar:/apex/com.android.runtime/javalib/okhttp.jar:/apex/com.android.runtime/javalib/bouncycastle.jar:/apex/com.android.runtime/javalib/apache-xml.jar:/system/framework/framework.jar:/system/framework/ext.jar:/system/framework/telephony-common.jar:/system/framework/voip-common.jar:/system/framework/ims-common.jar:/system/framework/android.test.base.jar\r\n      08-30 23:31:52.411 19932 19932 I dex2oat : Explicit concurrent copying GC freed 98(64KB) AllocSpace objects, 0(0B) LOS objects, 99% free, 712B/1536KB, paused 848us total 4.952ms\r\n      08-30 23:31:52.462 19932 19932 I dex2oat : dex2oat took 98.824ms (89.998ms cpu) (threads: 1) arena alloc=1000B (1000B) java alloc=16KB (17096B) native alloc=1765KB (1807360B) free=439KB (449536B)\r\n      08-30 23:31:52.465  1779  9971 V installd: DexInv: --- END \u0027/data/app/net.dot.Interop_StructMarshalling-ZF_Wc1074DAofa8LqBQPKg==/base.apk\u0027 (success) ---\r\n      08-30 23:31:52.466 18319 18418 V BackupManagerService: restoreAtInstall pkg=net.dot.Interop_StructMarshalling token=2 restoreSet=0\r\n      08-30 23:31:52.467 18319 18418 V BackupManagerService: Finishing install immediately\r\n      08-30 23:31:52.477 18310 18510 I netd    : trafficSetNetPermForUids(4, [10117]) \u003c0.10ms\u003e\r\n      08-30 23:31:52.492  1555 13240 D vold    : Remounting 10117 as mode default\r\n      08-30 23:31:52.502  1779  9971 E         : Couldn\u0027t opendir /data/app/vmdl436292097.tmp: No such file or directory\r\n      08-30 23:31:52.502  1779  9971 E installd: Failed to delete /data/app/vmdl436292097.tmp: No such file or directory\r\n      08-30 23:31:52.500 18319 18319 W Binder:18319_6: type=1400 audit(0.0:44): avc: denied { getopt } for scontext=u:r:system_server:s0 tcontext=u:r:shell:s0 tclass=unix_stream_socket permissive=0\r\n      08-30 23:31:52.597 18319 18319 I RoleManagerService: Granting default permissions...\r\n      08-30 23:31:52.500 18319 18319 I chatty  : uid=1000 system_server identical 1 line\r\n      08-30 23:31:52.500 18319 18319 W Binder:18319_6: type=1400 audit(0.0:46): avc: denied { getopt } for scontext=u:r:system_server:s0 tcontext=u:r:shell:s0 tclass=unix_stream_socket permissive=0\r\n      08-30 23:31:52.722 18319 18458 I InputReader: Reconfiguring input devices.  changes=0x00000010\r\n      08-30 23:31:52.725 18319 19248 W BroadcastQueue: Background execution not allowed: receiving Intent { act=android.intent.action.PACKAGE_ADDED dat=package:net.dot.Interop_StructMarshalling flg=0x4000010 (has extras) } to com.android.packageinstaller/.PackageInstalledReceiver\r\n      08-30 23:31:52.726 18319 18367 W BroadcastQueue: Background execution not allowed: receiving Intent { act=android.intent.action.PACKAGE_ADDED dat=package:net.dot.Interop_StructMarshalling flg=0x4000010 (has extras) } to com.android.gallery3d/.app.PackagesMonitor\r\n      08-30 23:31:52.726 18319 18367 W BroadcastQueue: Background execution not allowed: receiving Intent { act=android.intent.action.PACKAGE_ADDED dat=package:net.dot.Interop_StructMarshalling flg=0x4000010 (has extras) } to com.android.musicfx/.Compatibility$Receiver\r\n      08-30 23:31:52.780 18319 18366 W VoiceInteractionManagerService: no available voice recognition services found for user 0\r\n      08-30 23:31:52.793 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:52.793 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:52.956 18653 18653 D CarrierSvcBindHelper: No carrier app for: 0\r\n      08-30 23:31:52.995 18319 18358 W Looper  : Slow dispatch took 115ms android.fg h=android.os.Handler c=\u003crecycled PooledLambda@d9e233f\u003e m=0\r\n      08-30 23:31:53.007 18653 18653 D CarrierConfigLoader: mHandler: 9 phoneId: 0\r\n      08-30 23:31:53.040 18319 18319 W Looper  : Slow dispatch took 330ms main h=android.app.ActivityThread$H c=android.app.-$$Lambda$LoadedApk$ReceiverDispatcher$Args$_BumDX2UKsnxLVrE6UJsJZkotuA@ccc640c m=0\r\n      08-30 23:31:53.040 18319 18319 W Looper  : Slow delivery took 335ms main h=android.app.ActivityThread$H c=android.app.-$$Lambda$LoadedApk$ReceiverDispatcher$Args$_BumDX2UKsnxLVrE6UJsJZkotuA@6ca7155 m=0\r\n      08-30 23:31:53.049 18319 18335 I system_server: Background concurrent copying GC freed 62230(4303KB) AllocSpace objects, 44(2984KB) LOS objects, 42% free, 7726KB/13MB, paused 671us total 548.527ms\r\n      08-30 23:31:53.053 18319 18358 W Looper  : Slow delivery took 207ms android.fg h=android.os.Handler c=\u003crecycled PooledLambda@6dbb45b\u003e m=0\r\n      08-30 23:31:53.058 18319 18319 I Telecom : DefaultDialerCache: Refreshing default dialer for user 0: now com.android.dialer: CM.CCCR-\u003eCM.UECNT-\u003eCM.CCCR-\u003eCM.UECNT@AD8\r\n      08-30 23:31:53.060 18319 18319 V BackupManagerConstants: getFullBackupIntervalMilliseconds(...) returns 86400000\r\n      08-30 23:31:53.071 18319 18319 V BackupManagerConstants: getFullBackupRequiredNetworkType(...) returns 2\r\n      08-30 23:31:53.071 18319 18319 V BackupManagerConstants: getFullBackupRequireCharging(...) returns true\r\n      08-30 23:31:53.256 18319 18358 W Looper  : Drained\r\n      08-30 23:31:52.500  1759  1759 W adbd    : type=1400 audit(0.0:47): avc: denied { shutdown } for scontext=u:r:adbd:s0 tcontext=u:r:shell:s0 tclass=unix_stream_socket permissive=0\r\n      08-30 23:31:53.818 18319 18366 I RoleUserState: Wrote roles.xml successfully\r\n      08-30 23:31:54.026 19955 19955 D AndroidRuntime: \u003e\u003e\u003e\u003e\u003e\u003e START com.android.internal.os.RuntimeInit uid 2000 \u003c\u003c\u003c\u003c\u003c\u003c\r\n      08-30 23:31:54.035 19955 19955 E libc    : Access denied finding property \"persist.device_config.runtime_native_boot.enable_apex_image\"\r\n      08-30 23:31:54.035 19955 19955 I AndroidRuntime: Using default boot image\r\n      08-30 23:31:54.035 19955 19955 E libc    : Access denied finding property \"persist.device_config.runtime_native_boot.disable_lock_profiling\"\r\n      08-30 23:31:54.035 19955 19955 I AndroidRuntime: Leaving lock profiling enabled\r\n      08-30 23:31:54.036 19955 19955 E libc    : Access denied finding property \"persist.device_config.runtime_native_boot.enable_generational_cc\"\r\n      08-30 23:31:54.037 19955 19955 I app_process: Core platform API reporting enabled, enforcing=false\r\n      08-30 23:31:54.097 19955 19955 D ICU     : Time zone APEX file found: /apex/com.android.tzdata/etc/icu/icu_tzdata.dat\r\n      08-30 23:31:54.107 19955 19955 W app_process: Unexpected CPU variant for X86 using defaults: x86_64\r\n      08-30 23:31:54.108 19955 19955 I app_process: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:54.119 19955 19955 W app_process: JNI RegisterNativeMethods: attempt to register 0 native methods for android.media.AudioAttributes\r\n      08-30 23:31:54.122 19955 19955 D AndroidRuntime: Calling main entry com.android.commands.am.Am\r\n      08-30 23:31:54.132 18319 19351 I ActivityManager: Force stopping net.dot.Interop_StructMarshalling appid=10117 user=0: start instr\r\n      08-30 23:31:54.143 18319 18319 W Looper  : Drained\r\n      08-30 23:31:54.148 18300 18300 D Zygote  : Forked child process 19966\r\n      08-30 23:31:54.150 18319 18369 I ActivityManager: Start proc 19966:net.dot.Interop_StructMarshalling/u0a117 for added application net.dot.Interop_StructMarshalling\r\n      08-30 23:31:54.155 19966 19966 W ructMarshallin: Unexpected CPU variant for X86 using defaults: x86_64\r\n      08-30 23:31:54.177 19966 19966 I DOTNET  : JNI_OnLoad: JNI_OnLoad in pal_jni.c\r\n      08-30 23:31:54.177 19966 19966 D DOTNET  : GetOptionalClassGRef: optional class com/android/org/conscrypt/OpenSSLEngineImpl was not found\r\n      08-30 23:31:54.184 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.XmlSerializer.dll\r\n      08-30 23:31:54.185 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.Contracts.dll\r\n      08-30 23:31:54.185 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Compression.Brotli.dll\r\n      08-30 23:31:54.189 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Private.DataContractSerialization.dll\r\n      08-30 23:31:54.250 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.dll\r\n      08-30 23:31:54.252 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Collections.NonGeneric.dll\r\n      08-30 23:31:54.254 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Serialization.Xml.dll\r\n      08-30 23:31:54.255 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Collections.Immutable.dll\r\n      08-30 23:31:54.283 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.DiagnosticSource.dll\r\n      08-30 23:31:54.295 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/OSExtensions.dll\r\n      08-30 23:31:54.298 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Serialization.dll\r\n      08-30 23:31:54.299 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ValueTuple.dll\r\n      08-30 23:31:54.300 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.Process.dll\r\n      08-30 23:31:54.310 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.FileVersionInfo.dll\r\n      08-30 23:31:54.312 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Http.Json.dll\r\n      08-30 23:31:54.316 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.WebSockets.dll\r\n      08-30 23:31:54.321 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Pipes.AccessControl.dll\r\n      08-30 23:31:54.322 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Formats.Asn1.dll\r\n      08-30 23:31:54.329 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.DiaSymReader.Native.amd64.dll\r\n      08-30 23:31:54.477 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.DiaSymReader.Native.x86.dll\r\n      08-30 23:31:54.661 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/TestLibrary.dll\r\n      08-30 23:31:54.667 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.TypeExtensions.dll\r\n      08-30 23:31:54.668 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.dll\r\n      08-30 23:31:54.669 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Web.HttpUtility.dll\r\n      08-30 23:31:54.672 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.VisualBasic.Core.dll\r\n      08-30 23:31:54.710 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Linq.dll\r\n      08-30 23:31:54.724 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Newtonsoft.Json.dll\r\n      08-30 23:31:54.792 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Resources.ResourceManager.dll\r\n      08-30 23:31:54.795 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.FileSystem.DriveInfo.dll\r\n      08-30 23:31:54.799 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Linq.Expressions.dll\r\n      08-30 23:31:54.845 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/DelegatePInvokeTest.dll\r\n      08-30 23:31:54.849 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Primitives.dll\r\n      08-30 23:31:54.860 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.dll\r\n      08-30 23:31:54.863 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Overlapped.dll\r\n      08-30 23:31:54.864 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Transactions.Local.dll\r\n      08-30 23:31:54.873 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.InteropServices.RuntimeInformation.dll\r\n      08-30 23:31:54.874 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.Annotations.dll\r\n      08-30 23:31:54.882 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ObjectModel.dll\r\n      08-30 23:31:54.884 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Drawing.dll\r\n      08-30 23:31:54.885 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.WebSockets.Client.dll\r\n      08-30 23:31:54.888 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.XPath.dll\r\n      08-30 23:31:54.889 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.Diagnostics.Tracing.TraceEvent.dll\r\n      08-30 23:31:54.020 19955 19955 W app_process: type=1400 audit(0.0:48): avc: denied { read } for name=\"u:object_r:device_config_runtime_native_boot_prop:s0\" dev=\"tmpfs\" ino=6676 scontext=u:r:shell:s0 tcontext=u:object_r:device_config_runtime_native_boot_prop:s0 tclass=file permissive=0\r\n      08-30 23:31:54.030 19955 19955 I chatty  : uid=2000(shell) app_process identical 1 line\r\n      08-30 23:31:54.030 19955 19955 W app_process: type=1400 audit(0.0:50): avc: denied { read } for name=\"u:object_r:device_config_runtime_native_boot_prop:s0\" dev=\"tmpfs\" ino=6676 scontext=u:r:shell:s0 tcontext=u:object_r:device_config_runtime_native_boot_prop:s0 tclass=file permissive=0\r\n      08-30 23:31:55.059 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:55.059 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:55.073 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.175 18319 19984 I chatty  : uid=1000 system_server identical 4 lines\r\n      08-30 23:31:55.295 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.319 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Collections.Concurrent.dll\r\n      08-30 23:31:55.329 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.FileSystem.Watcher.dll\r\n      08-30 23:31:55.347 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.XPath.XDocument.dll\r\n      08-30 23:31:55.348 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.dll\r\n      08-30 23:31:55.349 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.CompilerServices.Unsafe.dll\r\n      08-30 23:31:55.350 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Collections.Specialized.dll\r\n      08-30 23:31:55.355 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.VisualBasic.dll\r\n      08-30 23:31:55.356 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.AccessControl.dll\r\n      08-30 23:31:55.360 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.InteropServices.dll\r\n      08-30 23:31:55.368 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.DispatchProxy.dll\r\n      08-30 23:31:55.373 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.dll\r\n      08-30 23:31:55.373 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Web.dll\r\n      08-30 23:31:55.374 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.Win32.Primitives.dll\r\n      08-30 23:31:55.375 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.dll\r\n      08-30 23:31:55.377 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ServiceProcess.dll\r\n      08-30 23:31:55.378 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Http.dll\r\n      08-30 23:31:55.385 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.387 18319 19984 I chatty  : uid=1000 system_server identical 1 line\r\n      08-30 23:31:55.389 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.459 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Extensions.dll\r\n      08-30 23:31:55.460 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Sockets.dll\r\n      08-30 23:31:55.469 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.488 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.WebProxy.dll\r\n      08-30 23:31:55.489 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.WebClient.dll\r\n      08-30 23:31:55.494 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Thread.dll\r\n      08-30 23:31:55.494 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.Encoding.Extensions.dll\r\n      08-30 23:31:55.495 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.HttpListener.dll\r\n      08-30 23:31:55.506 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.Encodings.Web.dll\r\n      08-30 23:31:55.509 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Mail.dll\r\n      08-30 23:31:55.532 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.537 18319 19984 I chatty  : uid=1000 system_server identical 3 lines\r\n      08-30 23:31:55.539 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.548 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Linq.Queryable.dll\r\n      08-30 23:31:55.553 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Resources.Reader.dll\r\n      08-30 23:31:55.554 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Resources.Writer.dll\r\n      08-30 23:31:55.556 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.AppContext.dll\r\n      08-30 23:31:55.557 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Data.dll\r\n      08-30 23:31:55.558 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Security.dll\r\n      08-30 23:31:55.575 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.NetworkInformation.dll\r\n      08-30 23:31:55.579 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.InteropServices.JavaScript.dll\r\n      08-30 23:31:55.582 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.SecureString.dll\r\n      08-30 23:31:55.583 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Console.dll\r\n      08-30 23:31:55.587 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.TypeConverter.dll\r\n      08-30 23:31:55.602 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.604 18319 19984 I chatty  : uid=1000 system_server identical 1 line\r\n      08-30 23:31:55.606 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:55.607 18319 19984 I PackageManager.DexOptimizer: Running dexopt (dexoptNeeded=1) on: /system/product/app/ModuleMetadata/ModuleMetadata.apk pkg=com.android.modulemetadata isa=x86_64 dexoptFlags=boot_complete,public,enable_hidden_api_checks targetFilter=verify oatDir=null classLoaderContext=PCL[]{PCL[/system/framework/android.hidl.manager-V1.0-java.jar]{PCL[/system/framework/android.hidl.base-V1.0-java.jar]}#PCL[/system/framework/android.hidl.base-V1.0-java.jar]}\r\n      08-30 23:31:55.608  1779  9971 V installd: DexInv: --- BEGIN \u0027/system/product/app/ModuleMetadata/ModuleMetadata.apk\u0027 ---\r\n      08-30 23:31:55.620 19985 19985 W dex2oat : Unexpected CPU variant for X86 using defaults: x86_64\r\n      08-30 23:31:55.627 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Private.Uri.dll\r\n      08-30 23:31:55.635 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Emit.ILGeneration.dll\r\n      08-30 23:31:55.635 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.Linq.dll\r\n      08-30 23:31:55.636 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.FileSystem.dll\r\n      08-30 23:31:55.637 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Configuration.dll\r\n      08-30 23:31:55.638 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.EventBasedAsync.dll\r\n      08-30 23:31:55.640 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Extensions.dll\r\n      08-30 23:31:55.640 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Private.CoreLib.dll\r\n      08-30 23:31:55.933 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.Json.dll\r\n      08-30 23:31:55.970 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Drawing.Primitives.dll\r\n      08-30 23:31:55.974 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.NameResolution.dll\r\n      08-30 23:31:55.977 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.execution.dotnet.dll\r\n      08-30 23:31:56.001 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Transactions.dll\r\n      08-30 23:31:56.002 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.ReaderWriter.dll\r\n      08-30 23:31:56.003 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Compression.FileSystem.dll\r\n      08-30 23:31:56.004 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.assert.dll\r\n      08-30 23:31:56.015 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Serialization.Json.dll\r\n      08-30 23:31:56.015 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Compression.dll\r\n      08-30 23:31:56.025 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.DataAnnotations.dll\r\n      08-30 23:31:56.026 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Serialization.Formatters.dll\r\n      08-30 23:31:56.029 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Private.Xml.Linq.dll\r\n      08-30 23:31:56.039 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Dia2Lib.dll\r\n      08-30 23:31:56.047 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.ServicePoint.dll\r\n      08-30 23:31:56.048 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.RegularExpressions.dll\r\n      08-30 23:31:56.075 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.FileSystem.AccessControl.dll\r\n      08-30 23:31:56.077 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/TraceReloggerLib.dll\r\n      08-30 23:31:56.079 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/ReversePInvokeTest.dll\r\n      08-30 23:31:56.083 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.dll\r\n      08-30 23:31:56.085 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.abstractions.dll\r\n      08-30 23:31:56.087 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Data.DataSetExtensions.dll\r\n      08-30 23:31:56.088 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/netstandard.dll\r\n      08-30 23:31:56.092 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Channels.dll\r\n      08-30 23:31:56.095 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.CSharp.dll\r\n      08-30 23:31:56.118 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.IsolatedStorage.dll\r\n      08-30 23:31:56.121 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Globalization.Calendars.dll\r\n      08-30 23:31:56.122 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.dll\r\n      08-30 23:31:56.214 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Timer.dll\r\n      08-30 23:31:56.215 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Emit.dll\r\n      08-30 23:31:56.219 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Loader.dll\r\n      08-30 23:31:56.219 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Handles.dll\r\n      08-30 23:31:56.220 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Serialization.Primitives.dll\r\n      08-30 23:31:56.222 19985 19985 I dex2oat : /apex/com.android.runtime/bin/dex2oat --input-vdex-fd=-1 --output-vdex-fd=10 --resolve-startup-const-strings=true --max-image-block-size=524288 --compiler-filter=verify --classpath-dir=/system/product/app/ModuleMetadata --class-loader-context=PCL[]{PCL[/system/framework/android.hidl.manager-V1.0-java.jar]{PCL[/system/framework/android.hidl.base-V1.0-java.jar]}#PCL[/system/framework/android.hidl.base-V1.0-java.jar]} --generate-mini-debug-info --compact-dex-level=none --compilation-reason=boot\r\n      08-30 23:31:56.224 19985 19985 I dex2oat : setting boot class path to /apex/com.android.runtime/javalib/core-oj.jar:/apex/com.android.runtime/javalib/core-libart.jar:/apex/com.android.runtime/javalib/okhttp.jar:/apex/com.android.runtime/javalib/bouncycastle.jar:/apex/com.android.runtime/javalib/apache-xml.jar:/system/framework/framework.jar:/system/framework/ext.jar:/system/framework/telephony-common.jar:/system/framework/voip-common.jar:/system/framework/ims-common.jar:/system/framework/android.test.base.jar\r\n      08-30 23:31:56.232 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.StackTrace.dll\r\n      08-30 23:31:56.233 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.Csp.dll\r\n      08-30 23:31:56.234 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.Debug.dll\r\n      08-30 23:31:56.235 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.core.dll\r\n      08-30 23:31:56.244 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Tasks.Extensions.dll\r\n      08-30 23:31:56.246 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.Algorithms.dll\r\n      08-30 23:31:56.247 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Pipes.dll\r\n      08-30 23:31:56.251 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.XmlDocument.dll\r\n      08-30 23:31:56.253 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.Encoding.dll\r\n      08-30 23:31:56.253 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.DiaSymReader.Native.arm.dll\r\n      08-30 23:31:56.373 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.X509Certificates.dll\r\n      08-30 23:31:56.373 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Numerics.dll\r\n      08-30 23:31:56.374 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.Win32.Registry.dll\r\n      08-30 23:31:56.375 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Formats.Tar.dll\r\n      08-30 23:31:56.384 19966 19976 I ructMarshallin: Background young concurrent copying GC freed 36379(4420KB) AllocSpace objects, 0(0B) LOS objects, 84% free, 1120KB/7264KB, paused 769us total 228.830ms\r\n      08-30 23:31:56.388 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Principal.dll\r\n      08-30 23:31:56.388 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Metadata.dll\r\n      08-30 23:31:56.419 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.CodeAnalysis.CSharp.dll\r\n      08-30 23:31:56.884 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/CommandLine.dll\r\n      08-30 23:31:56.910 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Primitives.dll\r\n      08-30 23:31:56.911 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Claims.dll\r\n      08-30 23:31:56.917 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ServiceModel.Web.dll\r\n      08-30 23:31:56.917 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Globalization.dll\r\n      08-30 23:31:56.918 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Text.Encoding.CodePages.dll\r\n      08-30 23:31:57.145 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.OpenSsl.dll\r\n      08-30 23:31:57.159 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/MarshalStructAsLayoutSeq.dll\r\n      08-30 23:31:57.220 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/WindowsBase.dll\r\n      08-30 23:31:57.222 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Newtonsoft.Json.Bson.dll\r\n      08-30 23:31:57.241 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.DotNet.XUnitExtensions.dll\r\n      08-30 23:31:57.245 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Buffers.dll\r\n      08-30 23:31:57.260 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Ping.dll\r\n      08-30 23:31:57.268 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.TraceSource.dll\r\n      08-30 23:31:57.273 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Principal.Windows.dll\r\n      08-30 23:31:57.274 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Tasks.Dataflow.dll\r\n      08-30 23:31:57.287 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Windows.dll\r\n      08-30 23:31:57.289 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.Tools.dll\r\n      08-30 23:31:57.289 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.CompilerServices.VisualC.dll\r\n      08-30 23:31:57.290 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.runner.reporters.netcoreapp10.dll\r\n      08-30 23:31:57.298 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Dynamic.Runtime.dll\r\n      08-30 23:31:57.298 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.FileSystem.Primitives.dll\r\n      08-30 23:31:57.299 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Globalization.Extensions.dll\r\n      08-30 23:31:57.299 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.Primitives.dll\r\n      08-30 23:31:57.301 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.UnmanagedMemoryStream.dll\r\n      08-30 23:31:57.301 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.dll\r\n      08-30 23:31:57.302 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Collections.dll\r\n      08-30 23:31:57.310 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Tasks.Parallel.dll\r\n      08-30 23:31:57.315 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.XDocument.dll\r\n      08-30 23:31:57.316 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.Encoding.dll\r\n      08-30 23:31:57.316 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Quic.dll\r\n      08-30 23:31:57.325 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Security.Cryptography.Cng.dll\r\n      08-30 23:31:57.325 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.Requests.dll\r\n      08-30 23:31:57.337 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Xml.Serialization.dll\r\n      08-30 23:31:57.338 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.dll\r\n      08-30 23:31:57.340 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Reflection.Emit.Lightweight.dll\r\n      08-30 23:31:57.343 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.TextWriterTraceListener.dll\r\n      08-30 23:31:57.344 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Diagnostics.Tracing.dll\r\n      08-30 23:31:57.345 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.Compression.ZipFile.dll\r\n      08-30 23:31:57.349 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.ThreadPool.dll\r\n      08-30 23:31:57.350 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.IO.MemoryMappedFiles.dll\r\n      08-30 23:31:57.353 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.runner.utility.netcoreapp10.dll\r\n      08-30 23:31:57.374 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Numerics.Vectors.dll\r\n      08-30 23:31:57.375 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Core.dll\r\n      08-30 23:31:57.376 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/NestedStruct.dll\r\n      08-30 23:31:57.376 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.ComponentModel.Primitives.dll\r\n      08-30 23:31:57.379 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Threading.Tasks.dll\r\n      08-30 23:31:57.379 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Data.Common.dll\r\n      08-30 23:31:57.540 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Net.WebHeaderCollection.dll\r\n      08-30 23:31:57.557 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Intrinsics.dll\r\n      08-30 23:31:57.558 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.Diagnostics.FastSerialization.dll\r\n      08-30 23:31:57.565 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/xunit.console.dll\r\n      08-30 23:31:57.605 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/mscorlib.dll\r\n      08-30 23:31:57.610 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Memory.dll\r\n      08-30 23:31:57.615 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Linq.Parallel.dll\r\n      08-30 23:31:57.644 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Private.Xml.dll\r\n      08-30 23:31:57.779 19985 19985 I dex2oat : dex2oat took 2.159s (30.139ms cpu) (threads: 1) arena alloc=0B (0B) java alloc=16KB (16400B) native alloc=1680KB (1721184B) free=491KB (502944B)\r\n      08-30 23:31:58.125 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.CodeAnalysis.dll\r\n      08-30 23:31:58.414 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/System.Runtime.Numerics.dll\r\n      08-30 23:31:58.423 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.CodeAnalysis.VisualBasic.dll\r\n      08-30 23:31:58.461  1779  9971 V installd: DexInv: --- END \u0027/system/product/app/ModuleMetadata/ModuleMetadata.apk\u0027 (success) ---\r\n      08-30 23:31:58.463 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:58.465 18319 19984 I chatty  : uid=1000 system_server identical 1 line\r\n      08-30 23:31:58.467 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:58.525 18319 18335 I system_server: Background concurrent copying GC freed 18696(1320KB) AllocSpace objects, 10(328KB) LOS objects, 42% free, 7196KB/12MB, paused 204.696ms total 740.668ms\r\n      08-30 23:31:58.528 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:58.777 18319 19984 I chatty  : uid=1000 system_server identical 47 lines\r\n      08-30 23:31:58.778 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:58.842 19966 19983 I DOTNET  : Extracting asset to //data/user/0/net.dot.Interop_StructMarshalling/files/Microsoft.DiaSymReader.Native.arm64.dll\r\n      08-30 23:31:58.863 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:58.880 18319 19984 I chatty  : uid=1000 system_server identical 5 lines\r\n      08-30 23:31:59.004 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.063 18319 19351 D WificondControl: Scan result ready event\r\n      08-30 23:31:59.107 19966 19983 I DOTNET  : MonoRunner initialize,, entryPointLibName=NestedStruct.dll\r\n      08-30 23:31:59.108 19966 19983 D DOTNET  : file_path: /data/user/0/net.dot.Interop_StructMarshalling/files/runtimeconfig.bin\r\n      08-30 23:31:59.124 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.148 18319 19984 I chatty  : uid=1000 system_server identical 5 lines\r\n      08-30 23:31:59.149 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.164 19966 19983 D DOTNET  : assembly_preload_hook: System.Private.CoreLib (null) /data/user/0/net.dot.Interop_StructMarshalling/files\r\n      08-30 23:31:59.306 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.505 18319 18360 I DropBoxManagerService: add tag=system_server_strictmode isTagEnabled=true flags=0x2\r\n      08-30 23:31:59.449 18319 19984 I chatty  : uid=1000 system_server identical 5 lines\r\n      08-30 23:31:59.569 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.761 19966 19983 D DOTNET  : assembly_preload_hook: NestedStruct.dll (null) /data/user/0/net.dot.Interop_StructMarshalling/files\r\n      08-30 23:31:59.762 19966 19983 D DOTNET  : Executable: NestedStruct.dll\r\n      08-30 23:31:59.762 19966 19983 D DOTNET  : assembly_preload_hook: System.Runtime  /data/user/0/net.dot.Interop_StructMarshalling/files\r\n      08-30 23:31:59.766 19966 19983 D DOTNET  : assembly_preload_hook: System.Console  /data/user/0/net.dot.Interop_StructMarshalling/files\r\n      08-30 23:31:59.766 19966 19983 D DOTNET  : assembly_preload_hook: System.Runtime.InteropServices  /data/user/0/net.dot.Interop_StructMarshalling/files\r\n      08-30 23:31:59.866 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.870 18319 19984 I system_server: The ClassLoaderContext is a special shared library.\r\n      08-30 23:31:59.935 18319 19984 I BackgroundDexOptService: Pinning optimized code {com.android.modulemetadata}\r\n      08-30 23:31:59.595 18319 18360 I chatty  : uid=1000(system) android.io identical 4 lines\r\n      08-30 23:31:59.596 18319 18360 I DropBoxManagerService: add tag=system_server_strictmode isTagEnabled=true flags=0x2\r\n      08-30 23:31:59.939 18319 18319 I ActivityManager: Killing 19611:com.android.camera2/u0a115 (adj 985): empty #17\r\n      08-30 23:31:59.944 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:59.944 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:59.947 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:59.947 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:59.950 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:31:59.950 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:31:59.982 18300 18300 I Zygote  : Process 19611 exited due to signal 9 (Killed)\r\n      08-30 23:32:00.022 18319 18370 I libprocessgroup: Successfully killed process cgroup uid 10115 pid 19611 in 80ms\r\n      08-30 23:32:00.078 18550 18550 D KeyguardClockSwitch: Updating clock: 1132\r\n      08-30 23:32:00.754 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:32:00.754 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:32:00.756 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:32:00.756 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:32:00.758 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:32:00.758 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:32:01.103 19966 19983 E mono    : \r\n      08-30 23:32:01.103 19966 19983 E mono    : Unhandled Exception:\r\n      08-30 23:32:01.103 19966 19983 E mono    : System.DllNotFoundException: MarshalStructAsParam\r\n      08-30 23:32:01.103 19966 19983 E mono    :    at Managed.Main()\r\n      08-30 23:32:01.104 19966 19983 E DOTNET  : UnhandledException: System.DllNotFoundException MarshalStructAsParam    at Managed.Main()\r\n      08-30 23:32:01.153 18300 18300 I Zygote  : Process 19966 exited cleanly (1)\r\n      08-30 23:32:01.154 18319 19352 I ActivityManager: Process net.dot.Interop_StructMarshalling (pid 19966) has died: fore FGS \r\n      08-30 23:32:01.156 18319 19352 W ActivityManager: Crash of app net.dot.Interop_StructMarshalling running instrumentation ComponentInfo{net.dot.Interop_StructMarshalling/net.dot.MonoRunner}\r\n      08-30 23:32:01.158 18319 19352 I ActivityManager: Force stopping net.dot.Interop_StructMarshalling appid=10117 user=0: finished inst\r\n      08-30 23:32:01.163 18319 18366 E memtrack: Couldn\u0027t load memtrack module\r\n      08-30 23:32:01.163 18319 18366 W android.os.Debug: failed to get memory consumption info: -1\r\n      08-30 23:32:01.169 18319 19993 W Binder  : Outgoing transactions from this process must be FLAG_ONEWAY\r\n      08-30 23:32:01.169 18319 19993 W Binder  : java.lang.Throwable\r\n      08-30 23:32:01.169 18319 19993 W Binder  : \tat android.os.BinderProxy.transact(BinderProxy.java:480)\r\n      08-30 23:32:01.169 18319 19993 W Binder  : \tat android.app.IInstrumentationWatcher$Stub$Proxy.instrumentationFinished(IInstrumentationWatcher.java:205)\r\n      08-30 23:32:01.169 18319 19993 W Binder  : \tat com.android.server.am.InstrumentationReporter$MyThread.run(InstrumentationReporter.java:86)\r\n      08-30 23:32:01.170 19955 19955 D AndroidRuntime: Shutting down VM\r\n      08-30 23:32:01.192 18319 18370 I libprocessgroup: Successfully killed process cgroup uid 10117 pid 19966 in 40ms\r\n      Expected: True\r\n      Actual:   False\r\n      Stack Trace:\r\n           at Interop_StructMarshalling._PInvoke_NestedStruct_NestedStruct_._PInvoke_NestedStruct_NestedStruct_sh()\r\n           at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)\r\n           at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)\r\n      Output:\r\n        \r\n        Return code:      80\r\n        Raw output file:      /datadisks/disk1/work/B3BF09F6/w/BDEF0A2D/uploads/Reports/Interop.StructMarshalling/PInvoke/NestedStruct/NestedStruct.output.txt\r\n        Raw output:\r\n```\n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAuthor:\u003c/th\u003e\n    \u003ctd\u003efanyang-mono\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAssignees:\u003c/th\u003e\n    \u003ctd\u003efanyang-mono\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eLabels:\u003c/th\u003e\n    \u003ctd\u003e\n\n`os-android`, `area-Interop-mono`\n\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eMilestone:\u003c/th\u003e\n    \u003ctd\u003e9.0.0\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\u003c/details\u003e",
                                           "updatedAt":  "2023-08-31T12:16:24Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5lbd0L",
                                           "createdAt":  "2023-08-31T19:56:30Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkoritzinsky",
                                           "body":  "Yes this is a known test infra issue for mobile platforms. All tests with native assets are currently disabled on mobile platforms.",
                                           "updatedAt":  "2023-08-31T19:56:30Z"
                                       }
                                   ],
                         "totalCount":  2
                     },
        "title":  "[Android][Test] Interop test: Native libraries are missing or incorrectly packaged in the app",
        "labels":  [
                       "disabled-test",
                       "test-bug",
                       "os-android",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/92380",
        "createdAt":  "2023-09-20T21:42:25Z",
        "number":  92380,
        "author":  "aienabled",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-12-12T16:59:45Z",
        "body":  "### Description\r\n\r\nThe strings are not considered as blittable when defined in Pinvoke callbacks.\r\nhttps://github.com/dotnet/runtime/blob/a5b75b8179d7db4ff720e19233d2b99fd15b94f0/src/tasks/WasmAppBuilder/PInvokeCollector.cs#L170-L176\r\nhttps://github.com/dotnet/runtime/blob/a5b75b8179d7db4ff720e19233d2b99fd15b94f0/src/tasks/WasmAppBuilder/PInvokeCollector.cs#L141-L142\r\n\r\n### Reproduction Steps\r\n\r\n```cs\r\nprivate delegate void Callback_RegisterType(string typeName);\r\nprivate static Callback_RegisterType _registerType = RegisterType;\r\n\r\n[MonoPInvokeCallback(typeof(Callback_RegisterType))]\r\nprivate static void RegisterType(string typeName)\r\n{\r\n}\r\n```\r\n\r\n### Expected behavior\r\n\r\nThe above code should compile.\r\n\r\n### Actual behavior\r\n\r\nWasmApp.Native.targets(290,5): Error : Parameter types of pinvoke callback method \u0027System.Void RegisterType(System.String)\u0027 needs to be blittable.\r\n\r\n### Regression?\r\n\r\n_No response_\r\n\r\n### Known Workarounds\r\n\r\n_No response_\r\n\r\n### Configuration\r\n\r\nTested on .NET 7.0.11. \"WebAssembly Browser App\" project type.\r\n\r\n### Other information\r\n\r\nI\u0027m working on porting a UI library to WASM and its C# SDK makes extensive use of strings in Pinvoke callbacks (dozens of methods). The C# SDK has no such error when building for other platforms (including WebGL in Unity).",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOhZcXCw==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc5nCXuW",
                                           "createdAt":  "2023-09-21T02:30:13Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Tagging subscribers to \u0027arch-wasm\u0027: @lewing\nSee info in area-owners.md if you want to be subscribed.\n\u003cdetails\u003e\n\u003csummary\u003eIssue Details\u003c/summary\u003e\n\u003chr /\u003e\n\n### Description\r\n\r\nThe strings are not considered as blittable when defined in Pinvoke callbacks.\r\nhttps://github.com/dotnet/runtime/blob/a5b75b8179d7db4ff720e19233d2b99fd15b94f0/src/tasks/WasmAppBuilder/PInvokeCollector.cs#L170-L176\r\nhttps://github.com/dotnet/runtime/blob/a5b75b8179d7db4ff720e19233d2b99fd15b94f0/src/tasks/WasmAppBuilder/PInvokeCollector.cs#L141-L142\r\n\r\n### Reproduction Steps\r\n\r\n```cs\r\nprivate delegate void Callback_RegisterType(string typeName);\r\nprivate static Callback_RegisterType _registerType = RegisterType;\r\n\r\n[MonoPInvokeCallback(typeof(Callback_RegisterType))]\r\nprivate static void RegisterType(string typeName)\r\n{\r\n}\r\n```\r\n\r\n### Expected behavior\r\n\r\nThe above code should compile.\r\n\r\n### Actual behavior\r\n\r\nWasmApp.Native.targets(290,5): Error : Parameter types of pinvoke callback method \u0027System.Void RegisterType(System.String)\u0027 needs to be blittable.\r\n\r\n### Regression?\r\n\r\n_No response_\r\n\r\n### Known Workarounds\r\n\r\n_No response_\r\n\r\n### Configuration\r\n\r\nTested on .NET 7.0.11. \"WebAssembly Browser App\" project type.\r\n\r\n### Other information\r\n\r\nI\u0027m working on porting a UI library to WASM and its C# SDK makes extensive use of strings in Pinvoke callbacks (dozens of methods). The C# SDK has no such error when building for other platforms (including WebGL in Unity).\n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAuthor:\u003c/th\u003e\n    \u003ctd\u003eaienabled\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eAssignees:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eLabels:\u003c/th\u003e\n    \u003ctd\u003e\n\n`arch-wasm`, `untriaged`, `needs-area-label`\n\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003cth align=\"left\"\u003eMilestone:\u003c/th\u003e\n    \u003ctd\u003e-\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\u003c/details\u003e",
                                           "updatedAt":  "2023-09-21T02:30:13Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5nC0P6",
                                           "createdAt":  "2023-09-21T04:48:42Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "radical",
                                           "body":  "cc @maraf ",
                                           "updatedAt":  "2023-09-21T04:48:42Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5tt31h",
                                           "createdAt":  "2023-12-05T12:55:56Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "Lurler",
                                           "body":  "Any news about this? This is extremely important for us.",
                                           "updatedAt":  "2023-12-05T12:55:56Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5tveF8",
                                           "createdAt":  "2023-12-05T16:34:23Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "kg",
                                           "body":  "Strings aren\u0027t blittable, see https://learn.microsoft.com/en-us/dotnet/framework/interop/blittable-and-non-blittable-types\r\n\r\nI assume what you want is for strings to be accepted as arguments to pinvoke callbacks.\r\n\r\nAre you unable to pass char pointers instead by pinning your strings? (I\u0027m aware that doing this would be an annoying change to make, so I\u0027m not discounting the value of adding support for strings as arguments)",
                                           "updatedAt":  "2023-12-05T16:34:23Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5ufXaH",
                                           "createdAt":  "2023-12-13T11:10:17Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "dp901",
                                           "body":  "This is an issue that has been blocking us for a while. Is there any chance it could be addressed sooner?",
                                           "updatedAt":  "2023-12-13T11:10:17Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5ufl9Q",
                                           "createdAt":  "2023-12-13T11:51:49Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "aienabled",
                                           "body":  "@kg\r\n\u003e Strings aren\u0027t blittable\r\n\r\nIndeed, but there is no problem using the code as shown in the snippet above on other platforms. I suppose the strings are automatically converted to char pointers.\r\n\r\n\u003e I assume what you want is for strings to be accepted as arguments to pinvoke callbacks.\r\n\r\nYes, exactly.\r\n\r\n\u003e Are you unable to pass char pointers instead by pinning your strings? (I\u0027m aware that doing this would be an annoying change to make, so I\u0027m not discounting the value of adding support for strings as arguments)\r\n\r\nThat\u0027s a good idea though it would be quite cumbersome to maintain a fork considering there are dozens of methods where a string is passed in a callback. However, when I attempted to rewrite the code to use char pointers, I encountered another compilation problem (the delegate/callback pointer declared with `[UnmanagedFunctionPointer(CallingConvention.Cdecl)]` is also not blittable, again this is not an issue on other platforms; there is a good dozen of such cases in the library I\u0027ve tried to fork). I suppose we will have to wait until .NET WASM becomes more mature.",
                                           "updatedAt":  "2023-12-13T11:52:56Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5uhTII",
                                           "createdAt":  "2023-12-13T16:07:59Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHODPvg4Q==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "HEART",
                                                                               "user":  "aienabled",
                                                                               "createdAt":  "2023-12-13T21:51:26Z"
                                                                           },
                                                                           {
                                                                               "content":  "HEART",
                                                                               "user":  "Lurler",
                                                                               "createdAt":  "2023-12-15T14:59:56Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  2
                                                         },
                                           "author":  "kg",
                                           "body":  "\u003e @kg\r\n\u003e \r\n\u003e \u003e Strings aren\u0027t blittable\r\n\u003e \r\n\u003e Indeed, but there is no problem using the code as shown in the snippet above on other platforms. I suppose the strings are automatically converted to char pointers.\r\n\r\nJust to provide some more clarity: WASM has a different ABI from most other platforms (x64, ARM, etc) and is a platform with unique constraints. As a result we aren\u0027t able to use the regular p/invoke implementations from mono or CoreCLR as-is on this target. That\u0027s where warnings about blittable types and such are coming from - there is custom WASM-specific tooling that is designed to generate adapter code and tables that are used to make p/invoke work at all.\r\n\r\nWe\u0027re in the process of making improvements in this area, so it\u0027s possible you may see things start working by the time 9 previews come out. This specific feature (passing strings and getting them auto-converted to temporary char pointers) is not something we\u0027d be able to backport to 8 for you - it\u0027s too big - but we\u0027re definitely aware of the need for it.\r\n\r\nFunction pointers are another known issue and we are hoping to fix that one in 9. If you cast the function pointer to IntPtr and pass it that way, it should work.",
                                           "updatedAt":  "2023-12-13T16:07:59Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6FlxcL",
                                           "createdAt":  "2024-07-20T19:35:55Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "Thraka",
                                           "body":  "@kg 9 is getting close! :)",
                                           "updatedAt":  "2024-07-20T19:35:55Z"
                                       }
                                   ],
                         "totalCount":  8
                     },
        "title":  "(Unmanaged) Strings in callbacks are not considered as blittable by WasmAppBuilder",
        "labels":  [
                       "arch-wasm",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/95973",
        "createdAt":  "2023-12-07T06:16:57Z",
        "number":  95973,
        "author":  "ExLuzZziVo",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  "Y3Vyc29yOnYyOpHOC2auGw==",
                          "nodes":  [
                                        {
                                            "content":  "THUMBS_UP",
                                            "user":  "BurkusCat",
                                            "createdAt":  "2024-03-09T21:29:03Z"
                                        }
                                    ],
                          "totalCount":  1
                      },
        "updatedAt":  "2024-09-11T20:25:04Z",
        "body":  "### Description\n\nThe Android app crashes when you click the back button on the second navigation page after publishing apk. In debug mode back navigation works as expected. The error appeared after updating .NET MAUI from .net7 to 8.\r\n\r\nThe error can be reproduced in a newly created project.\r\n\r\nMy publish settings:\r\n```\r\n\u003cPropertyGroup Condition=\"\u0027$(Configuration)|$(TargetFramework)|$(Platform)\u0027==\u0027Release|net8.0-android|AnyCPU\u0027\"\u003e\r\n        \u003cEnableTrimAnalyzer\u003etrue\u003c/EnableTrimAnalyzer\u003e\r\n        \u003cPublishTrimmed\u003etrue\u003c/PublishTrimmed\u003e\r\n        \u003cTrimMode\u003epartial\u003c/TrimMode\u003e\r\n        \u003cEnableLLVM\u003eTrue\u003c/EnableLLVM\u003e\r\n        \u003cAndroidPackageFormat\u003eapk\u003c/AndroidPackageFormat\u003e\r\n        \u003cAndroidLinkTool\u003er8\u003c/AndroidLinkTool\u003e\r\n        \u003cRunAOTCompilation\u003etrue\u003c/RunAOTCompilation\u003e\r\n        \u003cAndroidStripILAfterAOT\u003efalse\u003c/AndroidStripILAfterAOT\u003e\r\n        \u003cAndroidEnableProfiledAot\u003etrue\u003c/AndroidEnableProfiledAot\u003e\r\n        \u003cAndroidCreatePackagePerAbi\u003efalse\u003c/AndroidCreatePackagePerAbi\u003e\r\n\u003c/PropertyGroup\u003e\r\n```\n\n### Steps to Reproduce\n\n1. Create a new .NET MAUI App\r\n2. Implement navigation using NavigationPage as MainPage in App.xaml.cs instead of Shell\r\n3. Create the second page to navigate to\r\n4. On Main page create button that navigates to Second page\r\n5. Run in Debug mode. Pressing back button on Second page works\r\n6. Publish app. Pressing back button on Second page causes app crash\n\n### Link to public reproduction project repository\n\n_No response_\n\n### Version with bug\n\n8.0.3\n\n### Is this a regression from previous behavior?\n\nYes, this used to work in .NET MAUI\n\n### Last version that worked well\n\n7.0.101\n\n### Affected platforms\n\nAndroid\n\n### Affected platform versions\n\nAndroid 8.1\n\n### Did you find any workaround?\n\n_No response_\n\n### Relevant log output\n\n```shell\n[ERROR] FATAL UNHANDLED EXCEPTION: Java.Lang.IllegalArgumentException: No destination with ID 5 is on the NavController\u0027s back stack. The current destination is FragmentNavigator$Destination(0x1) class=crc6452ffdc5b34af3a0f.NavigationViewFragment\r\n                                                                                                       at Java.Interop.JniEnvironment.InstanceMethods.CallObjectMethod(JniObjectReference , JniMethodInfo , JniArgumentValue* )\r\n                                                                                                       at Java.Interop.JniPeerMembers.JniInstanceMethods.InvokeVirtualObjectMethod(String , IJavaPeerable , JniArgumentValue* )\r\n                                                                                                       at AndroidX.Navigation.NavController.GetBackStackEntry(Int32 )\r\n                                                                                                      --- End of managed Java.Lang.IllegalArgumentException stack trace ---\r\n                                                                                                    java.lang.IllegalArgumentException: No destination with ID 5 is on the NavController\u0027s back stack. The current destination is FragmentNavigator$Destination(0x1) class=crc6452ffdc5b34af3a0f.NavigationViewFragment\r\n                                                                                                    \tat androidx.navigation.NavController.getBackStackEntry(NavController.kt:2411)\r\n                                                                                                    \tat crc6488302ad6e9e4df1a.MauiAppCompatActivity.n_onBackPressed(Native Method)\r\n                                                                                                    \tat crc6488302ad6e9e4df1a.MauiAppCompatActivity.onBackPressed(MauiAppCompatActivity.java:73)\r\n                                                                                                    \tat android.app.Activity.onKeyUp(Activity.java:3031)\r\n                                                                                                    \tat android.view.KeyEvent.dispatch(KeyEvent.java:2734)\r\n                                                                                                    \tat androidx.core.view.KeyEventDispatcher.activitySuperDispatchKeyEventPre28(KeyEventDispatcher.java:143)\r\n                                                                                                    \tat androidx.core.view.KeyEventDispatcher.dispatchKeyEvent(KeyEventDispatcher.java:89)\r\n                                                                                                    \tat androidx.core.app.ComponentActivity.dispatchKeyEvent(ComponentActivity.java:144)\r\n                                                                                                    \tat androidx.appcompat.app.AppCompatActivity.dispatchKeyEvent(AppCompatActivity.java:604)\r\n                                                                                                    \tat androidx.appcompat.view.WindowCallbackWrapper.dispatchKeyEvent(WindowCallbackWrapper.java:60)\r\n                                                                                                    \tat androidx.appcompat.app.AppCompatDelegateImpl$AppCompatWindowCallback.dispatchKeyEvent(AppCompatDelegateImpl.java:3413)\r\n                                                                                                    \tat com.android.internal.policy.DecorView.dispatchKeyEvent(DecorView.java:355)\r\n                                                                                                    \tat android.view.ViewRootImpl$ViewPostImeInputStage.processKeyEvent(ViewRootImpl.java:4901)\r\n                                                                                                    \tat android.view.ViewRootImpl$ViewPostImeInputStage.onProcess(ViewRootImpl.java:4773)\r\n                                                                                                    \tat android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:4309)\r\n                                                                                                    \tat android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:4362)\r\n                                                                                                    \tat android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:4328)\r\n                                                                                                    \tat android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:4455)\r\n                                                                                                    \tat android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:4336)\r\n                                                                                                    \tat android.view.ViewRootImpl$AsyncInputStage.apply(ViewRootImpl.java:4512)\r\n                                                                                                    \tat android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:4309)\r\n                                                                                                    \tat android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:4362)\r\n                                                                                                    \tat android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:4328)\r\n                                                                                                    \tat android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:4336)\r\n                                                                                                    \tat android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:4309)\r\n                                                                                                    \tat android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:4362)\r\n                                                                                                    \tat android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:4328)\r\n                                                                                                    \tat android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:4488)\r\n                                                                                                    \tat android.view.ViewRootImpl$ImeInputStage.onFinishedInputEvent(ViewRootImpl.java:4655)\r\n                                                                                                    \tat android.view.inputmethod.InputMethodManager$PendingEvent.run(InputMethodManager.java:2435)\r\n                                                                                                    \tat android.view.inputmethod.InputMethodManager.invokeFinishedInputEventCallback(InputMethodManager.java:1998)\r\n                                                                                                    \tat android.view.inputmethod.InputMethodManager.finishedInputEvent(InputMethodManager.java:1989)\r\n                                                                                                    \tat android.view.inputmethod.InputMethodManager$ImeInputEventSender.onInputEventFinished(InputMethodManager.java:2412)\r\n                                                                                                    \tat android.view.InputEventSender.dispatchInputEventFinished(InputEventSender.java:141)\r\n                                                                                                    \tat android.os.MessageQueue.nativePollOnce(Native Method)\r\n                                                                                                    \tat android.os.MessageQueue.next(MessageQueue.java:325)\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:142)\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:6548)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:43\n```\n",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHObop0zQ==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc5uinTA",
                                           "createdAt":  "2023-12-07T11:08:01Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "PureWeen",
                                           "body":  "@jonathanpeppers thoughts?",
                                           "updatedAt":  "2023-12-07T11:08:01Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5uinTF",
                                           "createdAt":  "2023-12-07T14:42:03Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jonathanpeppers",
                                           "body":  "If you enable `\u003cAndroidLinkTool\u003er8\u003c/AndroidLinkTool\u003e`, then you\u0027ll have to do some work to author proguard rules:\r\n\r\nhttps://learn.microsoft.com/en-us/xamarin/android/deploy-test/release-prep/proguard?tabs=windows#customizing-proguard\r\n\r\n(r8 uses the same rule format proguard did)\r\n\r\nDoes the problem go away if you remove this setting?",
                                           "updatedAt":  "2023-12-07T14:42:03Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5uinTH",
                                           "createdAt":  "2023-12-07T19:16:23Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  null,
                                           "body":  "Hi @ExLuzZziVo. We have added the \"s/needs-info\" label to this issue, which indicates that we have an open question for you before we can take further action. This issue will be closed automatically in 7 days if we do not hear back from you by then - please feel free to re-open it if you come back to this issue after that time.",
                                           "updatedAt":  "2023-12-07T19:16:23Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc5uinTN",
                                           "createdAt":  "2023-12-08T05:53:09Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "ExLuzZziVo",
                                           "body":  "@jonathanpeppers I removed this setting but no results. But disabling `\u003cEnableLLVM\u003eTrue\u003c/EnableLLVM\u003e` helped, and the app no longer crashes",
                                           "updatedAt":  "2023-12-08T05:53:09Z"
                                       }
                                   ],
                         "totalCount":  4
                     },
        "title":  "[regression/8.0.3] The Android app crashes when you click the back button on the second navigation page after publishing apk",
        "labels":  [
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/96051",
        "createdAt":  "2023-12-15T11:01:11Z",
        "number":  96051,
        "author":  "matouskozak",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-06-21T16:41:12Z",
        "body":  "Failures in `JIT/SIMD/Vector3Interop_r/ro` on osx-arm64 with miniJIT and interpreter.\r\n\r\nLog: \r\n```\r\nnativeCall_PInvoke_CheckVector3Size: sizeof(Vector3) == 12\r\nnativeCall_PInvoke_Vector3Arg:\r\n    iVal 123\r\n    sumOfEles(1.000000, 2.000000, 3.000000) = 6.000000\r\n    str  abcdefg\r\n    sumOfEles(10.000000, 11.000000, 12.000000) = 33.000000\r\nPInvoke Vector3Arg_Unix test failed\r\nXunit.Sdk.EqualException: Assert.Equal() Failure: Values differ\r\nExpected: 100\r\nActual:   101\r\n   at Xunit.Assert.Equal[Int32](Int32 expected, Int32 actual, IEqualityComparer`1 comparer) in /_/src/Microsoft.DotNet.XUnitAssert/src/EqualityAsserts.cs:line 139\r\n   at Xunit.Assert.Equal[Int32](Int32 expected, Int32 actual) in /_/src/Microsoft.DotNet.XUnitAssert/src/EqualityAsserts.cs:line 83\r\n   at __GeneratedMainWrapper.Main()\r\nnativeCall_PInvoke_Vector3Arg_Unix:\r\n    v3f32_xmm0: 1.000000 2.000000 3.000000\r\n    f32_xmm2 - f32_xmm7: 100.000000 101.000000 102.000000 103.000000 104.000000 105.000000\r\n    f32_mem0: 106.000000\r\n    v3f32_mem1: 10.000000 20.000000 30.000000\r\n    f32_mem2-3: 0.000000 107.000000\r\n    sum = 894.000000\r\nExpected: 100\r\nActual: 101\r\n```\r\n\r\nThe same tests are passing on `runtime` osx-x64 miniJIT/interpreter and linux-arm64 miniJIT CI pipelines.\r\n\r\nCould be related to Mono missing support for passing Vectors in SIMD registers (https://github.com/dotnet/runtime/issues/60068) and/or missing intrinsics support for `System.Numerics.Vector3` (https://github.com/dotnet/runtime/issues/81501).\r\n\r\n\r\nNo longer failing on osx-arm64 miniJIT after https://github.com/dotnet/runtime/pull/96079.",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOgh9EEg==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc6CHlRX",
                                           "createdAt":  "2024-06-21T16:01:06Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "steveisok",
                                           "body":  "@lambdageek should https://github.com/dotnet/runtime/pull/96079 have fixed this?",
                                           "updatedAt":  "2024-06-21T16:01:06Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6CH0QS",
                                           "createdAt":  "2024-06-21T16:41:11Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "\u003e @lambdageek should #96079 have fixed this?\r\n\r\nThat PR only fixed the JIT.  Interpreter still needs work, I think",
                                           "updatedAt":  "2024-06-21T16:41:11Z"
                                       }
                                   ],
                         "totalCount":  2
                     },
        "title":  "[mono] Failing runtime JIT/SIMD/Vector3Interop_r/ro tests on osx-arm64.",
        "labels":  [
                       "disabled-test",
                       "area-Codegen-JIT-mono",
                       "area-Interop-mono",
                       "in-pr"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/99478",
        "createdAt":  "2024-03-09T05:44:03Z",
        "number":  99478,
        "author":  "jkotas",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-08-19T15:35:26Z",
        "body":  "See disabled `GetDelegateForFunctionPointer_Resurrection` test added in https://github.com/dotnet/runtime/pull/99185\r\n\r\nFails with:\r\n```\r\nUnhandled Exception:\r\nXunit.Sdk.SameException: Assert.Same() Failure: Values are not the same instance\r\nExpected: Action { Method = Void wrapper_native_0xffffa4edbc18(), Target = null }\r\nActual:   Action { Method = Void SomeFunction(), Target = FreachableObject { } }\r\n   at Xunit.Assert.Same(Object expected, Object actual) in /_/src/Microsoft.DotNet.XUnitAssert/src/IdentityAsserts.cs:line 55\r\n   at System.Runtime.InteropServices.Tests.GetDelegateForFunctionPointerTests.FreachableObject.Finalize()\r\n```\r\n\r\n",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  null,
                         "nodes":  [

                                   ],
                         "totalCount":  0
                     },
        "title":  "[Mono] Handle resurrection for marshalled delegates",
        "labels":  [
                       "disabled-test",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/100891",
        "createdAt":  "2024-04-10T19:24:33Z",
        "number":  100891,
        "author":  "dotMorten",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2025-07-03T20:26:31Z",
        "body":  "### Description\n\nWhen sending an `sbyte` to a C++ library (`int8_t`), on iOS and MacCatalyst ARM64, the sbyte is not sent across correctly.\r\n\n\n### Reproduction Steps\n\n\r\n1. Unzip the attached project: [SbyteRepro.zip](https://github.com/dotnet/runtime/files/14936793/SbyteRepro.zip)\r\n2. Open the project `MauiTestApp\\MauiTestApp.csproj` and run it on an iOS Device or iOS ARM64 simulator\r\n3. Click the button\r\n4. Notice that the button show MinusFive=251. This was expected to show -5.\r\n\r\nThat value comes from sending an sbyte=-5 to native code, let the native code convert it to an int32 and return it again. But because something goes wrong at the interop level, the value gets sent across as 251. This seems to only affect sbyte going into native code - the second part of the code tests signed bytes coming out of native code and handles negative values just fine.\r\n\r\nA Windows version of the repro is also provided (I tested Windows ARM64 and Android ARM64 and these don\u0027t exhibit this behavior).\r\n\r\nC++ code:\r\n```cpp\r\nDLLEXPORT int32_t WINAPI SByteToInt(int8_t value)\r\n{\r\n  return static_cast\u003cint32_t\u003e(value);\r\n}\r\n```\r\nC# code:\r\n```cs\r\n[LibraryImport(\"__Internal\")]\r\nprivate static partial Int32 SByteToInt(sbyte value);\r\n```\n\n### Expected behavior\n\nsigned bytes gets sent across the interop correctly on iOS ARM64 like other platforms.\n\n### Actual behavior\n\n`-5` gets incorrectly transferred.\n\n### Regression?\n\n_No response_\n\n### Known Workarounds\n\ndon\u0027t use sbyte, but transfer as int32_t and cast once in native code.\n\n### Configuration\n\n.NET 8 ARM64 iOS and Catalyst\n\n### Other information\n\nInteresting details for Apple ARM64 ABI: https://developer.apple.com/documentation/xcode/writing-arm64-code-for-apple-platforms#Pass-arguments-to-functions-correctly\r\n\r\n\u003e The caller of a function is responsible for signing or zero-extending any argument with fewer than 32 bits. The standard ABI expects the callee to sign or zero-extend those arguments.\r\n\u003e The C language requires the promotion of arguments smaller than int before a call.\r\n\r\nI wonder if .NET zero-extends our sbyte instead of sign-extending it.\r\n`-5` in two\u0027s compliment `int8_t` would be `1111 1011`\r\nZero-extended to `int32_t` would be `0000 0000 0000 0000 0000 0000 1111 1011` which is `251`\r\n",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOigQGQQ==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc56Fn2W",
                                           "createdAt":  "2024-04-10T19:32:19Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "huoyaoyuan",
                                           "body":  "`int8_t` and `int32_t` are both signed. I\u0027d expect `static_cast\u003cint32_t\u003e` to be *sign extend*.",
                                           "updatedAt":  "2024-04-10T19:32:19Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc56F1eO",
                                           "createdAt":  "2024-04-10T20:06:08Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "dotMorten",
                                           "body":  "@huoyaoyuan the static-cast code was just to show what happens to a roundtripped value, but we have code deeper down that checks ranges of the sbyte (in the specific case -12..12) that fails for all negative numbers. The issue _only_ occured on ios and catalyst when running on ARM64. Windows ARM64 and Android ARM64 are just fine",
                                           "updatedAt":  "2024-04-10T20:06:08Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc56H9Gi",
                                           "createdAt":  "2024-04-11T04:26:47Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "rolfbjarne",
                                           "body":  "I wonder if the same thing happens with System.Int16 (short) \u003c-\u003e int16_t?",
                                           "updatedAt":  "2024-04-11T04:26:47Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc56ICGu",
                                           "createdAt":  "2024-04-11T04:56:23Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "huoyaoyuan",
                                           "body":  "`static_cast\u003cint32_t\u003e(value)` isn\u0027t a NOP on other platforms:\r\n\r\n![image](https://github.com/dotnet/runtime/assets/5644458/33edc1e2-9399-45ba-85d0-f9a0aba3fe06)\r\n\r\nIn other words, these platforms are treating upper bits of `int8_t` as **undefined**.\r\n\r\nCompiler explorer doesn\u0027t provide apple compilers, but I can imagine that they are defining the upper bits to be *already sign extended*.",
                                           "updatedAt":  "2024-04-11T04:56:23Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc56IC-v",
                                           "createdAt":  "2024-04-11T05:01:21Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "dotMorten",
                                           "body":  "@rolfbjarne we have not seen this happen with shorts.",
                                           "updatedAt":  "2024-04-11T05:01:21Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc56a9YI",
                                           "createdAt":  "2024-04-14T03:46:57Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "jkotas",
                                           "body":  "@jakobbotsch Do we have the sign and zero extensions implemented correctly in RyuJIT for Apple Arm64 ABI?",
                                           "updatedAt":  "2024-04-14T03:46:57Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc56kymQ",
                                           "createdAt":  "2024-04-15T10:16:21Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHODeK6QA==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "filipnavara",
                                                                               "createdAt":  "2024-04-15T10:33:24Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "ivanpovazan",
                                           "body":  "\u003e @jakobbotsch Do we have the sign and zero extensions implemented correctly in RyuJIT for Apple Arm64 ABI?\r\n\r\nSeems like we do. I tested `SByteToInt` conversion with NativeAOT on iOS and it returns the expected result.\r\n@dotMorten did you have a chance of trying out NativeAOT on iOS with your projects?\r\n\r\n---\r\n\r\nRegarding Mono, the problem seems reproducible only if the native library is built with `-Os`:\r\n```\r\nclang++ -c -o lib.o lib.cpp -isysroot /Applications/Xcode_15.2.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.2.sdk -Os\r\n``` \r\nRemoving the size optimization flag when building the native library makes Mono produce the expected result as well.\r\n\r\n---\r\n\r\nWe should look into why Mono fails when the library is built with `-Os`",
                                           "updatedAt":  "2024-04-15T10:18:07Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc56k7tD",
                                           "createdAt":  "2024-04-15T10:36:23Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHODeLCgg==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "ivanpovazan",
                                                                               "createdAt":  "2024-04-15T10:49:14Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "jakobbotsch",
                                           "body":  "I don\u0027t see where RyuJIT takes explicit care of this normalization. RyuJIT in general keeps all values in registers normalized up to 32 bits, which makes it very hard/impossible to hit issues around this with IL created from C#. But you can hit this with RyuJIT as well for IL based programs on both arm32 (which has the same ABI requirement) and apple arm64. I opened #101046 about it.\r\n",
                                           "updatedAt":  "2024-04-15T10:36:42Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6Juq_5",
                                           "createdAt":  "2024-08-26T17:31:35Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHODvuxpw==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "HEART",
                                                                               "user":  "ivanpovazan",
                                                                               "createdAt":  "2024-08-26T19:31:12Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "lambdageek",
                                           "body":  "Looking at what apple clang produces with `-S -emit-llvm` it looks like the initial LLVM IR doesn\u0027t need to include the sign extension explicitly.\r\n\r\nThis:\r\n\r\n```c\r\n#include \u003cstdint.h\u003e\r\n\r\nint32_t foo (int8_t i)\r\n{\r\n\treturn i;\r\n}\r\n\r\nint32_t bar (int8_t i);\r\n\r\nint32_t call_bar (int8_t i, int8_t j)\r\n{\r\n\treturn bar(i + j);\r\n}\r\n```\r\n\r\nProduces the following LLVM IR with `lang -Os -S -emit-llvm  /tmp/foo.c -o foo.S -isysroot /Applications/Xcode-15.4.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.5.sdk`:\r\n\r\n```\r\n ModuleID = \u0027/tmp/foo.c\u0027\r\nsource_filename = \"/tmp/foo.c\"\r\ntarget datalayout = \"e-m:o-i64:64-i128:128-n32:64-S128\"\r\ntarget triple = \"arm64-apple-ios17.5.0\"\r\n\r\n; Function Attrs: mustprogress nofree norecurse nosync nounwind optsize readnone ssp willreturn uwtable(sync)\r\ndefine i32 @foo(i8 noundef signext %0) local_unnamed_addr #0 {\r\n  %2 = sext i8 %0 to i32\r\n  ret i32 %2\r\n}\r\n\r\n; Function Attrs: nounwind optsize ssp uwtable(sync)\r\ndefine i32 @call_bar(i8 noundef signext %0, i8 noundef signext %1) local_unnamed_addr #1 {\r\n  %3 = add i8 %1, %0\r\n  %4 = tail call i32 @bar(i8 noundef signext %3) #3\r\n  ret i32 %4\r\n}\r\n\r\n; Function Attrs: optsize\r\ndeclare i32 @bar(i8 noundef signext) local_unnamed_addr #2\r\n\r\nattributes #0 = { mustprogress nofree norecurse nosync nounwind optsize readnone ssp willreturn uwtable(sync) \"frame-pointer\"=\"non-leaf\" \"min-legal-vector-width\"=\"0\" \"no-trapping-math\"=\"true\" \"probe-stack\"=\"__chkstk_darwin\" \"stack-protector-buffer-size\"=\"8\" \"target-cpu\"=\"apple-a7\" \"target-features\"=\"+aes,+crypto,+fp-armv8,+neon,+sha2,+v8a,+zcm,+zcz\" }\r\nattributes #1 = { nounwind optsize ssp uwtable(sync) \"frame-pointer\"=\"non-leaf\" \"min-legal-vector-width\"=\"0\" \"no-trapping-math\"=\"true\" \"probe-stack\"=\"__chkstk_darwin\" \"stack-protector-buffer-size\"=\"8\" \"target-cpu\"=\"apple-a7\" \"target-features\"=\"+aes,+crypto,+fp-armv8,+neon,+sha2,+v8a,+zcm,+zcz\" }\r\nattributes #2 = { optsize \"frame-pointer\"=\"non-leaf\" \"no-trapping-math\"=\"true\" \"probe-stack\"=\"__chkstk_darwin\" \"stack-protector-buffer-size\"=\"8\" \"target-cpu\"=\"apple-a7\" \"target-features\"=\"+aes,+crypto,+fp-armv8,+neon,+sha2,+v8a,+zcm,+zcz\" }\r\nattributes #3 = { nounwind optsize }\r\n\r\n!llvm.module.flags = !{!0, !1, !2, !3, !4}\r\n!llvm.ident = !{!5}\r\n\r\n!0 = !{i32 2, !\"SDK Version\", [2 x i32] [i32 17, i32 5]}\r\n!1 = !{i32 1, !\"wchar_size\", i32 4}\r\n!2 = !{i32 8, !\"PIC Level\", i32 2}\r\n!3 = !{i32 7, !\"uwtable\", i32 1}\r\n!4 = !{i32 7, !\"frame-pointer\", i32 1}\r\n!5 = !{!\"Apple clang version 15.0.0 (clang-1500.3.9.4)\"}\r\n```\r\n\r\nYou get the same IR with apple clang targeting the standard ARM64 ABI: `clang -Os -S  /tmp/foo.c -o foo.S  --target=arm64-linux-gnu`\r\n\r\n```\r\n; ModuleID = \u0027/tmp/foo.c\u0027\r\nsource_filename = \"/tmp/foo.c\"\r\ntarget datalayout = \"e-m:e-i8:8:32-i16:16:32-i64:64-i128:128-n32:64-S128\"\r\ntarget triple = \"arm64-unknown-linux-gnu\"\r\n\r\n; Function Attrs: mustprogress nofree norecurse nosync nounwind optsize readnone willreturn uwtable\r\ndefine dso_local i32 @foo(i8 noundef %0) local_unnamed_addr #0 {\r\n  %2 = sext i8 %0 to i32\r\n  ret i32 %2\r\n}\r\n\r\n; Function Attrs: nounwind optsize uwtable\r\ndefine dso_local i32 @call_bar(i8 noundef %0, i8 noundef %1) local_unnamed_addr #1 {\r\n  %3 = add i8 %1, %0\r\n  %4 = tail call i32 @bar(i8 noundef %3) #3\r\n  ret i32 %4\r\n}\r\n\r\n; Function Attrs: optsize\r\ndeclare i32 @bar(i8 noundef) local_unnamed_addr #2\r\n\r\nattributes #0 = { mustprogress nofree norecurse nosync nounwind optsize readnone willreturn uwtable \"frame-pointer\"=\"non-leaf\" \"min-legal-vector-width\"=\"0\" \"no-trapping-math\"=\"true\" \"stack-protector-buffer-size\"=\"8\" \"target-cpu\"=\"generic\" \"target-features\"=\"+neon,+v8a\" }\r\nattributes #1 = { nounwind optsize uwtable \"frame-pointer\"=\"non-leaf\" \"min-legal-vector-width\"=\"0\" \"no-trapping-math\"=\"true\" \"stack-protector-buffer-size\"=\"8\" \"target-cpu\"=\"generic\" \"target-features\"=\"+neon,+v8a\" }\r\nattributes #2 = { optsize \"frame-pointer\"=\"non-leaf\" \"no-trapping-math\"=\"true\" \"stack-protector-buffer-size\"=\"8\" \"target-cpu\"=\"generic\" \"target-features\"=\"+neon,+v8a\" }\r\nattributes #3 = { nounwind optsize }\r\n\r\n!llvm.module.flags = !{!0, !1, !2, !3, !4}\r\n!llvm.ident = !{!5}\r\n\r\n!0 = !{i32 1, !\"wchar_size\", i32 4}\r\n!1 = !{i32 8, !\"PIC Level\", i32 2}\r\n!2 = !{i32 7, !\"PIE Level\", i32 2}\r\n!3 = !{i32 7, !\"uwtable\", i32 2}\r\n!4 = !{i32 7, !\"frame-pointer\", i32 1}\r\n!5 = !{!\"Apple clang version 15.0.0 (clang-1500.3.9.4)\"}\r\n```\r\n\r\nHowever the final assembly differs.\r\n\r\nApple API: `clang -Os -S  /tmp/foo.c -o foo.S -isysroot /Applications/Xcode-15.4.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.5.sdk --target=arm64-apple-ios17.5.0`\r\n\r\n```\r\n\t.section\t__TEXT,__text,regular,pure_instructions\r\n\t.build_version ios, 17, 5\tsdk_version 17, 5\r\n\t.globl\t_foo                            ; -- Begin function foo\r\n\t.p2align\t2\r\n_foo:                                   ; @foo\r\n\t.cfi_startproc\r\n; %bb.0:\r\n\tret\r\n\t.cfi_endproc\r\n                                        ; -- End function\r\n\t.globl\t_call_bar                       ; -- Begin function call_bar\r\n\t.p2align\t2\r\n_call_bar:                              ; @call_bar\r\n\t.cfi_startproc\r\n; %bb.0:\r\n\tadd\tw8, w1, w0\r\n\tsxtb\tw0, w8\r\n\tb\t_bar\r\n\t.cfi_endproc\r\n                                        ; -- End function\r\n.subsections_via_symbols\r\n```\r\n\r\nLinux ABI: `clang -Os -S  /tmp/foo.c -o foo.S -isysroot /Applications/Xcode-15.4.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.5.sdk --target=arm64-linux-gnu`\r\n\r\n```\r\n\t.text\r\n\t.file\t\"foo.c\"\r\n\t.globl\tfoo                             // -- Begin function foo\r\n\t.p2align\t2\r\n\t.type\tfoo,@function\r\nfoo:                                    // @foo\r\n\t.cfi_startproc\r\n// %bb.0:\r\n\tsxtb\tw0, w0\r\n\tret\r\n.Lfunc_end0:\r\n\t.size\tfoo, .Lfunc_end0-foo\r\n\t.cfi_endproc\r\n                                        // -- End function\r\n\t.globl\tcall_bar                        // -- Begin function call_bar\r\n\t.p2align\t2\r\n\t.type\tcall_bar,@function\r\ncall_bar:                               // @call_bar\r\n\t.cfi_startproc\r\n// %bb.0:\r\n\tadd\tw0, w1, w0\r\n\tb\tbar\r\n.Lfunc_end1:\r\n\t.size\tcall_bar, .Lfunc_end1-call_bar\r\n\t.cfi_endproc\r\n                                        // -- End function\r\n\t.ident\t\"Apple clang version 15.0.0 (clang-1500.3.9.4)\"\r\n\t.section\t\".note.GNU-stack\",\"\",@progbits\r\n\t.addrsig\r\n```\r\n\r\n---\r\n\r\nConclusion:  we\u0027re probably not passing the correct target triple to something in our backend.  either `opt` or `llc` or clang.",
                                           "updatedAt":  "2024-08-26T17:31:35Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6KBAZB",
                                           "createdAt":  "2024-08-28T14:36:11Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHODwErvQ==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "HEART",
                                                                               "user":  "filipnavara",
                                                                               "createdAt":  "2024-08-28T14:58:37Z"
                                                                           },
                                                                           {
                                                                               "content":  "HEART",
                                                                               "user":  "dotMorten",
                                                                               "createdAt":  "2024-08-28T16:17:52Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  2
                                                         },
                                           "author":  "ivanpovazan",
                                           "body":  "### Investigation\r\n\r\nI think the problem is that we are not decorating params/arguments fewer than 32bits with the correct LLVM IR attributes.\r\n\r\nIf we considering a simple `caller.cpp`\r\n```cpp\r\n#include \u003ccstdint\u003e\r\nextern \"C\" {int32_t SByteToInt(int8_t value);}\r\nint main() {\r\n    int result = SByteToInt(-5);\r\n    return result;\r\n}\r\n```\r\nCompiled with: `clang++ -S -emit-llvm -o caller.S caller.cpp -isysroot /Applications/Xcode_15.2.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.2.sdk`\r\nWe get the following IR, where the param/arg have `signext` attribute associated with them:\r\n```llvm\r\n; Function Attrs: noinline norecurse optnone ssp uwtable(sync)\r\ndefine i32 @main() #0 {\r\n  %1 = alloca i32, align 4\r\n  %2 = alloca i32, align 4\r\n  store i32 0, ptr %1, align 4\r\n  %3 = call i32 @SByteToInt(i8 noundef signext -5)\r\n  store i32 %3, ptr %2, align 4\r\n  %4 = load i32, ptr %2, align 4\r\n  ret i32 %4\r\n}\r\n\r\ndeclare i32 @SByteToInt(i8 noundef signext) #1\r\n```\r\nThis gives the following assembly:\r\n```asm\r\n_main:\r\n0000000000000000\tsub\tsp, sp, #0x20\r\n0000000000000004\tstp\tx29, x30, [sp, #0x10]\r\n0000000000000008\tadd\tx29, sp, #0x10\r\n000000000000000c\tstur\twzr, [x29, #-0x4]\r\n0000000000000010\tmov\tw0, #-0x5 // \u003c-- correct\r\n0000000000000014\tbl\t0x14\r\n```\r\n\r\nHowever, when we use Mono with LLVM that PInvokes the same function we generate:\r\n```llvm\r\n; Function Attrs: noinline\r\ndefine hidden monocc i32 @Program_Program_EONEConvert() #2 gc \"coreclr\" !dbg !89 {\r\n...\r\ngc.safepoint_poll.exit:                           ; preds = %BB0, %gc.safepoint_poll.poll.i\r\n  %2 = notail call monocc i32 @p_8_plt_Program_Program_SByteToInt_sbyte_llvm(i8 -5), !dbg !90, !managed_name !91\r\n  ret i32 %2, !dbg !92\r\n}\r\n\r\ndeclare hidden i32 @p_8_plt_Program_Program_SByteToInt_sbyte_llvm(i8) local_unnamed_addr #0\r\n```\r\nwhich gives following assembly:\r\n```asm\r\n_Program_Program_MyConvert:\r\n0000000000000290    stp    x29, x30, [sp, #-0x10]!\r\n0000000000000294    adrp    x8, 0 ; 0x0\r\n0000000000000298    ldr    x8, [x8]\r\n000000000000029c    ldr    x8, [x8]\r\n00000000000002a0    cbnz    x8, 0x2b4\r\n00000000000002a4    mov    w0, #0xfb // \u003c-- wrong\r\n00000000000002a8    bl    0x2a8\r\n```\r\n\r\n### Solution\r\n\r\nAdapt https://github.com/dotnet/runtime/blob/main/src/mono/mono/mini/mini-llvm.c#L2333 (and other places) to properly decorate params/args with the correct set of https://llvm.org/docs/LangRef.html#parameter-attributes \r\n\r\n--- \r\n\r\nFWIW Using `mini-jit` backend alone, produces the correct result:\r\n```asm\r\nProgram_EONEConvert:\r\n00000001003e8280\tstp\tx29, x30, [sp, #-0x10]!\r\n00000001003e8284\tmov\tx29, sp\r\n00000001003e8288\tadrp\tx16, 2243 ; 0x100cab000\r\n00000001003e828c\tadd\tx16, x16, #0xa50\r\n00000001003e8290\tldr\tx0, [x16, #0x38]\r\n00000001003e8294\tldr\tx17, [x0]\r\n00000001003e8298\tcbz\tx17, 0x1003e82a0\r\n00000001003e829c\tbl\tplt\r\n00000001003e82a0\tmov\tx0, #-0x5\r\n00000001003e82a4\tbl\tplt_Program_SByteToInt_sbyte\r\n```",
                                           "updatedAt":  "2024-08-28T14:36:28Z"
                                       }
                                   ],
                         "totalCount":  10
                     },
        "title":  "Signed byte is incorrectly transferred over interop on iOS/Catalyst ARM64",
        "labels":  [
                       "os-ios",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/106970",
        "createdAt":  "2024-04-26T11:30:44Z",
        "number":  106970,
        "author":  "hansmbakker",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2025-05-27T11:18:45Z",
        "body":  "### Android application type\r\n\r\n.NET Android (net7.0-android, net8.0-android, etc.)\r\n\r\n### Affected platform version\r\n\r\nInitally reported with VS 2022 17.10.0 Preview 5.0; .NET SDK 8.0.204; .NET MAUI 8.0.20\r\nStill an issue with VS 17.11 Preview 2; .NET SDK 8.0.302; MAUI 8.0.60\r\n\r\nThe issue happens on all architectures:\r\n- `arm`: an Infinix X657 with a `MT6580WP` processor (ARMv7 Processor rev 3 (v7l))\r\n- `arm64`: a Huawei P20 with a `Kirin970` processor (AArch64 Processor rev 2 (aarch64))\r\n- `x86_64`: my Pixel 7 emulator (it is an x86_64 image)\r\n\r\n### Description\r\n\r\nWhen deploying a debug version of the app ~to one of our test devices~, our code crashes at startup with the message\r\n\u003e [libc] Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x85d230ff in tid 13352 (opment.showcase), pid 13352 (opment.showcase)\r\n\r\n~This does not happen always and I cannot reproduce it on my emulator.~\r\n\r\nUpdate: I also encountered the issue in a freshly created x86_64 Pixel 7 emulator\r\n\r\n### Steps to Reproduce\r\n\r\nNot sure how to reproduce~, I did not have the issue in the emulator~.\r\n\r\n~This error appears on two cheap imported Android phones that are used to test the app for usage in other countries.~\r\n\r\n### Did you find any workaround?\r\n\r\n_No response_\r\n\r\n### Relevant log output\r\n\r\nI collected logs using\r\n```shell\r\nadb -d shell setprop debug.mono.log default,timing,assembly,mono_log_level=debug,mono_log_mask=all\r\nadb -d logcat \u003e log.txt\r\n```\r\nPlease find them at [log.zip](https://github.com/xamarin/xamarin-android/files/15129922/log.zip)\r\n\r\nI collected additional logs and shared the binaries plus those logs with @grendello as it contains client details.\r\n\r\n### Possibly related items\r\n\r\nhttps://developercommunity.visualstudio.com/t/vs-167-xamarin-android-crash-on-start-up-in-debug/1139203 seems similar but might have a different cause.\r\n",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOrZPDeg==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc6JthIC",
                                           "createdAt":  "2024-04-26T11:35:51Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "\u003cdetails\u003e\u003csummary\u003eUPDATE: Please ignore this comment, it is moved to dotnet/android#8967.\u003c/summary\u003e\r\n\r\nWeird side effect of this bug: after running into this issue, I cannot deploy to my x86-64 emulator anymore because of this error:\r\n\u003e [llc.EXE stderr] C:\\Program Files\\dotnet\\packs\\Microsoft.Android.Sdk.Windows\\34.0.95\\tools\\binutils\\bin\\llc.exe: error: C:\\Program Files\\dotnet\\packs\\Microsoft.Android.Sdk.Windows\\34.0.95\\tools\\binutils\\bin\\llc.exe: typemaps.x86_64.ll: error: Could not open input file: no such file or directory\r\n\r\nPlease see the relevant tail of the logs below. The part before this (building the app) is common to all target devices and is working fine.\r\n\r\n```shell\r\nSkipping target \"_LinkAssembliesNoShrink\" because all output files are up-to-date with respect to the input files.\r\nSkipping target \"_GenerateJavaStubs\" because all output files are up-to-date with respect to the input files.\r\nSkipping target \"_ManifestMerger\" because all output files are up-to-date with respect to the input files.\r\nSkipping target \"_ConvertCustomView\" because all output files are up-to-date with respect to the input files.\r\nSkipping target \"_AddStaticResources\" because all output files are up-to-date with respect to the input files.\r\nSkipping target \"_GenerateEmptyAndroidRemapNativeCode\" because all output files are up-to-date with respect to the input files.\r\nTouching \"obj\\Debug\r\net8.0-android\\stamp\\_GeneratePackageManagerJava.stamp\".\r\nSkipping target \"_GenerateAndroidAssetsDir\" because all output files are up-to-date with respect to the input files.\r\nSkipping target \"_PrepareCreateBaseApk\" because all output files are up-to-date with respect to the input files.\r\nSkipping target \"_CreateBaseApk\" because all output files are up-to-date with respect to the input files.\r\nSkipping target \"_CompileJava\" because all output files are up-to-date with respect to the input files.\r\n[llc.EXE stderr] C:\\Program Files\\dotnet\\packs\\Microsoft.Android.Sdk.Windows\\34.0.95\\tools\\binutils\\bin\\llc.exe: error: C:\\Program Files\\dotnet\\packs\\Microsoft.Android.Sdk.Windows\\34.0.95\\tools\\binutils\\bin\\llc.exe: typemaps.x86_64.ll: error: Could not open input file: no such file or directory\r\nXA3006: Could not compile native assembly file: typemaps.x86_64.ll\r\n\r\nstderr | C:\\Program Files\\dotnet\\packs\\Microsoft.Android.Sdk.Windows\\34.0.95\\tools\\binutils\\bin\\llc.exe: error: C:\\Program Files\\dotnet\\packs\\Microsoft.Android.Sdk.Windows\\34.0.95\\tools\\binutils\\bin\\llc.exe: typemaps.x86_64.ll: error: Could not open input file: no such file or directory\r\n\r\n\r\nDone building project \"Anonymized.App.csproj\" -- FAILED.\r\nBuild FAILED.\r\n2\u003eDeployment failed to Small_Phone_API_34.\r\n2\u003eDeploy failed\r\n========== Build: 1 succeeded, 0 failed, 5 up-to-date, 0 skipped ==========\r\n========== Build completed at 13:32 and took 11,768 seconds ==========\r\n========== Deploy: 0 succeeded, 1 failed, 0 skipped ==========\r\n========== Deploy completed at 13:32 and took 11,768 seconds ==========\r\n```\r\n\u003c/details\u003e",
                                           "updatedAt":  "2024-05-20T12:23:22Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthIL",
                                           "createdAt":  "2024-04-26T12:04:20Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "Other weird thing: on the phones where it was crashing in debug mode, in Release mode I also see the SIGSEGV message, but the app does not crash at that point somehow:\r\n\r\n```shell\r\n[debug-app-helper] Mono runtime found at: /data/app/~~2fU_SgCHWNETlFGlD8GKcg==/com.anonymizeddomain.mobiledevelopment.showcase-7r1Z7yrEsiaVLLzVL9Pg-w==/lib/arm/libmonosgen-2.0.so\r\n[opment.showcas] Attempt to remove non-JNI local reference, dumping thread\r\n[DOTNET] JNI_OnLoad: JNI_OnLoad in pal_jni.c\r\n[DOTNET] GetOptionalClassGRef: optional class com/android/org/conscrypt/OpenSSLEngineImpl was not found\r\n[monodroid] Creating public update directory: `/data/user/0/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__`\r\n[opment.showcas] Attempt to remove non-JNI local reference, dumping thread\r\n[monodroid-debug] Trying to initialize the debugger with options: --debugger-agent=transport=dt_socket,loglevel=0,address=127.0.0.1:8898,server=y,embedding=1,timeout=1714132391\r\nLoaded assembly: /data/data/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/System.Private.CoreLib.dll [External]\r\n[libc] Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x87b070ff in tid 16722 (opment.showcase), pid 16722 (opment.showcase)\r\nStart debugging Android application ...\r\n\u003e am start -a \"android.intent.action.MAIN\" -c \"android.intent.category.LAUNCHER\" -n \"com.anonymizeddomain.mobiledevelopment.showcase/crc64dc021777432a8733.MainActivity\"\r\n\u003e Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.anonymizeddomain.mobiledevelopment.showcase/crc64dc021777432a8733.MainActivity }\r\n\r\nAndroid application is running (debug is disabled in android project properties).\r\n```",
                                           "updatedAt":  "2024-04-26T12:44:37Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthIX",
                                           "createdAt":  "2024-04-26T12:44:48Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "Update: I\u0027m now also seeing the crash in Debug mode in the x86-64 emulator on startup:\r\n```shell\r\nStart debugging Android application ...\r\n\u003e am start -D -a \"android.intent.action.MAIN\" -c \"android.intent.category.LAUNCHER\" -n \"com.anonymizeddomain.mobiledevelopment.showcase/crc64dc021777432a8733.MainActivity\"\r\n\u003e Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.anonymizeddomain.mobiledevelopment.showcase/crc64dc021777432a8733.MainActivity }\r\nLoaded assembly: /data/data/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/System.Private.CoreLib.dll [External]\r\nLoaded assembly: /data/data/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/Anonymized.App.dll\r\nLoaded assembly: /data/data/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/Mono.Android.dll [External]\r\nLoaded assembly: /data/data/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/System.Runtime.dll [External]\r\nLoaded assembly: /data/data/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/Java.Interop.dll [External]\r\nLoaded assembly: /data/data/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/System.Runtime.InteropServices.dll [External]\r\nResolved pending breakpoint for \u0027Android.Runtime.JNIEnvInit.RegisterJniNatives(System.IntPtr, System.Int32, System.IntPtr, System.IntPtr, System.Int32)\u0027 to /Users/runner/work/1/s/xamarin-android/src/Mono.Android/Android.Runtime/JNIEnvInit.cs:57 [0x00000].\r\nLoaded assembly: /data/data/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/System.Collections.dll [External]\r\nLoaded assembly: /data/data/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/Mono.Android.Runtime.dll [External]\r\nLoaded assembly: /data/data/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/System.Threading.dll [External]\r\n[opment.showcase] Late-enabling -Xcheck:jni\r\n[opment.showcase] Using CollectorTypeCMC GC.\r\n[opment.showcase] Unexpected CPU variant for x86: x86_64.\r\n[opment.showcase] Known variants: atom, sandybridge, silvermont, goldmont, goldmont-plus, tremont, kabylake, default\r\n[CompatibilityChangeReporter] Compat change id reported: 171979766; UID 10209; state: ENABLED\r\n[CompatibilityChangeReporter] Compat change id reported: 242716250; UID 10209; state: ENABLED\r\n[ApplicationLoaders] Returning zygote-cached class loader: /system_ext/framework/androidx.window.extensions.jar\r\n[ApplicationLoaders] Returning zygote-cached class loader: /system_ext/framework/androidx.window.sidecar.jar\r\n[ziparchive] Unable to open \u0027/data/app/~~HA0b0bmrYL0G1MYf5lwZIQ==/com.anonymizeddomain.mobiledevelopment.showcase-EG8PdIe_sbwpHxnhCCkzyw==/base.dm\u0027: No such file or directory\r\n[ziparchive] Unable to open \u0027/data/app/~~HA0b0bmrYL0G1MYf5lwZIQ==/com.anonymizeddomain.mobiledevelopment.showcase-EG8PdIe_sbwpHxnhCCkzyw==/base.dm\u0027: No such file or directory\r\n[nativeloader] Configuring clns-6 for other apk /data/app/~~HA0b0bmrYL0G1MYf5lwZIQ==/com.anonymizeddomain.mobiledevelopment.showcase-EG8PdIe_sbwpHxnhCCkzyw==/base.apk. target_sdk_version=34, uses_libraries=, library_path=/data/app/~~HA0b0bmrYL0G1MYf5lwZIQ==/com.anonymizeddomain.mobiledevelopment.showcase-EG8PdIe_sbwpHxnhCCkzyw==/lib/x86_64:/data/app/~~HA0b0bmrYL0G1MYf5lwZIQ==/com.anonymizeddomain.mobiledevelopment.showcase-EG8PdIe_sbwpHxnhCCkzyw==/base.apk!/lib/x86_64, permitted_path=/data:/mnt/expand:/data/user/0/com.anonymizeddomain.mobiledevelopment.showcase\r\n[GraphicsEnvironment] Currently set values for:\r\n[GraphicsEnvironment]   angle_gl_driver_selection_pkgs=[]\r\n[GraphicsEnvironment]   angle_gl_driver_selection_values=[]\r\n[GraphicsEnvironment] ANGLE GameManagerService for com.anonymizeddomain.mobiledevelopment.showcase: false\r\n[GraphicsEnvironment] com.anonymizeddomain.mobiledevelopment.showcase is not listed in per-application setting\r\n[GraphicsEnvironment] Neither updatable production driver nor prerelease driver is supported.\r\n[debug-app-helper] Checking if libmonodroid was unpacked to /data/app/~~HA0b0bmrYL0G1MYf5lwZIQ==/com.anonymizeddomain.mobiledevelopment.showcase-EG8PdIe_sbwpHxnhCCkzyw==/lib/x86_64/libmonodroid.so\r\n[debug-app-helper] Native libs extracted to /data/app/~~HA0b0bmrYL0G1MYf5lwZIQ==/com.anonymizeddomain.mobiledevelopment.showcase-EG8PdIe_sbwpHxnhCCkzyw==/lib/x86_64, assuming application/android:extractNativeLibs == true\r\n[debug-app-helper] Setting up for DSO lookup in app data directories\r\n[debug-app-helper] Added filesystem DSO lookup location: /data/app/~~HA0b0bmrYL0G1MYf5lwZIQ==/com.anonymizeddomain.mobiledevelopment.showcase-EG8PdIe_sbwpHxnhCCkzyw==/lib/x86_64\r\n[debug-app-helper] Using runtime path: /data/app/~~HA0b0bmrYL0G1MYf5lwZIQ==/com.anonymizeddomain.mobiledevelopment.showcase-EG8PdIe_sbwpHxnhCCkzyw==/lib/x86_64\r\n[debug-app-helper] checking directory: `/data/user/0/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/lib`\r\n[debug-app-helper] directory does not exist: `/data/user/0/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/lib`\r\n[debug-app-helper] Checking whether Mono runtime exists at: /data/user/0/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__/libmonosgen-2.0.so\r\n[debug-app-helper] Checking whether Mono runtime exists at: /data/app/~~HA0b0bmrYL0G1MYf5lwZIQ==/com.anonymizeddomain.mobiledevelopment.showcase-EG8PdIe_sbwpHxnhCCkzyw==/lib/x86_64/libmonosgen-2.0.so\r\n[debug-app-helper] Mono runtime found at: /data/app/~~HA0b0bmrYL0G1MYf5lwZIQ==/com.anonymizeddomain.mobiledevelopment.showcase-EG8PdIe_sbwpHxnhCCkzyw==/lib/x86_64/libmonosgen-2.0.so\r\n[opment.showcase] Attempt to remove non-JNI local reference\r\n[DOTNET] JNI_OnLoad: JNI_OnLoad in pal_jni.c\r\n[DOTNET] GetOptionalClassGRef: optional class com/android/org/conscrypt/OpenSSLEngineImpl was not found\r\n[monodroid] Creating public update directory: `/data/user/0/com.anonymizeddomain.mobiledevelopment.showcase/files/.__override__`\r\n[opment.showcase] Attempt to remove non-JNI local reference\r\n[monodroid-debug] Trying to initialize the debugger with options: --debugger-agent=transport=dt_socket,loglevel=0,address=10.0.2.2:64975,embedding=1,timeout=1714135577\r\n[monodroid-assembly] open_from_bundles: failed to load assembly Anonymized.App.dll\r\n[monodroid-gc] GREF GC Threshold: 46080\r\n[monodroid-assembly] open_from_bundles: failed to load assembly Mono.Android.dll\r\n[monodroid-assembly] open_from_bundles: failed to load assembly System.Runtime.dll\r\n[monodroid-assembly] open_from_bundles: failed to load assembly Java.Interop.dll\r\n[monodroid-assembly] open_from_bundles: failed to load assembly System.Runtime.InteropServices.dll\r\n[monodroid-assembly] open_from_bundles: failed to load assembly System.Collections.dll\r\n[monodroid-assembly] open_from_bundles: failed to load assembly Mono.Android.Runtime.dll\r\n[monodroid-assembly] open_from_bundles: failed to load assembly System.Threading.dll\r\n[libc] Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x6df36340 in tid 9243 (opment.showcase), pid 9243 (opment.showcase)\r\n```",
                                           "updatedAt":  "2024-04-26T12:47:53Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthIf",
                                           "createdAt":  "2024-04-26T12:52:30Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "Enabling all exceptions did not help intercepting this startup crash:\r\n![image](https://github.com/xamarin/xamarin-android/assets/3463496/8d2e1db3-ee42-464d-8f36-b1151f7349a6)\r\n",
                                           "updatedAt":  "2024-04-26T12:52:30Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthIm",
                                           "createdAt":  "2024-05-18T14:28:51Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "@grendello @jonathanpeppers are there any pointers you could give me to work around this problem or investigate it further?\r\n\r\nIs the information I provided enough for you to look into this?",
                                           "updatedAt":  "2024-05-18T14:28:51Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthIq",
                                           "createdAt":  "2024-05-20T09:33:57Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "grendello",
                                           "body":  "Hi @hansmbakker, thank you for all the logs, they show 3 separate issues, so we\u0027ll need to untangle things a bit :)\r\n\r\nFirst we have the on-device segfaults (SIGSEGV) which are the most worrying, second we have the aborts (SIGABORT) which might be the most actionable and, potentially, causing the segfaults.  Finally, we have the build issue `typemaps.x86_64.ll: error: Could not open input file: no such file or directory`\r\n\r\nFor the on-device issues, do you still have the separate logs for all those occurrences? The logs contain crashes from several instances of the application, but they unfortunately lack context - things which are logged before the first line of the crash.  If you could, please, attach the separate logs in their entirety that would be most helpful. If you don\u0027t have the original logs, please record new ones with the commands you provided, but before recording issue the additional two commands:\r\n\r\n```shell\r\n\u003e adb logcat -G 64M\r\n\u003e adb logcat -c\r\n```\r\n\r\nFor the SIGSEGV errors, could you please attach the `libmonosgen-2.0.so` shared libraries (from within the APK) along with the logs?\r\n\r\nWith regards to the build error, please enable creation of MSBuild binlog and attach it here.  I\u0027ve seen this issue reported elsewhere, but I cannot reproduce it so a binlog of it actually happening would be most useful.\r\n\r\nThanks!\r\n",
                                           "updatedAt":  "2024-05-20T09:33:57Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthIz",
                                           "createdAt":  "2024-05-20T11:56:24Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "I reproduced both the SEGFAULT issue and the build issue. I split off the build issue to dotnet/android#8967 so in this issue we can focus on the crashes.\r\n\r\nNote: This is still an issue with Visual Studio 17.10 Preview 7; dotnet SDK 8.0.300, MAUI 8.0.40\r\n\r\n@grendello Where can I best share the resulting files with you confidentially?",
                                           "updatedAt":  "2024-05-20T12:37:53Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthI8",
                                           "createdAt":  "2024-05-20T14:03:39Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "grendello",
                                           "body":  "@hansmbakker if you can get the `SIGABRT` crash, it would be the best place to start.  With regards to sharing confidential files, it\u0027s best if you upload the log to OneDrive, Google Drive etc and share the link with us by mail.",
                                           "updatedAt":  "2024-05-20T14:03:39Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthJD",
                                           "createdAt":  "2024-05-20T14:05:43Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "@grendello\r\n\u003e share the link with us by mail\r\n\r\nWhat mail address can I send it to?\r\n\r\nI see the abort messages were in the log.zip but I couldn\u0027t reproduce those today. Will look into that later, I can share the segfault-related files and the build issue-related files today.",
                                           "updatedAt":  "2024-05-20T14:12:08Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthJI",
                                           "createdAt":  "2024-05-20T15:00:52Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "grendello",
                                           "body":  "\u003e @grendello\r\n\u003e \r\n\u003e \u003e share the link with us by mail\r\n\u003e \r\n\u003e What mail address can I send it to?\r\n\r\nUse the ones from our GH profiles please.\r\n\r\n\u003e \r\n\u003e I see the abort messages were in the log.zip but I couldn\u0027t reproduce those today. Will look into that later, I can share the segfault-related files and the build issue-related files today.\r\n\r\nThere are a few of those in your logcat:\r\n\r\n```shell\r\n$ grep SIGABRT log.txt\r\n04-16 13:16:14.379 17583 17583 F libc    : Fatal signal 6 (SIGABRT), code -1 (SI_QUEUE) in tid 17583 (opment.showcase), pid 17583 (opment.showcase)\r\n04-16 13:16:14.550 17609 17609 F DEBUG   : signal 6 (SIGABRT), code -1 (SI_QUEUE), fault addr --------\r\n04-16 13:16:21.164 17626 17626 F libc    : Fatal signal 6 (SIGABRT), code -1 (SI_QUEUE) in tid 17626 (opment.showcase), pid 17626 (opment.showcase)\r\n04-16 13:16:21.338 17695 17695 F DEBUG   : signal 6 (SIGABRT), code -1 (SI_QUEUE), fault addr --------\r\n04-16 13:16:27.463 17723 17723 F libc    : Fatal signal 6 (SIGABRT), code -1 (SI_QUEUE) in tid 17723 (opment.showcase), pid 17723 (opment.showcase)\r\n04-16 13:16:27.601 17748 17748 F DEBUG   : signal 6 (SIGABRT), code -1 (SI_QUEUE), fault addr --------\r\n04-16 13:16:34.062 17758 17758 F libc    : Fatal signal 6 (SIGABRT), code -1 (SI_QUEUE) in tid 17758 (opment.showcase), pid 17758 (opment.showcase)\r\n04-16 13:16:34.201 17784 17784 F DEBUG   : signal 6 (SIGABRT), code -1 (SI_QUEUE), fault addr --------\r\n```",
                                           "updatedAt":  "2024-05-20T15:01:22Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthJP",
                                           "createdAt":  "2024-05-20T17:08:25Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "@grendello I only see your private mail address in your GH profile; do you have an @microsoft.com address?",
                                           "updatedAt":  "2024-05-20T17:08:25Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthJU",
                                           "createdAt":  "2024-05-21T08:48:40Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "grendello",
                                           "body":  "\u003e @grendello I only see your private mail address in your GH profile; do you have an @microsoft.com address?\r\n\r\nI do, but I don\u0027t want to specify it where spambots can scan it :) - please email me at my GH profile address and I\u0027ll reply giving you my Microsoft one :)",
                                           "updatedAt":  "2024-05-21T08:48:40Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthJc",
                                           "createdAt":  "2024-05-21T10:14:16Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "The logs and binaries are shared with @grendello\u0027s Microsoft account via OneDrive 👍🏼",
                                           "updatedAt":  "2024-05-21T15:49:56Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthJh",
                                           "createdAt":  "2024-05-24T18:50:52Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "@grendello did the files I shared provide the details you need?\r\n\r\nTwo updates:\r\n- I just updated to VS 2022 17.11 Preview 1 and recreated my android emulator (Pixel 7 Pro, default settings). I got the `SIGSEGV` crash again on startup.\r\n- https://developercommunity.visualstudio.com/t/vs-167-xamarin-android-crash-on-start-up-in-debug/1139203 seems similar but might have a different cause.\r\n\r\nI added these points to the opening post.",
                                           "updatedAt":  "2024-05-24T19:17:46Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthJo",
                                           "createdAt":  "2024-05-24T19:45:16Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "@grendello regarding the `SIGABRT` error:\r\n\r\n\u003e [libc] Fatal signal 6 (SIGABRT), code -1 (SI_QUEUE) in tid 9193 (opment.showcase), pid 9193 (opment.showcase)\r\n\r\nI found I can trigger this error by clearing the user data \u0026 cache. I\u0027m not sure whether that is the only cause.\r\n\r\nLet\u0027s discuss the `SIGABRT` issue in https://github.com/xamarin/xamarin-android/issues/8982 and let\u0027s keep this issue focused on the `SIGSEGV` issue.",
                                           "updatedAt":  "2024-05-24T19:45:16Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthJ-",
                                           "createdAt":  "2024-06-05T09:59:24Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "grendello",
                                           "body":  "The segfault appears to be in the MonoVM interpreter, which is the default operation mode for Debug builds.  @hansmbakker could you try building and debugging your app with the `UseInterpreter` MSBuild property set to `false`?  This will disable hot reload, if you use it, but will help confirm/reject the theory that the issue is in the interpreter.\r\n\r\nAdditionally, would you be able to check if the issue also happens on an arm64 device?\r\n\r\nThe logs you provided had this stack trace for the segfault:\r\n\r\n```\r\nFatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x88e470ff in tid 17488 ([PACKAGE_ID]), pid 17488 ([PACKAGE_ID])\r\n*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\r\nBuild fingerprint: \u0027Infinix/X657-OP/Infinix-X657:10/QP1A.190711.020/AB-OP-220809V742:user/release-keys\u0027\r\nRevision: \u00270\u0027\r\nABI: \u0027arm\u0027\r\nTimestamp: 2024-05-20 14:08:56+0200\r\npid: 17488, tid: 17488, name: [PACKAGE]  \u003e\u003e\u003e [PACKAGE_ID] \u003c\u003c\u003c\r\nuid: 10211\r\nsignal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x88e470ff\r\n    r0  88e37100  r1  0000ffff  r2  00000020  r3  bec403d0\r\n    r4  9df2115a  r5  bec403b8  r6  88e37100  r7  bec99ea0\r\n    r8  bec403b8  r9  9df20d6e  r10 a948faa4  r11 00000000\r\n    ip  00000060  sp  bec403b8  lr  8a654b18  pc  8a54ead0\r\n\r\nbacktrace:\r\n      #00 pc 0012aad0  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#1 pc 00120f21  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#2 pc 001b2395  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_runtime_try_invoke+92) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#3 pc 001b1beb  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_runtime_class_init_full+870) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#4 pc 0013cef3  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#5 pc 0012bd67  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#6 pc 00122ac3  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#7 pc 00120f21  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#8 pc 001b2395  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_runtime_try_invoke+92) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#9 pc 001b1beb  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_runtime_class_init_full+870) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#10 pc 0012c6dd  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#11 pc 00127835  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#12 pc 00120f21  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#13 pc 001b2395  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_runtime_try_invoke+92) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#14 pc 001b1beb  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_runtime_class_init_full+870) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#15 pc 0013cef3  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#16 pc 0012bd67  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#17 pc 00122ac3  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#18 pc 00120f21  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#19 pc 001b2395  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_runtime_try_invoke+92) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#20 pc 001b1beb  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_runtime_class_init_full+870) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#21 pc 0018e859  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#22 pc 0012cf03  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#23 pc 0012c1a7  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#24 pc 0012283b  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#25 pc 00120f21  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#26 pc 001b2395  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_runtime_try_invoke+92) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#27 pc 001b1beb  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_runtime_class_init_full+870) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#28 pc 0013cef3  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#29 pc 0012bd67  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#30 pc 00122ac3  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#31 pc 00120f21  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#32 pc 001b16e3  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_runtime_invoke_checked+90) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#33 pc 001ba891  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#34 pc 0007cd37  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#35 pc 000c3e7d  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonosgen-2.0.so (mono_jit_init_version+6) (BuildId: 61d68248b8f30098925bcfe49bc7e8c61dcccb8d)\r\n      dotnet/android#36 pc 0001d193  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonodroid.so (xamarin::android::internal::MonodroidRuntime::create_domain(_JNIEnv*, xamarin::android::jstring_array_wrapper\u0026, bool, bool)+138) (BuildId: d3aaaa73f0ac4a2d4ef3e68eb48b7c4ff26146e7)\r\n      dotnet/android#37 pc 000204fb  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonodroid.so (xamarin::android::internal::MonodroidRuntime::create_and_initialize_domain(_JNIEnv*, _jclass*, xamarin::android::jstring_array_wrapper\u0026, xamarin::android::jstring_array_wrapper\u0026, _jobjectArray*, xamarin::android::jstring_array_wrapper\u0026, _jobject*, bool, bool, bool)+26) (BuildId: d3aaaa73f0ac4a2d4ef3e68eb48b7c4ff26146e7)\r\n      dotnet/android#38 pc 00023677  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonodroid.so (xamarin::android::internal::MonodroidRuntime::Java_mono_android_Runtime_initInternal(_JNIEnv*, _jclass*, _jstring*, _jobjectArray*, _jstring*, _jobjectArray*, int, _jobject*, _jobjectArray*, int, unsigned char, unsigned char)+3158) (BuildId: d3aaaa73f0ac4a2d4ef3e68eb48b7c4ff26146e7)\r\n      dotnet/android#39 pc 000264d5  /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/lib/arm/libmonodroid.so (Java_mono_android_Runtime_initInternal+52) (BuildId: d3aaaa73f0ac4a2d4ef3e68eb48b7c4ff26146e7)\r\n      dotnet/android#40 pc 000dc519  /apex/com.android.runtime/lib/libart.so (art_quick_generic_jni_trampoline+40) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#41 pc 000d7bc5  /apex/com.android.runtime/lib/libart.so (art_quick_invoke_stub_internal+68) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#42 pc 0043784b  /apex/com.android.runtime/lib/libart.so (art_quick_invoke_static_stub+246) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#43 pc 000dff77  /apex/com.android.runtime/lib/libart.so (art::ArtMethod::Invoke(art::Thread*, unsigned int*, unsigned int, art::JValue*, char const*)+186) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#44 pc 00211f27  /apex/com.android.runtime/lib/libart.so (art::interpreter::ArtInterpreterToCompiledCodeBridge(art::Thread*, art::ArtMethod*, art::ShadowFrame*, unsigned short, art::JValue*)+270) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#45 pc 0020edc5  /apex/com.android.runtime/lib/libart.so (bool art::interpreter::DoCall\u003ctrue, false\u003e(art::ArtMethod*, art::Thread*, art::ShadowFrame\u0026, art::Instruction const*, unsigned short, art::JValue*)+520) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#46 pc 004317c3  /apex/com.android.runtime/lib/libart.so (MterpInvokeStaticRange+182) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#47 pc 000d2c94  /apex/com.android.runtime/lib/libart.so (mterp_op_invoke_static_range+20) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#48 pc 00321d62  [anon:dalvik-classes2.dex extracted in memory from /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/base.apk!classes2.dex] (mono.MonoPackageManager.LoadApplication+418)\r\n      dotnet/android#49 pc 0042f1c1  /apex/com.android.runtime/lib/libart.so (MterpInvokeStatic+944) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#50 pc 000d2994  /apex/com.android.runtime/lib/libart.so (mterp_op_invoke_static+20) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#51 pc 00321ec2  [anon:dalvik-classes2.dex extracted in memory from /data/app/[PACKAGE_ID]-8UPy6FoIwKzlhppWzeoSbQ==/base.apk!classes2.dex] (mono.MonoRuntimeProvider.attachInfo+74)\r\n      dotnet/android#52 pc 0042cc59  /apex/com.android.runtime/lib/libart.so (MterpInvokeVirtual+1200) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#53 pc 000d2814  /apex/com.android.runtime/lib/libart.so (mterp_op_invoke_virtual+20) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#54 pc 0017e4ea  /system/framework/framework.jar (android.app.ActivityThread.installProvider+582)\r\n      dotnet/android#55 pc 004313ed  /apex/com.android.runtime/lib/libart.so (MterpInvokeDirectRange+684) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#56 pc 000d2c14  /apex/com.android.runtime/lib/libart.so (mterp_op_invoke_direct_range+20) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#57 pc 00186a8c  /system/framework/framework.jar (android.app.ActivityThread.installContentProviders+136)\r\n      dotnet/android#58 pc 0042eac5  /apex/com.android.runtime/lib/libart.so (MterpInvokeDirect+940) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#59 pc 000d2914  /apex/com.android.runtime/lib/libart.so (mterp_op_invoke_direct+20) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#60 pc 00183384  /system/framework/framework.jar (android.app.ActivityThread.handleBindApplication+2092)\r\n      dotnet/android#61 pc 0042eac5  /apex/com.android.runtime/lib/libart.so (MterpInvokeDirect+940) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#62 pc 000d2914  /apex/com.android.runtime/lib/libart.so (mterp_op_invoke_direct+20) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#63 pc 001803c0  /system/framework/framework.jar (android.app.ActivityThread.access$1500)\r\n      dotnet/android#64 pc 0042f1c1  /apex/com.android.runtime/lib/libart.so (MterpInvokeStatic+944) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#65 pc 000d2994  /apex/com.android.runtime/lib/libart.so (mterp_op_invoke_static+20) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#66 pc 0017c7e2  /system/framework/framework.jar (android.app.ActivityThread$H.handleMessage+1454)\r\n      dotnet/android#67 pc 0042cc59  /apex/com.android.runtime/lib/libart.so (MterpInvokeVirtual+1200) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#68 pc 000d2814  /apex/com.android.runtime/lib/libart.so (mterp_op_invoke_virtual+20) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#69 pc 002ec9be  /system/framework/framework.jar (android.os.Handler.dispatchMessage+38)\r\n      dotnet/android#70 pc 0042cc59  /apex/com.android.runtime/lib/libart.so (MterpInvokeVirtual+1200) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#71 pc 000d2814  /apex/com.android.runtime/lib/libart.so (mterp_op_invoke_virtual+20) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#72 pc 0031121e  /system/framework/framework.jar (android.os.Looper.loop+490)\r\n      dotnet/android#73 pc 0042f1c1  /apex/com.android.runtime/lib/libart.so (MterpInvokeStatic+944) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#74 pc 000d2994  /apex/com.android.runtime/lib/libart.so (mterp_op_invoke_static+20) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#75 pc 00186d76  /system/framework/framework.jar (android.app.ActivityThread.main+214)\r\n      dotnet/android#76 pc 001ee31b  /apex/com.android.runtime/lib/libart.so (_ZN3art11interpreterL7ExecuteEPNS_6ThreadERKNS_20CodeItemDataAccessorERNS_11ShadowFrameENS_6JValueEbb.llvm.18157134175573546908+170) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#77 pc 001f2cfd  /apex/com.android.runtime/lib/libart.so (art::interpreter::EnterInterpreterFromEntryPoint(art::Thread*, art::CodeItemDataAccessor const\u0026, art::ShadowFrame*)+120) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#78 pc 00421065  /apex/com.android.runtime/lib/libart.so (artQuickToInterpreterBridge+820) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#79 pc 000dc5a1  /apex/com.android.runtime/lib/libart.so (art_quick_to_interpreter_bridge+32) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#80 pc 000d7bc5  /apex/com.android.runtime/lib/libart.so (art_quick_invoke_stub_internal+68) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#81 pc 0043784b  /apex/com.android.runtime/lib/libart.so (art_quick_invoke_static_stub+246) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#82 pc 000dff77  /apex/com.android.runtime/lib/libart.so (art::ArtMethod::Invoke(art::Thread*, unsigned int*, unsigned int, art::JValue*, char const*)+186) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#83 pc 00377c47  /apex/com.android.runtime/lib/libart.so (art::(anonymous namespace)::InvokeWithArgArray(art::ScopedObjectAccessAlreadyRunnable const\u0026, art::ArtMethod*, art::(anonymous namespace)::ArgArray*, art::JValue*, char const*)+54) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#84 pc 00378f11  /apex/com.android.runtime/lib/libart.so (art::InvokeMethod(art::ScopedObjectAccessAlreadyRunnable const\u0026, _jobject*, _jobject*, _jobject*, unsigned int)+788) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#85 pc 00324933  /apex/com.android.runtime/lib/libart.so (art::Method_invoke(_JNIEnv*, _jobject*, _jobject*, _jobjectArray*)+30) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#86 pc 000bc7e7  /system/framework/arm/boot.oat (art_jni_trampoline+110) (BuildId: fc47f4430ec68d5fb6561492373c6dee0b3bd849)\r\n      dotnet/android#87 pc 000d7bc5  /apex/com.android.runtime/lib/libart.so (art_quick_invoke_stub_internal+68) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#88 pc 00437737  /apex/com.android.runtime/lib/libart.so (art_quick_invoke_stub+250) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#89 pc 000dff63  /apex/com.android.runtime/lib/libart.so (art::ArtMethod::Invoke(art::Thread*, unsigned int*, unsigned int, art::JValue*, char const*)+166) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#90 pc 00211f27  /apex/com.android.runtime/lib/libart.so (art::interpreter::ArtInterpreterToCompiledCodeBridge(art::Thread*, art::ArtMethod*, art::ShadowFrame*, unsigned short, art::JValue*)+270) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#91 pc 0020e141  /apex/com.android.runtime/lib/libart.so (bool art::interpreter::DoCall\u003cfalse, false\u003e(art::ArtMethod*, art::Thread*, art::ShadowFrame\u0026, art::Instruction const*, unsigned short, art::JValue*)+796) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#92 pc 0042c9fb  /apex/com.android.runtime/lib/libart.so (MterpInvokeVirtual+594) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#93 pc 000d2814  /apex/com.android.runtime/lib/libart.so (mterp_op_invoke_virtual+20) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#94 pc 0034b6aa  /system/framework/framework.jar (com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run+22)\r\n      dotnet/android#95 pc 001ee31b  /apex/com.android.runtime/lib/libart.so (_ZN3art11interpreterL7ExecuteEPNS_6ThreadERKNS_20CodeItemDataAccessorERNS_11ShadowFrameENS_6JValueEbb.llvm.18157134175573546908+170) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#96 pc 001f2cfd  /apex/com.android.runtime/lib/libart.so (art::interpreter::EnterInterpreterFromEntryPoint(art::Thread*, art::CodeItemDataAccessor const\u0026, art::ShadowFrame*)+120) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#97 pc 00421065  /apex/com.android.runtime/lib/libart.so (artQuickToInterpreterBridge+820) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#98 pc 000dc5a1  /apex/com.android.runtime/lib/libart.so (art_quick_to_interpreter_bridge+32) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#99 pc 008e14fb  /system/framework/arm/boot-framework.oat (com.android.internal.os.ZygoteInit.main+1818) (BuildId: b2e48c8875c5d0b32b33906ce4e3a85064f1a52e)\r\n      dotnet/android#100 pc 000d7bc5  /apex/com.android.runtime/lib/libart.so (art_quick_invoke_stub_internal+68) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#101 pc 0043784b  /apex/com.android.runtime/lib/libart.so (art_quick_invoke_static_stub+246) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#102 pc 000dff77  /apex/com.android.runtime/lib/libart.so (art::ArtMethod::Invoke(art::Thread*, unsigned int*, unsigned int, art::JValue*, char const*)+186) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#103 pc 00377c47  /apex/com.android.runtime/lib/libart.so (art::(anonymous namespace)::InvokeWithArgArray(art::ScopedObjectAccessAlreadyRunnable const\u0026, art::ArtMethod*, art::(anonymous namespace)::ArgArray*, art::JValue*, char const*)+54) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#104 pc 00377a79  /apex/com.android.runtime/lib/libart.so (art::InvokeWithVarArgs(art::ScopedObjectAccessAlreadyRunnable const\u0026, _jobject*, _jmethodID*, std::__va_list)+288) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#105 pc 002c0c53  /apex/com.android.runtime/lib/libart.so (art::JNI::CallStaticVoidMethodV(_JNIEnv*, _jclass*, _jmethodID*, std::__va_list)+490) (BuildId: a2cc79837d5bd352e66e1fa678c886ce)\r\n      dotnet/android#106 pc 0007e355  /system/lib/libandroid_runtime.so (_JNIEnv::CallStaticVoidMethod(_jclass*, _jmethodID*, ...)+28) (BuildId: f76385604c45ca2db012496a343b5fe4)\r\n      dotnet/android#107 pc 000807f9  /system/lib/libandroid_runtime.so (android::AndroidRuntime::start(char const*, android::Vector\u003candroid::String8\u003e const\u0026, bool)+572) (BuildId: f76385604c45ca2db012496a343b5fe4)\r\n      dotnet/android#108 pc 00002305  /system/bin/app_process32 (main+700) (BuildId: e29d7dcedb0e552be2c1c991ba3791ed)\r\n      dotnet/android#109 pc 00059277  /apex/com.android.runtime/lib/bionic/libc.so (__libc_init+66) (BuildId: 07cce35703874059d5e055635fc20472)\r\n      dotnet/android#110 pc 00002033  /system/bin/app_process32 (_start_main+42) (BuildId: e29d7dcedb0e552be2c1c991ba3791ed)\r\n      dotnet/android#111 pc 00004456  \u003canonymous:b47a4000\u003e\r\n\r\n```\r\n\r\nand frames 00 through 35 are symbolicated as follows:\r\n\r\n```\r\n0x12aad0    /__w/1/s/src/mono/mono/mini/interp/interp.c:7469\r\n0x120f21    /__w/1/s/src/mono/mono/mini/interp/interp.c:2109\r\n0x1b2395    /__w/1/s/src/mono/mono/metadata/object.c:2576\r\n0x1b1beb    /__w/1/s/src/mono/mono/metadata/object.c:551\r\n0x13cef3    /__w/1/s/src/mono/mono/mini/interp/transform.c:11407\r\n0x12bd67    /__w/1/s/src/mono/mono/mini/interp/interp.c:2822\r\n0x122ac3    /__w/1/s/src/mono/mono/mini/interp/interp.c:3639\r\n0x120f21    /__w/1/s/src/mono/mono/mini/interp/interp.c:2109\r\n0x1b2395    /__w/1/s/src/mono/mono/metadata/object.c:2576\r\n0x1b1beb    /__w/1/s/src/mono/mono/metadata/object.c:551\r\n0x12c6dd    /__w/1/s/src/mono/mono/mini/interp/interp.c:3495\r\n0x127835    /__w/1/s/src/mono/mono/mini/interp/interp.c:6165\r\n0x120f21    /__w/1/s/src/mono/mono/mini/interp/interp.c:2109\r\n0x1b2395    /__w/1/s/src/mono/mono/metadata/object.c:2576\r\n0x1b1beb    /__w/1/s/src/mono/mono/metadata/object.c:551\r\n0x13cef3    /__w/1/s/src/mono/mono/mini/interp/transform.c:11407\r\n0x12bd67    /__w/1/s/src/mono/mono/mini/interp/interp.c:2822\r\n0x122ac3    /__w/1/s/src/mono/mono/mini/interp/interp.c:3639\r\n0x120f21    /__w/1/s/src/mono/mono/mini/interp/interp.c:2109\r\n0x1b2395    /__w/1/s/src/mono/mono/metadata/object.c:2576\r\n0x1b1beb    /__w/1/s/src/mono/mono/metadata/object.c:551\r\n0x18e859    /__w/1/s/src/mono/mono/metadata/../metadata/icall-def.h:441\r\n0x12cf03    /__w/1/s/src/mono/mono/mini/interp/interp.c:2256\r\n0x12c1a7    /__w/1/s/src/mono/mono/mini/interp/interp.c:2354\r\n0x12283b    /__w/1/s/src/mono/mono/mini/interp/interp.c:4138\r\n0x120f21    /__w/1/s/src/mono/mono/mini/interp/interp.c:2109\r\n0x1b2395    /__w/1/s/src/mono/mono/metadata/object.c:2576\r\n0x1b1beb    /__w/1/s/src/mono/mono/metadata/object.c:551\r\n0x13cef3    /__w/1/s/src/mono/mono/mini/interp/transform.c:11407\r\n0x12bd67    /__w/1/s/src/mono/mono/mini/interp/interp.c:2822\r\n0x122ac3    /__w/1/s/src/mono/mono/mini/interp/interp.c:3639\r\n0x120f21    /__w/1/s/src/mono/mono/mini/interp/interp.c:2109\r\n0x1b16e3    /__w/1/s/src/mono/mono/metadata/object.c:2576\r\n0x1ba891    /__w/1/s/src/mono/mono/metadata/object.c:8176\r\n0x7cd37     /__w/1/s/src/mono/mono/mini/mini-runtime.c:4896\r\n0xc3e7d     /__w/1/s/src/mono/mono/mini/driver.c:2823\r\n```\r\n\r\nThe exact runtime version is `8.0.524.21615 @Commit: 087e15321bb712ef6fe8b0ba6f8bd12facf92629`",
                                           "updatedAt":  "2024-06-05T09:59:24Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6JthKD",
                                           "createdAt":  "2024-06-18T10:56:52Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "hansmbakker",
                                           "body":  "@grendello I\u0027m back and tested your suggestion:\r\n\r\n\u003e could you try building and debugging your app with the UseInterpreter MSBuild property set to false? This will disable hot reload, if you use it, but will help confirm/reject the theory that the issue is in the interpreter.\r\n\r\nAdding `\u003cUseInterpreter\u003efalse\u003c/UseInterpreter\u003e` might fix the issue - I added it to the first `\u003cPropertyGroup\u003e` of the app\u0027s csproj file and had at least to delete the app from the phone before it worked.\r\n\r\n\u003e Additionally, would you be able to check if the issue also happens on an arm64 device?\r\n\r\nThe issue happens on all architectures:\r\n- `arm`: an Infinix X657 with a `MT6580WP` processor (ARMv7 Processor rev 3 (v7l))\r\n- `x86_64`: my Pixel 7 emulator (it is an x86_64 image)\r\n- `arm64`: a Huawei P20 with a `Kirin970` processor (AArch64 Processor rev 2 (aarch64))\r\n\r\nThis issue still exists on VS 17.11 Preview 2; .NET SDK 8.0.302; MAUI 8.0.60.",
                                           "updatedAt":  "2024-06-19T15:43:30Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6tk8N6",
                                           "createdAt":  "2025-05-27T11:18:44Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "memsom",
                                           "body":  "Did any progress get made on this issue? We recently moved to a later framework and I now see this issue when running any build in debug mode with `UseInterpreter` on, when the debugger is inactive. That includes launching the app directly from the Android launcher. We already had a target that disables hot reload (as it sped up the debug process when we initially migrated to Maui) and that will run everything with no issues from what I can see. So far release mode is also fine. I think this started after we moved to .Net 9.  \n\n```\n2025-05-27 11:58:06.124 15822-15822 DEBUG                   pid-15822                            A    signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x0000000000000008\n2025-05-27 11:58:06.124 15822-15822 DEBUG                   pid-15822                            A  Cause: null pointer dereference\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A      x0  00000000000002f2  x1  0000000000000132  x2  0000000b00000024  x3  0000000100000026\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A      x4  b40000734f6f6850  x5  0000000000000004  x6  00000000003598cd  x7  0000000000000001\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A      x8  0000000000000000  x9  0000000000000000  x10 0000000000000000  x11 00000071102e47c2\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A      x12 00000071102e1a1e  x13 0000000000000048  x14 0000000000000000  x15 0000000000000000\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A      x16 000000711056dd38  x17 00000074986cc000  x18 00000074a6c9c000  x19 0000007fe0810870\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A      x20 00000071102e2784  x21 0000000000000132  x22 0000000000000001  x23 0000000000000000\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A      x24 0000000000000000  x25 0000000000000028  x26 0000000000000026  x27 b40000734f6e7ca8\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A      x28 0000000000000028  x29 0000007fe08107b0\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A      lr  0000007110446450  sp  0000007fe0810780  pc  00000071104451f4  pst 0000000080001000\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A  9 total frames\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A  backtrace:\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A        #00 pc 00000000001ca1f4  /data/app/~~FyRspduNVpAlNoNjZZvJag==/com.landguardsystems.indigo-NefkppuvfTHXEXk5PR10qg==/lib/arm64/libmonosgen-2.0.so (BuildId: 17c586cfd0bc1d67c08d86570f86834598009997)\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A        #01 pc 00000000001b4ae0  /data/app/~~FyRspduNVpAlNoNjZZvJag==/com.landguardsystems.indigo-NefkppuvfTHXEXk5PR10qg==/lib/arm64/libmonosgen-2.0.so (BuildId: 17c586cfd0bc1d67c08d86570f86834598009997)\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A        #02 pc 00000000001b44f8  /data/app/~~FyRspduNVpAlNoNjZZvJag==/com.landguardsystems.indigo-NefkppuvfTHXEXk5PR10qg==/lib/arm64/libmonosgen-2.0.so (BuildId: 17c586cfd0bc1d67c08d86570f86834598009997)\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A        #03 pc 00000000001cddb8  /data/app/~~FyRspduNVpAlNoNjZZvJag==/com.landguardsystems.indigo-NefkppuvfTHXEXk5PR10qg==/lib/arm64/libmonosgen-2.0.so (BuildId: 17c586cfd0bc1d67c08d86570f86834598009997)\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A        #04 pc 00000000001cdf70  /data/app/~~FyRspduNVpAlNoNjZZvJag==/com.landguardsystems.indigo-NefkppuvfTHXEXk5PR10qg==/lib/arm64/libmonosgen-2.0.so (BuildId: 17c586cfd0bc1d67c08d86570f86834598009997)\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A        #05 pc 00000000001a5d5c  /data/app/~~FyRspduNVpAlNoNjZZvJag==/com.landguardsystems.indigo-NefkppuvfTHXEXk5PR10qg==/lib/arm64/libmonosgen-2.0.so (BuildId: 17c586cfd0bc1d67c08d86570f86834598009997)\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A        #06 pc 00000000001a9680  /data/app/~~FyRspduNVpAlNoNjZZvJag==/com.landguardsystems.indigo-NefkppuvfTHXEXk5PR10qg==/lib/arm64/libmonosgen-2.0.so (BuildId: 17c586cfd0bc1d67c08d86570f86834598009997)\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A        #07 pc 00000000001a9b94  /data/app/~~FyRspduNVpAlNoNjZZvJag==/com.landguardsystems.indigo-NefkppuvfTHXEXk5PR10qg==/lib/arm64/libmonosgen-2.0.so (BuildId: 17c586cfd0bc1d67c08d86570f86834598009997)\n2025-05-27 11:58:06.125 15822-15822 DEBUG                   pid-15822                            A        #08 pc 0000000000008abc  \u003canonymous:74965e2000\u003e\n```",
                                           "updatedAt":  "2025-05-27T11:18:44Z"
                                       }
                                   ],
                         "totalCount":  18
                     },
        "title":  "Crash: `[libc] Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR)` during app startup",
        "labels":  [
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/102644",
        "createdAt":  "2024-05-24T03:41:00Z",
        "number":  102644,
        "author":  "smaybius",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-12-12T16:56:48Z",
        "body":  "### Description\n\nWhenever I try building a browser app that uses native assemblies or references a project that does, it errors out with\r\n`Parameter types of pinvoke callback method \u0027System.Int32 _PDG(Silk.NET.SDL.PfnMallocFunc, Silk.NET.SDL.PfnCallocFunc, Silk.NET.SDL.PfnReallocFunc, Silk.NET.SDL.PfnFreeFunc)\u0027 needs to be blittable.`\n\n### Reproduction Steps\n\n- Have code that uses `NativeMemory` wrapper methods either in the browser/WASM project or anything referenced by it\r\n- Build specifically the browser/WASM project\n\n### Expected behavior\n\nBuilds like normal\n\n### Actual behavior\n\nThat error pointing to WasmApp.Native.Targets\n\n### Regression?\n\nNo\n\n### Known Workarounds\n\nNone\n\n### Configuration\n\n.NET 8, Windows 11, x64, Avalonia web project, no browser involved (build error)\n\n### Other information\n\n_No response_",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOincwrg==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc5_NOwH",
                                           "createdAt":  "2024-05-28T00:35:57Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "Perksey",
                                           "body":  "This is related to #61146, which was closed with a partial fix: to my knowledge, unmanaged structs are still considered not blittable unless the declaring assembly has disabled runtime marshalling. Silk.NET has not done this, primarily because we’d have to ifdef that given our support for NS20 and our assessment was that going through this effort wasn’t strictly necessary as, given that we were using blittable bindings already, there would be no difference. \r\n\r\nPfn prefixed structures contain a single void* field. We changed this from being a function pointer field to workaround another mono bug, but the details there have been lost to time.\r\n\r\nIf it is the team’s assessment that unmanaged structures are not considered blittable then we’d be happy to ifdef in the next Silk.NET update.",
                                           "updatedAt":  "2024-05-28T00:38:18Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6IL5rH",
                                           "createdAt":  "2024-08-12T20:09:22Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "cc @kg ",
                                           "updatedAt":  "2024-08-12T20:09:22Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6IL-Pu",
                                           "createdAt":  "2024-08-12T20:21:45Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "kg",
                                           "body":  "We have test coverage for passing simple unmanaged structs to pinvokes, as you can see here: https://github.com/dotnet/runtime/blob/69bb1a4ff6d4675d937920aab9c3933ff39e480c/src/mono/wasm/Wasm.Build.Tests/PInvokeTableGeneratorTests.cs#L861\r\n\r\nSo if it\u0027s not working for you, please file a new issue. You\u0027re probably hitting some combination of features or corner case I didn\u0027t know about (sorry!)",
                                           "updatedAt":  "2024-08-12T20:21:45Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6KduJ-",
                                           "createdAt":  "2024-08-31T21:26:16Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "smaybius",
                                           "body":  "Now this error comes up: Parameter types of pinvoke callback method \u0027System.Int32 _UOZ(Silk.NET.SDL.PfnMallocFunc, Silk.NET.SDL.PfnCallocFunc, Silk.NET.SDL.PfnReallocFunc, Silk.NET.SDL.PfnFreeFunc)\u0027 needs to be blittable.\tNoiseMachineDotNet.Browser\tC:\\Program Files\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\8.0.8\\Sdk\\WasmApp.Native.targets\t338\t\r\n",
                                           "updatedAt":  "2024-08-31T21:26:16Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6Kdu30",
                                           "createdAt":  "2024-08-31T21:41:12Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "Can you extract a test case/way to reproduce this? it isn\u0027t clear what actual types are involved here.",
                                           "updatedAt":  "2024-08-31T21:41:24Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6Kdu-P",
                                           "createdAt":  "2024-08-31T21:43:25Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "smaybius",
                                           "body":  "\u003e Can you extract a test case/way to reproduce this? it isn\u0027t clear what actual types are involved here.\r\n\r\nIn VS, build NoiseMachineDotNet.Browser, and it\u0027ll immediately fail. https://github.com/smaybius/NoiseMachine",
                                           "updatedAt":  "2024-08-31T21:43:25Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6Kdy4T",
                                           "createdAt":  "2024-08-31T23:06:41Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "Perksey",
                                           "body":  "So I want to preface this by saying our interop source generator is particularly cursed in 2.X given that it was built around a model of dynamic linking using libraries like libdl, libc, kernel32, etc in a stateful manner, which made us get creative when it came to support things like __Internal which must go through the DllImport system.\r\n\r\nHaving looked at the code that the SilkTouch source generator outputs, this should be a minimal repro. I have not tested it nor compiled it, literally just wrote it in this issue.\r\n\r\n- [PfnMallocFunc](https://github.com/dotnet/Silk.NET/blob/main/src/Windowing/Silk.NET.SDL/Structs/PfnMallocFunc.gen.cs)\r\n- [PfnCallocFunc](https://github.com/dotnet/Silk.NET/blob/main/src/Windowing/Silk.NET.SDL/Structs/PfnCallocFunc.gen.cs)\r\n- [PfnReallocFunc](https://github.com/dotnet/Silk.NET/blob/main/src/Windowing/Silk.NET.SDL/Structs/PfnReallocFunc.gen.cs)\r\n- [PfnFreeFunc](https://github.com/dotnet/Silk.NET/blob/main/src/Windowing/Silk.NET.SDL/Structs/PfnFreeFunc.gen.cs)\r\n\r\n```cs\r\npublic class Sdl\r\n{\r\n  private _HWN _ctx = new();\r\n  private sealed class _HWN\r\n  {\r\n    [UnmanagedCallersOnly(CallConvs = new Type[] {typeof (CallConvCdecl)})]\r\n    private static int _UOZ(\r\n      PfnMallocFunc p0,\r\n      PfnCallocFunc p1,\r\n      PfnReallocFunc p2,\r\n      PfnFreeFunc p3)\r\n    {\r\n      return Sdl._HWN._TIT(p0, p1, p2, p3);\r\n    }\r\n    [DllImport(\"__Internal\", EntryPoint = \"SDL_SetMemoryFunctions\", CallingConvention = (CallingConvention) 2)]\r\n    private static extern int _TIT(\r\n      PfnMallocFunc p0,\r\n      PfnCallocFunc p1,\r\n      PfnReallocFunc p2,\r\n      PfnFreeFunc p3);\r\n\r\n    public unsafe nint CoreGetProcAddress(string p, int? s = null)\r\n    {\r\n      switch (p)\r\n      {\r\n        case \"SDL_SetMemoryFunctions\":\r\n          return (nint)(void*)(delegate* unmanaged[Cdecl]\u003cPfnMallocFunc, PfnCallocFunc, PfnReallocFunc, PfnFreeFunc, int\u003e) \u0026_UOZ;\r\n        default:\r\n          throw new (\"ahhh!\");\r\n      }\r\n    }\r\n  }\r\n  public int SetMemoryFunctions(\r\n    PfnMallocFunc malloc_func,\r\n    PfnCallocFunc calloc_func,\r\n    PfnReallocFunc realloc_func,\r\n    PfnFreeFunc free_func)\r\n  {\r\n    return ((delegate* unmanaged[Cdecl]\u003cPfnMallocFunc, PfnCallocFunc, PfnReallocFunc, PfnFreeFunc, int\u003e)(void*) _ctx.CoreGetProcAddress(\"SDL_SetMemoryFunctions\"))(malloc_func, calloc_func, realloc_func, free_func);\r\n  }\r\n}\r\n```\r\n\r\nI think this is down to the \"pointers are considered managed\" issue which I think I raised in the blog post corresponding to the tracker at #94187. Just a guess though, as I thought that was fixed.",
                                           "updatedAt":  "2024-08-31T23:07:58Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6Kdy_8",
                                           "createdAt":  "2024-08-31T23:09:16Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "Perksey",
                                           "body":  "By the way, Silk.NET on browser will probably fail for other reasons, I barely got it working last time I tried (#94187) because of the issues with our interop architecture as above (with __Internal as such). I think for SDL specifically it might not be impossible to get working given that we have the __Internal path generated in our NuGet already, but you\u0027re still not going to have a good time. So best of luck to you OP, you will need it!\r\n\r\nThis doesn\u0027t detract from the merit of this issue though.",
                                           "updatedAt":  "2024-08-31T23:09:16Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6KdzCu",
                                           "createdAt":  "2024-08-31T23:10:13Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHODwlHMQ==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "kg",
                                                                               "createdAt":  "2024-08-31T23:18:26Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "Perksey",
                                           "body":  "@kg I must\u0027ve missed your comment but it seems the \"pointers a la `void*` in a struct\" test case isn\u0027t covered in the tests you linked.",
                                           "updatedAt":  "2024-08-31T23:10:13Z"
                                       }
                                   ],
                         "totalCount":  9
                     },
        "title":  "Parameter types of pinvoke callback method \u0027System.Int32 _PDG(Silk.NET.SDL.PfnMallocFunc, Silk.NET.SDL.PfnCallocFunc, Silk.NET.SDL.PfnReallocFunc, Silk.NET.SDL.PfnFreeFunc)\u0027 needs to be blittable.",
        "labels":  [
                       "arch-wasm",
                       "area-Interop-mono",
                       "needs-further-triage"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/104391",
        "createdAt":  "2024-07-03T17:58:26Z",
        "number":  104391,
        "author":  "SingleAccretion",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2025-07-03T20:26:46Z",
        "body":  "Reproduction:\r\n```\r\n\u003e dotnet new wasmconsole\r\n```\r\n```cs\r\nusing System;\r\nusing System.Runtime.InteropServices;\r\n\r\npublic unsafe class Program\r\n{\r\n    public static void Main()\r\n    {\r\n        nint fptr = Marshal.GetFunctionPointerForDelegate(new Action(() =\u003e Console.WriteLine(\"Managed method callee\")));\r\n        ((delegate* unmanaged\u003cvoid\u003e)fptr)();\r\n    }\r\n}\r\n```\r\n```\r\n\u003e dotnet run\r\n```\r\nExpected result: no crash.\r\nActual result:\r\n```\r\nRuntimeError: memory access out of bounds\r\n    at strlen (wasm://wasm/03d4c862:wasm-function[12385]:0x28e52f)\r\n    at get_native_to_interp (wasm://wasm/03d4c862:wasm-function[13709]:0x2b0d0f)\r\n    at mono_wasm_get_native_to_interp_trampoline (wasm://wasm/03d4c862:wasm-function[4997]:0x14a8bb)\r\n    at interp_create_method_pointer (wasm://wasm/03d4c862:wasm-function[155]:0x1a9f2)\r\n    at jit_compile_method_with_opt_cb (wasm://wasm/03d4c862:wasm-function[4749]:0x134c4e)\r\n    at mono_llvm_cpp_catch_exception (wasm://wasm/03d4c862:wasm-function[4999]:0x14a92f)\r\n    at mono_llvm_catch_exception (wasm://wasm/03d4c862:wasm-function[5066]:0x14f5f8)\r\n    at jit_compile_method_with_opt (wasm://wasm/03d4c862:wasm-function[4748]:0x134b5e)\r\n    at mono_jit_compile_method (wasm://wasm/03d4c862:wasm-function[4746]:0x134981)\r\n    at mono_compile_method_checked (wasm://wasm/03d4c862:wasm-function[3628]:0xf908b)\r\n    at mono_delegate_to_ftnptr_impl (wasm://wasm/03d4c862:wasm-function[3142]:0xdb697)\r\n    at ves_icall_System_Runtime_InteropServices_Marshal_GetFunctionPointerForDelegateInternal (wasm://wasm/03d4c862:wasm-function[3268]:0xe45dc)\r\n    at ves_icall_System_Runtime_InteropServices_Marshal_GetFunctionPointerForDelegateInternal_raw (wasm://wasm/03d4c862:wasm-function[2835]:0xcc674)\r\n    at do_icall (wasm://wasm/03d4c862:wasm-function[206]:0x1d577)\r\n    at do_icall_wrapper (wasm://wasm/03d4c862:wasm-function[126]:0x19979)\r\n    at mono_interp_exec_method (wasm://wasm/03d4c862:wasm-function[117]:0xb236)\r\n    at interp_runtime_invoke (wasm://wasm/03d4c862:wasm-function[160]:0x1aed3)\r\n    at mono_jit_runtime_invoke (wasm://wasm/03d4c862:wasm-function[4781]:0x1387a9)\r\n    at do_runtime_invoke (wasm://wasm/03d4c862:wasm-function[3600]:0xf6dfe)\r\n    at mono_runtime_invoke_checked (wasm://wasm/03d4c862:wasm-function[3599]:0xf6d98)\r\n    at mono_runtime_try_invoke_byrefs (wasm://wasm/03d4c862:wasm-function[3697]:0xfd55c)\r\n    at ves_icall_InternalInvoke (wasm://wasm/03d4c862:wasm-function[2620]:0xc15dd)\r\n    at ves_icall_InternalInvoke_raw (wasm://wasm/03d4c862:wasm-function[2783]:0xca1b9)\r\n    at do_icall (wasm://wasm/03d4c862:wasm-function[206]:0x1d64c)\r\n    at do_icall_wrapper (wasm://wasm/03d4c862:wasm-function[126]:0x19979)\r\n    at mono_interp_exec_method (wasm://wasm/03d4c862:wasm-function[117]:0xb236)\r\n    at interp_runtime_invoke (wasm://wasm/03d4c862:wasm-function[160]:0x1aed3)\r\n    at mono_jit_runtime_invoke (wasm://wasm/03d4c862:wasm-function[4781]:0x1387a9)\r\n    at do_runtime_invoke (wasm://wasm/03d4c862:wasm-function[3600]:0xf6dfe)\r\n    at mono_runtime_try_invoke (wasm://wasm/03d4c862:wasm-function[3609]:0xf787d)\r\n    at mono_runtime_invoke (wasm://wasm/03d4c862:wasm-function[3646]:0xfa46c)\r\n    at mono_wasm_invoke_jsexport (wasm://wasm/03d4c862:wasm-function[13673]:0x2af762)\r\n```\r\nMore context: https://github.com/dotnet/runtimelab/issues/2624.",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOl1pW1w==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc6Diri_",
                                           "createdAt":  "2024-07-03T17:58:35Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "dotnet-policy-service",
                                           "body":  "Tagging subscribers to \u0027arch-wasm\u0027: @lewing\nSee info in area-owners.md if you want to be subscribed.\n\u003c!-- Policy app identification https://img.shields.io/static/v1?label=PullRequestIssueManagement. --\u003e",
                                           "updatedAt":  "2024-07-03T17:58:35Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6DiyKt",
                                           "createdAt":  "2024-07-03T18:15:14Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "nazar554",
                                           "body":  "I don\u0027t think that it matters here, but isn\u0027t `GC.KeepAlive` required to keep the delegate alive?",
                                           "updatedAt":  "2024-07-03T18:15:30Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6DizKU",
                                           "createdAt":  "2024-07-03T18:18:05Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "SingleAccretion",
                                           "body":  "\u003e I don\u0027t think that it matters here, but isn\u0027t GC.KeepAlive required to keep the delegate alive?\r\n\r\nYes, in actual code one needs to keep the delegate alive explicitly.",
                                           "updatedAt":  "2024-07-03T18:18:05Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6D0PWG",
                                           "createdAt":  "2024-07-05T23:46:04Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "dotnet-policy-service",
                                           "body":  "Tagging subscribers to this area: @brzvlad, @kotlarmilos\nSee info in [area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md) if you want to be subscribed.\n\u003c!-- Policy app identification https://img.shields.io/static/v1?label=PullRequestIssueManagement. --\u003e",
                                           "updatedAt":  "2024-07-05T23:46:04Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6HjHd5",
                                           "createdAt":  "2024-08-07T18:50:02Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "BrzVlad",
                                           "body":  "This particular crash is caused by a failure to obtain the managed method associated with a native to managed wrapper. However, even if we were to fix this, the testcase couldn\u0027t possible work on wasm interp nowadays. This is because, in order to obtain a ftnptr for entering execution of a method with interpreter, we require a thunk that receives all arguments of the call and calls into interpreter while passing an additional argument, the interp method to execute. Currently, these thunks are generated during app compilation, by build tasks in `PInvokeTableGenerator.cs`, only for methods with `UnmanagedCallersOnly` attribute. Given `Marshal.GetFunctionPointerForDelegate` requires a delegate, which I don\u0027t think can be created for a method with `UnmanagedCallersOnly` attribute, this API can\u0027t work on wasm interp.\r\n\r\nI think a fix for this would be to completely stop relying, if possible, on the pinvoke table generator and always generate these thunks on the fly with the wasm jit support. Was this already brought into discussion ? @lewing @kg ",
                                           "updatedAt":  "2024-08-07T18:50:02Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6HjoTA",
                                           "createdAt":  "2024-08-07T20:10:14Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "kg",
                                           "body":  "I think I\u0027ve raised the possibility of jitting trampolines for this in browser WASM before but we\u0027ve never had a discussion about whether to do it or when.\r\n\r\nIt seems like we could do it on android too (do we already?) but couldn\u0027t do it on iOS or wasi.",
                                           "updatedAt":  "2024-08-07T20:10:14Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6Ig4hS",
                                           "createdAt":  "2024-08-15T01:48:54Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "There are some separate issues here:\r\n\r\n1. we\u0027re running strlen on a null string instead of throwing PNSE like it used to\r\n2. on browser we could jit trampolines, should we?\r\n3. on wasi we could do something terrible hacks with preallocating pools by signature if we really needed to\r\n\r\nI would definitely like to fix 1.",
                                           "updatedAt":  "2024-08-28T22:00:53Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6XWlbX",
                                           "createdAt":  "2024-12-12T15:25:17Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "I need to verify that this throws an exception rather than crashing now.",
                                           "updatedAt":  "2024-12-12T15:25:17Z"
                                       }
                                   ],
                         "totalCount":  8
                     },
        "title":  "[Mono/WASM] `Marshal.GetFunctionPointerForDelegate` crashes the runtime",
        "labels":  [
                       "arch-wasm",
                       "area-Codegen-Interpreter-mono",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/106529",
        "createdAt":  "2024-08-16T10:54:21Z",
        "number":  106529,
        "author":  "SingleAccretion",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2024-12-12T16:55:41Z",
        "body":  "Reproduction:\r\n```cs\r\nusing System;\r\nusing System.Runtime.InteropServices;\r\nusing System.Runtime.InteropServices.JavaScript;\r\n\r\npublic unsafe class Program\r\n{\r\n    public static void Main()\r\n    {\r\n        ((delegate* unmanaged\u003cint, void\u003e)\u0026RpiContext.NativeToManagedMethod)(42);\r\n    }\r\n}\r\n\r\nstatic class RpiContext\r\n{\r\n    [UnmanagedCallersOnly]\r\n    public static void NativeToManagedMethod(int context)\r\n    {\r\n        Console.WriteLine($\"NativeToManagedMethod called with: {context}\");\r\n    }\r\n}\r\n```\r\n```\r\n\u003e dotnet run\r\nMONO_WASM: null function or function signature mismatch\r\nRuntimeError: null function or function signature mismatch\r\n    at wasm://wasm/00b598c2:wasm-function[290]:0x1ef46\r\n    at wasm://wasm/00b598c2:wasm-function[221]:0x1c652\r\n    at wasm://wasm/00b598c2:wasm-function[212]:0xebf4\r\n    at wasm://wasm/00b598c2:wasm-function[249]:0x1d1cd\r\n    at wasm://wasm/00b598c2:wasm-function[3228]:0xf0b77\r\n    at wasm://wasm/00b598c2:wasm-function[2549]:0xc66e2\r\n    at wasm://wasm/00b598c2:wasm-function[2548]:0xc6672\r\n    at wasm://wasm/00b598c2:wasm-function[1907]:0xa0d44\r\n    at wasm://wasm/00b598c2:wasm-function[290]:0x1efee\r\n    at wasm://wasm/00b598c2:wasm-function[221]:0x1c652\r\n```\r\n```\r\n; Add \u003cWasmNativeStrip\u003efalse\u003c/WasmNativeStrip\u003e to the project file to trigger relink\r\ndotnet run\r\n```\r\n```\r\nNativeToManagedMethod called with: 42\r\n```",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOixZSow==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc6IsNFf",
                                           "createdAt":  "2024-08-16T10:54:29Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "dotnet-policy-service",
                                           "body":  "Tagging subscribers to \u0027arch-wasm\u0027: @lewing\nSee info in [area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md) if you want to be subscribed.\n\u003c!-- Policy app identification https://img.shields.io/static/v1?label=PullRequestIssueManagement. --\u003e",
                                           "updatedAt":  "2024-08-16T10:54:29Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6KDhi6",
                                           "createdAt":  "2024-08-28T20:19:36Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "The issue is here is compiling code with a UCO basically means WasmBuildNative must be true but we\u0027d need something like a compat analyzer to detect this because tasks that could detect if also require WasmBuildNavtive=true (and the workload) to run.",
                                           "updatedAt":  "2024-08-28T20:21:26Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6LFlKj",
                                           "createdAt":  "2024-09-06T08:11:50Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "maraf",
                                           "body":  "Could we use Roslyn source generator to output something that we would read in MSBuild and set WasmBuildNative=true accordingly?",
                                           "updatedAt":  "2024-09-06T08:12:01Z"
                                       }
                                   ],
                         "totalCount":  3
                     },
        "title":  "UnmanagedCallersOnly methods crash at runtime without relink",
        "labels":  [
                       "arch-wasm",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/107212",
        "createdAt":  "2024-08-30T20:36:25Z",
        "number":  107212,
        "author":  "lewing",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2025-02-19T12:25:30Z",
        "body":  "\r\n\r\n\r\nUsing https://github.com/bytecodealliance/wit-bindgen/pull/958\r\nto run `cargo test -p wit-bindgen-cli --no-default-features -F csharp-mono` we see the following errors on mono\r\n```\r\nrunning 27 tests\r\ntest flavorful::run ... ok\r\ntest other_dependencies::run ... ok\r\ntest ownership::run ... ok\r\ntest lists::run has been running for over 60 seconds\r\ntest many_arguments::run has been running for over 60 seconds\r\ntest numbers::run has been running for over 60 seconds\r\ntest options::run has been running for over 60 seconds\r\ntest records::run has been running for over 60 seconds\r\ntest resource_aggregates::run has been running for over 60 seconds\r\ntest resource_alias::run has been running for over 60 seconds\r\ntest resource_alias_redux::run has been running for over 60 seconds\r\ntest resource_borrow_export::run has been running for over 60 seconds\r\ntest resource_borrow_import::run has been running for over 60 seconds\r\ntest resource_borrow_in_record::run has been running for over 60 seconds\r\ntest resource_borrow_simple::run has been running for over 60 seconds\r\ntest resource_floats::run has been running for over 60 seconds\r\ntest resource_import_and_export::run has been running for over 60 seconds\r\ntest resource_into_inner::run has been running for over 60 seconds\r\ntest resource_with_lists::run has been running for over 60 seconds\r\ntest resource_borrow_simple::run ... ok\r\nTODO: cabi_post_test:resource-borrow-in-record/test#[constructor]thing\r\nTODO: cabi_post_test:resource-borrow-in-record/test#[constructor]thing\r\nTODO: cabi_post_test:resource-with-lists/test#[constructor]thing\r\nTODO: cabi_post_test:resource-with-lists/test#[method]thing.foo\r\nTODO: cabi_post_test:resource-borrow-in-record/test#test\r\nTODO: cabi_post_test:resource-with-lists/test#[method]thing.foo\r\nTODO: cabi_post_test:resource-borrow-in-record/test#[method]thing.get\r\nTODO: cabi_post_test:resource-with-lists/test#[static]thing.baz\r\nTODO: cabi_post_test:resource-borrow-in-record/test#[method]thing.get\r\ntest resource_borrow_in_record::run ... ok\r\ntest resource_with_lists::run ... ok\r\nTODO: cabi_post_test:records/test#multiple-results\r\nTODO: cabi_post_test:records/test#swap-tuple\r\nTODO: cabi_post_test:records/test#roundtrip-flags1\r\nTODO: cabi_post_test:records/test#roundtrip-flags1\r\nTODO: cabi_post_test:records/test#roundtrip-flags1\r\nTODO: cabi_post_test:records/test#roundtrip-flags1\r\nTODO: cabi_post_test:records/test#roundtrip-flags2\r\nTODO: cabi_post_test:records/test#roundtrip-flags2\r\nTODO: cabi_post_test:records/test#roundtrip-flags2\r\nTODO: cabi_post_test:records/test#roundtrip-flags2\r\nTODO: cabi_post_test:records/test#roundtrip-record1\r\nTODO: cabi_post_test:resource-alias/e1#[constructor]x\r\nTODO: cabi_post_test:records/test#roundtrip-record1\r\nTODO: cabi_post_test:records/test#tuple1\r\nTODO: cabi_post_test:resource-alias/e1#a\r\nTODO: cabi_post_test:resource-alias/e1#[constructor]x\r\nTODO: cabi_post_test:resource-alias/e1#[constructor]x\r\nTODO: cabi_post_test:resource-alias/e1#[constructor]x\r\nTODO: cabi_post_test:resource-alias/e2#a\r\ntest records::run ... ok\r\ntest resource_alias::run ... ok\r\ntest rust_xcrate::run ... ok\r\ntest type_section_suffix::run ... ok\r\nTODO: cabi_post_test:resource-import-and-export/test#[constructor]thing\r\nTODO: cabi_post_test:resource-import-and-export/test#[method]thing.foo\r\nTODO: cabi_post_test:resource-import-and-export/test#[method]thing.foo\r\nTODO: cabi_post_test:resource-import-and-export/test#[constructor]thing\r\nTODO: cabi_post_test:resource-import-and-export/test#[static]thing.baz\r\nTODO: cabi_post_test:resource-import-and-export/test#[method]thing.foo\r\ntest resource_import_and_export::run ... ok\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\nTODO: cabi_post_test:resource-aggregates/test#[constructor]thing\r\ntest many_arguments::run ... FAILED\r\nTODO: deallocate buffer for indirect parameters\r\nTODO: cabi_post_test:resource-aggregates/test#foo\r\ntest resource_into_inner::run ... ok\r\ntest resource_aggregates::run ... ok\r\nTODO: cabi_post_allocated-bytes\r\nhello!\r\nhello,\r\nworld!\r\n0\r\n65535\r\n-32768\r\n32767\r\nTODO: cabi_post_test:lists/test#empty-list-result\r\nTODO: cabi_post_test:lists/test#empty-string-result\r\nTODO: cabi_post_test:lists/test#list-result\r\nTODO: cabi_post_test:lists/test#list-result2\r\nTODO: cabi_post_test:lists/test#list-result3\r\nTODO: cabi_post_test:lists/test#string-roundtrip\r\nTODO: cabi_post_test:lists/test#string-roundtrip\r\nTODO: cabi_post_test:lists/test#string-roundtrip\r\nTODO: cabi_post_allocated-bytes\r\ntest lists::run ... ok\r\nTODO: cabi_post_exports#[constructor]float\r\nTODO: cabi_post_exports#[method]float.get\r\nTODO: cabi_post_test\r\nTODO: cabi_post_exports#[static]float.add\r\nTODO: cabi_post_exports#[method]float.get\r\nTODO: cabi_post_test:resource-alias-redux/resource-alias1#[constructor]thing\r\nTODO: cabi_post_test:resource-alias-redux/resource-alias1#a\r\nTODO: cabi_post_test:resource-alias-redux/resource-alias1#[method]thing.get\r\nTODO: cabi_post_test:resource-alias-redux/resource-alias1#[constructor]thing\r\nTODO: cabi_post_test:resource-alias-redux/resource-alias1#[constructor]thing\r\ntest resource_floats::run ... okTODO: cabi_post_test:resource-alias-redux/resource-alias2#b\r\n\r\nTODO: cabi_post_test:resource-alias-redux/resource-alias1#[method]thing.get\r\nTODO: cabi_post_test:resource-alias-redux/resource-alias1#[method]thing.get\r\ntest resource_alias_redux::run ... ok\r\nTODO: cabi_post_test:numbers/test#roundtrip-u8\r\nTODO: cabi_post_test:numbers/test#roundtrip-u8\r\nTODO: cabi_post_test:numbers/test#roundtrip-u8\r\nTODO: cabi_post_test:numbers/test#roundtrip-s8\r\nTODO: cabi_post_test:numbers/test#roundtrip-s8\r\nTODO: cabi_post_test:numbers/test#roundtrip-s8\r\nTODO: cabi_post_test:numbers/test#roundtrip-u16\r\nTODO: cabi_post_test:numbers/test#roundtrip-u16\r\nTODO: cabi_post_test:numbers/test#roundtrip-u16\r\nTODO: cabi_post_test:numbers/test#roundtrip-s16\r\nTODO: cabi_post_test:numbers/test#roundtrip-s16\r\nTODO: cabi_post_test\r\nTODO: cabi_post_test:numbers/test#roundtrip-s16\r\nTODO: cabi_post_test:numbers/test#roundtrip-u32\r\nTODO: cabi_post_test:numbers/test#roundtrip-u32\r\nTODO: cabi_post_test:numbers/test#roundtrip-u32\r\nTODO: cabi_post_test:options/test#option-none-result\r\nTODO: cabi_post_test:numbers/test#roundtrip-s32\r\nTODO: cabi_post_test:numbers/test#roundtrip-s32\r\nTODO: cabi_post_test:numbers/test#roundtrip-s32\r\nTODO: cabi_post_test:options/test#option-some-result\r\nTODO: cabi_post_test:numbers/test#roundtrip-u64\r\nTODO: cabi_post_test:numbers/test#roundtrip-u64\r\nTODO: cabi_post_test:numbers/test#roundtrip-u64\r\nTODO: cabi_post_test:numbers/test#roundtrip-s64\r\nTODO: cabi_post_test:numbers/test#roundtrip-s64\r\nTODO: cabi_post_test:options/test#option-roundtrip\r\nTODO: cabi_post_test:numbers/test#roundtrip-s64\r\nTODO: cabi_post_test:numbers/test#roundtrip-f32\r\nTODO: cabi_post_test:numbers/test#roundtrip-f32\r\nTODO: cabi_post_test:options/test#double-option-roundtrip\r\nTODO: cabi_post_test:numbers/test#roundtrip-f32\r\nTODO: cabi_post_test:options/test#double-option-roundtrip\r\nTODO: cabi_post_test:numbers/test#roundtrip-f32\r\nTODO: cabi_post_test:options/test#double-option-roundtrip\r\nTODO: cabi_post_test:numbers/test#roundtrip-f64\r\nTODO: cabi_post_test:numbers/test#roundtrip-f64\r\nTODO: cabi_post_test:numbers/test#roundtrip-f64\r\nTODO: cabi_post_test:numbers/test#roundtrip-f64\r\nTODO: cabi_post_test:numbers/test#roundtrip-char\r\nTODO: cabi_post_test:numbers/test#roundtrip-char\r\nTODO: cabi_post_test:numbers/test#roundtrip-char\r\nTODO: cabi_post_test:numbers/test#get-scalar\r\nTODO: cabi_post_test:numbers/test#get-scalar\r\ntest resource_borrow_import::run ... ok\r\nTODO: cabi_post_test:resource-borrow-export/test#[constructor]thing\r\nTODO: cabi_post_test:resource-borrow-export/test#foo\r\ntest options::run ... ok\r\ntest numbers::run ... ok\r\ntest resource_borrow_export::run ... ok\r\ntest resources::run has been running for over 60 seconds\r\ntest results::run has been running for over 60 seconds\r\ntest smoke::run has been running for over 60 seconds\r\ntest strings::run has been running for over 60 seconds\r\ntest variants::run has been running for over 60 seconds\r\ntest versions::run has been running for over 60 seconds\r\ntest versions::run ... FAILED\r\nTODO: cabi_post_test:results/test#string-error\r\nTODO: cabi_post_test:results/test#string-error\r\nTODO: cabi_post_test:results/test#enum-error\r\nTODO: cabi_post_test:results/test#enum-error\r\nTODO: cabi_post_test:results/test#record-error\r\nTODO: cabi_post_test:results/test#record-error\r\nTODO: cabi_post_test:results/test#record-error\r\nTODO: cabi_post_test:results/test#variant-error\r\nTODO: cabi_post_test:results/test#variant-error\r\nTODO: cabi_post_test:results/test#variant-error\r\nTODO: cabi_post_test:results/test#empty-error\r\nTODO: cabi_post_test:results/test#empty-error\r\nTODO: cabi_post_test:results/test#empty-error\r\nTODO: cabi_post_test:results/test#double-error\r\nTODO: cabi_post_test:results/test#double-error\r\nTODO: cabi_post_test:results/test#double-error\r\ntest smoke::run ... ok\r\ntest results::run ... ok\r\nTODO: cabi_post_return-empty\r\nTODO: cabi_post_roundtrip\r\nTODO: cabi_post_exports#test-imports\r\nTODO: cabi_post_roundtrip\r\nTODO: cabi_post_exports#[constructor]x\r\nTODO: cabi_post_exports#[method]x.get-a\r\nTODO: cabi_post_exports#[method]x.get-a\r\nTODO: cabi_post_exports#[constructor]z\r\nTODO: cabi_post_exports#[method]z.get-a\r\nTODO: cabi_post_exports#[constructor]z\r\nTODO: cabi_post_exports#[method]z.get-a\r\nTODO: cabi_post_exports#[static]x.add\r\nTODO: cabi_post_exports#[method]x.get-a\r\nTODO: cabi_post_exports#add\r\nTODO: cabi_post_exports#[method]z.get-a\r\nTODO: cabi_post_exports#[static]z.num-dropped\r\nTODO: cabi_post_exports#[static]z.num-dropped\r\ntest strings::run ... ok\r\ntest resources::run ... ok\r\ntest variants::run ... FAILED\r\n\r\nfailures:\r\n\r\n---- many_arguments::run stdout ----\r\nbuilding MONO\r\ntesting \"D:\\\\bytcodealliance\\\\wit-bindgen\\\\target\\\\runtime-tests\\\\many_arguments\\\\csharp-mono-many-arguments\\\\bin\\\\Debug\\\\net9.0\\\\AppBundle\\\\csharp-wasm.wasm\"\r\nError: error while executing at wasm backtrace:\r\n    0: 0x742d - many_arguments\r\n                    at D:\\bytcodealliance\\wit-bindgen\\target\\runtime-tests\\many_arguments\\csharp-mono-many-arguments\\D:/bytcodealliance/wit-bindgen/target/runtime-tests/many_arguments/csharp-mono-many-arguments/obj/Debug/net9.0/wasm/for-publish\\pinvoke-table.h:241:3\r\n\r\nCaused by:\r\n    wasm trap: indirect call type mismatch\r\n\r\n---- versions::run stdout ----\r\nbuilding MONO\r\ntesting \"D:\\\\bytcodealliance\\\\wit-bindgen\\\\target\\\\runtime-tests\\\\versions\\\\csharp-mono-foo\\\\bin\\\\Debug\\\\net9.0\\\\AppBundle\\\\csharp-wasm.wasm\"\r\nError: error while executing at wasm backtrace:\r\n    0: 0x7b17 - test_3A_dep_2F_test_40_0_1_0_23_x\r\n                    at D:\\bytcodealliance\\wit-bindgen\\target\\runtime-tests\\versions\\csharp-mono-foo\\D:/bytcodealliance/wit-bindgen/target/runtime-tests/versions/csharp-mono-foo/obj/Debug/net9.0/wasm/for-publish\\pinvoke-table.h:301:3\r\n\r\nCaused by:\r\n    wasm trap: uninitialized element\r\n\r\n---- variants::run stdout ----\r\nbuilding MONO\r\ntesting \"D:\\\\bytcodealliance\\\\wit-bindgen\\\\target\\\\runtime-tests\\\\variants\\\\csharp-mono-variants\\\\bin\\\\Debug\\\\net9.0\\\\AppBundle\\\\csharp-wasm.wasm\"\r\nError: error while executing at wasm backtrace:\r\n    0: 0xda7f5b - wit-component:adapter:wasi_snapshot_preview1!wasi_snapshot_preview1::bindings::wasi::cli::exit::exit::h75b515544c429a0a\r\n    1: 0xda7ed0 - wit-component:adapter:wasi_snapshot_preview1!proc_exit\r\n    2: 0xdab769 - wit-component:shim!adapt-wasi_snapshot_preview1-proc_exit\r\n    3: 0x251d0a - __wasi_proc_exit\r\n                    at C:\\wasi-sdk\\sysroot\\wasi-libc-wasm32-wasip2\\libc-bottom-half/sources\\__wasilibc_real.c:574:5\r\n    4: 0x250f82 - _Exit\r\n                    at C:\\wasi-sdk\\sysroot\\wasi-libc-wasm32-wasip2\\libc-bottom-half/cloudlibc/src/libc/stdlib\\_Exit.c:11:3\r\n    5: 0x253cfc - exit\r\n                    at C:\\wasi-sdk\\sysroot\\wasi-libc-wasm32-wasip2\\libc-top-half/musl/src/exit\\exit.c:50:2\r\n    6: 0x9825 - wasi_trace_logger\r\n                    at C:\\Users\\lewing\\AppData\\Local\\Microsoft\\dotnet\\packs\\Microsoft.NETCore.App.Runtime.Mono.wasi-wasm\\9.0.0-rc.2.24429.19\\runtimes\\wasi-wasm\\native\\src\\driver.c:84:3\r\n    7: 0x48bc0 - eglib_log_adapter\r\n                    at /__w/1/s/src/mono/mono/utils/mono-logger.c:394:2\r\n    8: 0x45e57 - monoeg_g_logstr\r\n                    at /__w/1/s/src/mono/mono/eglib/goutput.c:151:2              - monoeg_g_logv_nofree\r\n                    at /__w/1/s/src/mono/mono/eglib/goutput.c:166:2\r\n    9: 0x45f64 - monoeg_g_logv\r\n                    at /__w/1/s/src/mono/mono/eglib/goutput.c:173:10              - monoeg_g_log\r\n                    at /__w/1/s/src/mono/mono/eglib/goutput.c:182:2\r\n   10: 0x45fb2 - monoeg_g_log_disabled\r\n                    at /__w/1/s/src/mono/mono/eglib/goutput.c:189:2\r\n   11: 0x20ad4 - get_build_args_from_sig_info\r\n                    at /__w/1/s/src/mono/mono/mini/interp/interp.c:1458:3\r\n   12: 0x1f424 - ves_pinvoke_method\r\n                    at /__w/1/s/src/mono/mono/mini/interp/interp.c:1756:27\r\n   13: 0xf004 - mono_interp_exec_method\r\n                    at /__w/1/s/src/mono/mono/mini/interp/interp.c:4259:4\r\n   14: 0x1e794 - interp_entry\r\n                    at /__w/1/s/src/mono/mono/mini/interp/interp.c:2320:2\r\n   15: 0x21678 - interp_entry_static_0\r\n                    at /__w/1/s/src/mono/mono/mini/interp/interp.c:3090:46\r\n   16: 0x8c59 - test_imports\r\n                    at D:\\bytcodealliance\\wit-bindgen\\target\\runtime-tests\\variants\\csharp-mono-variants\\D:/bytcodealliance/wit-bindgen/target/runtime-tests/variants/csharp-mono-variants/obj/Debug/net9.0/wasm/for-publish\\pinvoke-table.h:429:3\r\n\r\nCaused by:\r\n    Exited with i32 exit status 1\r\n\r\n\r\nfailures:\r\n    many_arguments::run\r\n    variants::run\r\n    versions::run\r\n\r\ntest result: FAILED. 24 passed; 3 failed; 0 ignored; 0 measured; 0 filtered out; finished in 391.68s\r\n```",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOi3CedQ==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc6Ka31S",
                                           "createdAt":  "2024-08-30T20:36:47Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "dotnet-policy-service",
                                           "body":  "Tagging subscribers to this area: @directhex, @matouskozak\nSee info in [area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md) if you want to be subscribed.\n\u003c!-- Policy app identification https://img.shields.io/static/v1?label=PullRequestIssueManagement. --\u003e",
                                           "updatedAt":  "2024-08-30T20:36:47Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6Ka_ii",
                                           "createdAt":  "2024-08-30T21:02:07Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "dotnet-policy-service",
                                           "body":  "Tagging subscribers to \u0027arch-wasm\u0027: @lewing\nSee info in [area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md) if you want to be subscribed.\n\u003c!-- Policy app identification https://img.shields.io/static/v1?label=PullRequestIssueManagement. --\u003e",
                                           "updatedAt":  "2024-08-30T21:02:07Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6KbBC6",
                                           "createdAt":  "2024-08-30T21:07:24Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "cc @kg ",
                                           "updatedAt":  "2024-08-30T21:07:24Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6KbFLf",
                                           "createdAt":  "2024-08-30T21:21:43Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "kg",
                                           "body":  "I don\u0027t really know what to make of this since i know nothing about WIT and very little about WASI. But if someone wants help investigating it they can feel free to tag me in to help them. To me it looks like unsupported p/invoke scenarios?",
                                           "updatedAt":  "2024-08-30T21:21:43Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6KbFac",
                                           "createdAt":  "2024-08-30T21:22:36Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  "Y3Vyc29yOnYyOpHODwf3sQ==",
                                                             "nodes":  [
                                                                           {
                                                                               "content":  "THUMBS_UP",
                                                                               "user":  "kg",
                                                                               "createdAt":  "2024-08-30T21:32:22Z"
                                                                           }
                                                                       ],
                                                             "totalCount":  1
                                                         },
                                           "author":  "lewing",
                                           "body":  "The first two are UCO issues, for example:\r\n\r\n```c\r\ntypedef void (*WasmInterpEntrySig_4) (int*, int*);\r\n__attribute__((export_name(\"test:dep/test@0.1.0#x\")))\r\nfloat test_3A_dep_2F_test_40_0_1_0_23_x () { \r\n  float res;\r\n  initialize_runtime(); \r\n  if (!(WasmInterpEntrySig_4)wasm_native_to_interp_ftndescs [4].func) {\r\n   mono_wasm_marshal_get_managed_wrapper (\"csharp-wasm\",\"FooWorld.wit.exports.test.dep.v0_1_0\", \"TestInterop\", \"wasmExportX\", 0);\r\n  }\r\n  ((WasmInterpEntrySig_4)wasm_native_to_interp_ftndescs [4].func) ((int*)\u0026res, wasm_native_to_interp_ftndescs [4].arg);\r\n  return res;\r\n}\r\n```\r\n\r\n```csharp\r\n        [UnmanagedCallersOnly(EntryPoint = \"test:dep/test@0.1.0#x\")]\r\n        public static unsafe float wasmExportX() {\r\n\r\n            float ret;\r\n            ret = TestImpl.X();\r\n            return ret;\r\n\r\n        }\r\n```\r\nlooks like it isn\u0027t finding the wrapper in mono_wasm_marshal_get_managed_wrapper",
                                           "updatedAt":  "2024-08-30T21:27:18Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6Kb546",
                                           "createdAt":  "2024-08-30T23:13:04Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "yeah the lookup logic is still too simple and there are collisions in the function lookup",
                                           "updatedAt":  "2024-08-30T23:13:17Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6LcJ51",
                                           "createdAt":  "2024-09-10T01:06:23Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "I think #107113 handles  (will retest once it lands) the method resolution in every important case, there are some corner cases around trimmed assemblies with overloaded methods that it doesn\u0027t address (but could do slightly better with when EntryPoint is defined).  And #107194 will allow us to use LinkerArg in wit-bindgen.",
                                           "updatedAt":  "2024-09-10T01:08:44Z"
                                       }
                                   ],
                         "totalCount":  7
                     },
        "title":  "[wasi] Failures in wit-bindgen runtime tests on mono",
        "labels":  [
                       "arch-wasm",
                       "area-Interop-mono",
                       "os-wasi"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/110938",
        "createdAt":  "2024-12-25T05:30:21Z",
        "number":  110938,
        "author":  "FriendSea",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2025-01-14T05:28:24Z",
        "body":  "### Description\n\nIn a WASM project, when using **NativeFileReference** for linking, it seems that the types used in **DllImport** are being scanned. \nHowever, this process does not appear to support nested types contained in other assemblies.\n\nIt seems like the issue stems from the assumption that the parent of the type is always an AssemblyReference.\nhttps://github.com/dotnet/runtime/blob/main/src/tasks/MonoTargetsTasks/MarshalingPInvokeScanner/MinimalMarshalingTypeCompatibilityProvider.cs#L142\n\n\n### Reproduction Steps\n\nDownload the zip file and try building the WasmProject.\n[dotnet_wasm_issue.zip](https://github.com/user-attachments/files/18243426/dotnet_wasm_issue.zip)\n\nThis project uses the **wasmconsole** template as the minimal setup to reproduce the issue, but the same problem occurs in Blazor WebAssembly as well.\n\n\n### Expected behavior\n\nThe project should build and run successfully.\n\n### Actual behavior\n\nError occurs.\n\nC:\\Program Files\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\8.0.11\\Sdk\\WasmAp \np.Native.targets(737,5): error MSB4018: \"MarshalingPInvokeScanner\" タスクが予期せずに 失敗しました。  \n\nC:\\Program Files\\dotnet\\packs\\Microsoft.NET.Runtime.WebAssembly.Sdk\\8.0.11\\Sdk\\WasmAp \np.Native.targets(737,5): error MSB4018: System.NotImplementedException: Unsupported R \nesolutionScope kind \u0027TypeReference\u0027 used in type :InnerValueType.  \n\n### Regression?\n\n_No response_\n\n### Known Workarounds\n\nThere is no issue when using top-level types, even if they are contained in a different assembly. \n\n### Configuration\n\n_No response_\n\n### Other information\n\n_No response_",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOmLBfwg==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc6YsF_C",
                                           "createdAt":  "2024-12-25T07:56:29Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "dotnet-policy-service",
                                           "body":  "Tagging subscribers to \u0027arch-wasm\u0027: @lewing\nSee info in [area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md) if you want to be subscribed.\n\u003c!-- Policy app identification https://img.shields.io/static/v1?label=PullRequestIssueManagement. --\u003e",
                                           "updatedAt":  "2024-12-25T07:56:29Z"
                                       }
                                   ],
                         "totalCount":  1
                     },
        "title":  "[WASM] MarshalingPInvokeScanner fails when using a nested value type contained in a different assembly.",
        "labels":  [
                       "arch-wasm",
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/112963",
        "createdAt":  "2025-02-26T17:55:21Z",
        "number":  112963,
        "author":  "pavelsavara",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2025-02-27T20:52:13Z",
        "body":  "when building `src\\tests\\Interop\\Interop.csproj` for browser with `WasmBuildNative=true`\n\n[Log](https://dev.azure.com/dnceng-public/public/_build/results?buildId=963771\u0026view=logs\u0026j=3e93a48f-6568-53f2-76b3-1285c183c39d\u0026t=313dc435-bc2e-554b-c5b1-106790cdfaec)\n```\nwarning WASM0001: Could not get pinvoke, or callbacks for method \u0027ArrayWithOffsetNative::Marshal_InOut\u0027 because \u0027System.NotSupportedException: Unsupported parameter type in method \u0027ArrayWithOffsetNative.Marshal_InOut\u0027\nwarning WASM0001: Could not get pinvoke, or callbacks for method \u0027ArrayWithOffsetNative::Marshal_InOut\u0027 because \u0027System.NotSupportedException: Unsupported parameter type in method \u0027ArrayWithOffsetNative.Marshal_InOut\u0027\nwarning WASM0001: at PInvokeCollector.\u003cCollectPInvokes\u003eg__CollectPInvokesForMethod|6_0(MethodInfo method, \u003c\u003ec__DisplayClass6_0\u0026) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 113\nwarning WASM0001: at PInvokeCollector.\u003cCollectPInvokes\u003eg__CollectPInvokesForMethod|6_0(MethodInfo method, \u003c\u003ec__DisplayClass6_0\u0026) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 113\nwarning WASM0001: at PInvokeCollector.CollectPInvokes(List`1 pinvokes, List`1 callbacks, HashSet`1 signatures, Type type) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 75\u0027\nmessage WASM0061: Type PInvokeTests.AutoStruct is not blittable: LayoutKind is not Sequential\nwarning WASM0001: Could not get pinvoke, or callbacks for method \u0027PInvokeTests.StructureTests::Invalid\u0027 because \u0027System.NotSupportedException: Unsupported parameter type in method \u0027PInvokeTests.StructureTests.Invalid\u0027\nwarning WASM0001: Could not get pinvoke, or callbacks for method \u0027PInvokeTests.StructureTests::Invalid\u0027 because \u0027System.NotSupportedException: Unsupported parameter type in method \u0027PInvokeTests.StructureTests.Invalid\u0027\nwarning WASM0001: at PInvokeCollector.\u003cCollectPInvokes\u003eg__CollectPInvokesForMethod|6_0(MethodInfo method, \u003c\u003ec__DisplayClass6_0\u0026) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 113\nwarning WASM0001: at PInvokeCollector.\u003cCollectPInvokes\u003eg__CollectPInvokesForMethod|6_0(MethodInfo method, \u003c\u003ec__DisplayClass6_0\u0026) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 113\nwarning WASM0001: at PInvokeCollector.CollectPInvokes(List`1 pinvokes, List`1 callbacks, HashSet`1 signatures, Type type) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 75\u0027\nwarning WASM0001: at PInvokeCollector.CollectPInvokes(List`1 pinvokes, List`1 callbacks, HashSet`1 signatures, Type type) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 75\u0027\nwarning WASM0001: Could not get pinvoke, or callbacks for method \u0027PInvokeTests.StructureTests::InvalidReturn\u0027 because \u0027System.NotSupportedException: Unsupported parameter type in method \u0027PInvokeTests.StructureTests.InvalidReturn\u0027\nwarning WASM0001: Could not get pinvoke, or callbacks for method \u0027PInvokeTests.StructureTests::InvalidReturn\u0027 because \u0027System.NotSupportedException: Unsupported parameter type in method \u0027PInvokeTests.StructureTests.InvalidReturn\u0027\nwarning WASM0001: at PInvokeCollector.\u003cCollectPInvokes\u003eg__CollectPInvokesForMethod|6_0(MethodInfo method, \u003c\u003ec__DisplayClass6_0\u0026) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 113\nwarning WASM0001: at PInvokeCollector.\u003cCollectPInvokes\u003eg__CollectPInvokesForMethod|6_0(MethodInfo method, \u003c\u003ec__DisplayClass6_0\u0026) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 113\nwarning WASM0001: at PInvokeCollector.CollectPInvokes(List`1 pinvokes, List`1 callbacks, HashSet`1 signatures, Type type) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 75\u0027\nwarning WASM0001: at PInvokeCollector.CollectPInvokes(List`1 pinvokes, List`1 callbacks, HashSet`1 signatures, Type type) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 75\u0027\nmessage WASM0061: Type System.ArgIterator is not blittable: LayoutKind is not Sequential\nwarning WASM0001: Could not get pinvoke, or callbacks for method \u0027PInvokeTests.VarargsTest::TestArgIterator\u0027 because \u0027System.NotSupportedException: Unsupported parameter type in method \u0027PInvokeTests.VarargsTest.TestArgIterator\u0027\nwarning WASM0001: Could not get pinvoke, or callbacks for method \u0027PInvokeTests.VarargsTest::TestArgIterator\u0027 because \u0027System.NotSupportedException: Unsupported parameter type in method \u0027PInvokeTests.VarargsTest.TestArgIterator\u0027\nwarning WASM0001: at PInvokeCollector.\u003cCollectPInvokes\u003eg__CollectPInvokesForMethod|6_0(MethodInfo method, \u003c\u003ec__DisplayClass6_0\u0026) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 113\nwarning WASM0001: at PInvokeCollector.\u003cCollectPInvokes\u003eg__CollectPInvokesForMethod|6_0(MethodInfo method, \u003c\u003ec__DisplayClass6_0\u0026) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 113\nwarning WASM0001: at PInvokeCollector.CollectPInvokes(List`1 pinvokes, List`1 callbacks, HashSet`1 signatures, Type type) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 75\u0027\nwarning WASM0001: at PInvokeCollector.CollectPInvokes(List`1 pinvokes, List`1 callbacks, HashSet`1 signatures, Type type) in /_/src/tasks/WasmAppBuilder/PInvokeCollector.cs:line 75\u0027\n```\n",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOoEgxBA==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc6gFfvn",
                                           "createdAt":  "2025-02-26T17:55:55Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "dotnet-policy-service",
                                           "body":  "Tagging subscribers to \u0027arch-wasm\u0027: @lewing\nSee info in [area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md) if you want to be subscribed.\n\u003c!-- Policy app identification https://img.shields.io/static/v1?label=PullRequestIssueManagement. --\u003e",
                                           "updatedAt":  "2025-02-26T17:55:55Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6gFgV3",
                                           "createdAt":  "2025-02-26T17:57:08Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "pavelsavara",
                                           "body":  "cc @kg ",
                                           "updatedAt":  "2025-02-26T17:57:08Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6gR7ks",
                                           "createdAt":  "2025-02-27T20:34:46Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "Are we building this in CI regularly or trying to enable that?",
                                           "updatedAt":  "2025-02-27T20:34:46Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6gSAFa",
                                           "createdAt":  "2025-02-27T20:45:05Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "pavelsavara",
                                           "body":  "I tried to enable diagnostics for all lib tests (to see how profiler events are balanced). That triggers native re-link .... It was one-off test and it\u0027s easy to exclude this lib. I made issue because I was not sure if those scenarios should be supported on wasm or not",
                                           "updatedAt":  "2025-02-27T20:45:22Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6gSDEE",
                                           "createdAt":  "2025-02-27T20:52:11Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "lewing",
                                           "body":  "What exactly is the right thing to do here is a little complicated.  We chose to warn in some of these cases rather than just fail at runtime, which may not have been correct, the interplay between real interop and what we\u0027ve hacked together for wasm is complicated.  I\u0027ll take a closer look at the tests.",
                                           "updatedAt":  "2025-02-27T20:52:11Z"
                                       }
                                   ],
                         "totalCount":  5
                     },
        "title":  "[browser] failing blittable tests - src\\tests\\Interop\\Interop.csproj",
        "labels":  [
                       "arch-wasm",
                       "area-Interop-mono",
                       "os-browser"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/114007",
        "createdAt":  "2025-03-28T13:13:26Z",
        "number":  114007,
        "author":  "Liangjia0411",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2025-05-19T20:48:56Z",
        "body":  "### Issue Summary\nWhen performing interop between C# and C++ through Mono, I\u0027ve discovered unstable behavior when structs contain reference type fields. Specifically, in certain scenarios, reference type fields within structs cannot be accessed correctly.\n\n### Reproduction Environment\n- .NET version: 9.0.1\n- Runtime: Mono\n- Platform: PC\n\n### Issue Details\nWhen passing structs containing reference type fields between C# and C++ via P/Invoke, the following anomalous behavior is observed:\n- When `TestClass` **includes** a `TestDelegate` field, the program runs normally and outputs the correct value (`1`)\n- When `TestClass` **does not include** a `TestDelegate` field, attempting to access `IntField` throws a \"null reference exception\"\n\nAdditionally, when debugging with Visual Studio, a breakpoint is triggered when accessing `IntField`, but continuing execution still results in the same exception.\n\n### Reproduction Code\n\n```csharp\n// C# part\nusing System.Runtime.CompilerServices;\n\nnamespace UnrealEngine.Game.Issues\n{\n    class JitErrorForStructTest\n    {\n        public static void Run()\n        {\n            TestClass testClass = new TestClass();\n            testClass.IntField = 1;\n\n            TestStruct a = ReturnTestStruct(testClass);\n\n            UELog.Log($\"{a.Class.IntField}\"); // Exception occurs here (if TestDelegate field is removed)\n        }\n\n        [MethodImpl(MethodImplOptions.InternalCall)]\n        private static extern TestStruct ReturnTestStruct(TestClass uclass);\n\n        public delegate void TestDelegate();\n\n        public class TestClass\n        {\n            public int IntField;\n            public TestDelegate @Delegate; // Removing this line causes the issue\n            public TestClass Class;\n        }\n\n        public struct TestStruct\n        {\n            public TestStruct(TestClass InClass)\n            {\n                Class = InClass;\n            }\n\n            public TestClass Class;\n        }\n    }\n}\n```\n\n```cpp\n// C++ part\nclass JitErrorForStructTest\n{\npublic:\n    static void ExportNativeFunctions()\n    {\n        mono_add_internal_call(\"UnrealEngine.Game.Issues.JitErrorForStructTest::ReturnTestStruct\", SCRIPTITNG_CALL_CONVENTION ReturnTestStruct);\n    }\n\n    struct TestStruct\n    {\n        MonoObject* Class;\n    };\n\n    static TestStruct ReturnTestStruct(MonoObject* Class)\n    {\n        TestStruct ReturnItem;\n        mono_gc_wbarrier_generic_store(\u0026ReturnItem.Class, Class);\n        return ReturnItem;\n    }\n};\n```\n\n### Expected Behavior\nRegardless of whether `TestClass` includes a `TestDelegate` field, the program should correctly access and output the value of `IntField`.\n\n### Actual Behavior\nWhen the `TestDelegate` field is removed, accessing `a.Class.IntField` throws a null reference exception.\n\nI would appreciate assistance investigating this issue, which may be related to struct memory layout or reference tracking. Thank you!",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  "Y3Vyc29yOnYyOpHOq1zyhA==",
                         "nodes":  [
                                       {
                                           "id":  "IC_kwDODI9FZc6klxoU",
                                           "createdAt":  "2025-03-28T13:27:34Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "Liangjia0411",
                                           "body":  "# JIT Code Details\n\nBelow are the JIT compilation details printed using environment variables. These logs were obtained using the following code:\n\n```csharp\nDotnetRuntimeSetEnv(\"MONO_VERBOSE_METHOD\", \"UnrealEngine.Game.Issues.JitErrorForStructTest::ReturnTestStruct\", 1);\n```\n\n## JIT Code Generated During Abnormal Runtime\n\n```\nconverting method (wrapper managed-to-native) UnrealEngine.Game.Issues.JitErrorForStructTest/TestStruct UnrealEngine.Game.Issues.JitErrorForStructTest:ReturnTestStruct (UnrealEngine.Game.Issues.JitErrorForStructTest/TestClass)\ncreated temp 0 (R16) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\ncreating vars\ncreated temp 1 (R17) of type System.Object\ncreating locals\n local [0]: \ncreated temp 2 (R18) of type System.IntPtr\nlocals done\ncreated temp 3 (R19) of type System.IntPtr\ncreated temp 4 (R20) of type System.IntPtr\ncreated temp 5 (R21) of type System.IntPtr\ncreated temp 6 (R23) of type System.IntPtr\ncreated temp 7 (R28) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\ncreated temp 8 (R32) of type System.IntPtr\ncreated temp 9 (R38) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\ncreated temp 10 (R41) of type System.Object\ncreated temp 11 (R44) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\ncreated temp 12 (R45) of type System.Object\ncreated temp 13 (R48) of type System.Object\ncreated temp 14 (R59) of type System.IntPtr\nREGION BB0 IL_0000 ID_FFFFFFFF\nREGION BB2 IL_0000 ID_FFFFFFFF\nREGION BB3 IL_0024 ID_FFFFFFFF\nREGION BB5 IL_0032 ID_FFFFFFFF\nREGION BB7 IL_0045 ID_FFFFFFFF\nREGION BB6 IL_0047 ID_FFFFFFFF\nREGION BB4 IL_0048 ID_FFFFFFFF\nREGION BB1 IL_0000 ID_FFFFFFFF\nAFTER METHOD-TO-IR 0: [IN: , OUT:  BB2(0) ]\nAFTER METHOD-TO-IR 2: [IN:  BB0(0), OUT:  BB3(0) ]\nAFTER METHOD-TO-IR 3: [IN:  BB2(0), OUT:  BB4(0) BB5(0) ]\nAFTER METHOD-TO-IR 5: [IN:  BB3(0), OUT:  BB6(0) BB7(0) ]\nAFTER METHOD-TO-IR 7: [IN:  BB5(0), OUT:  BB1(0) ]\nAFTER METHOD-TO-IR 6: [IN:  BB5(0), OUT:  BB4(0) ]\nAFTER METHOD-TO-IR 4: [IN:  BB3(0) BB6(0), OUT:  BB1(0) ]\nAFTER METHOD-TO-IR 1: [IN:  BB7(0) BB4(0), OUT:  ]\nblock merge triggered 2 -\u003e 3\nbr removal triggered 4 -\u003e 1\nBEFORE ALIAS_ANALYSIS 0: [IN: , OUT:  BB2(0) ]\nBEFORE ALIAS_ANALYSIS 2: [IN:  BB0(0), OUT:  BB4(0) BB5(0) ]\nBEFORE ALIAS_ANALYSIS 5: [IN:  BB2(0), OUT:  BB6(0) BB7(0) ]\nBEFORE ALIAS_ANALYSIS 7: [IN:  BB5(0), OUT:  BB1(0) ]\nBEFORE ALIAS_ANALYSIS 6: [IN:  BB5(0), OUT:  BB4(0) ]\nBEFORE ALIAS_ANALYSIS 4: [IN:  BB6(0) BB2(0), OUT:  BB1(0) ]\nBEFORE ALIAS_ANALYSIS 1: [IN:  BB7(0) BB4(0), OUT:  ]\nAFTER ALIAS_ANALYSIS 0: [IN: , OUT:  BB2(0) ]\nAFTER ALIAS_ANALYSIS 2: [IN:  BB0(0), OUT:  BB4(0) BB5(0) ]\nAFTER ALIAS_ANALYSIS 5: [IN:  BB2(0), OUT:  BB6(0) BB7(0) ]\nAFTER ALIAS_ANALYSIS 7: [IN:  BB5(0), OUT:  BB1(0) ]\nAFTER ALIAS_ANALYSIS 6: [IN:  BB5(0), OUT:  BB4(0) ]\nAFTER ALIAS_ANALYSIS 4: [IN:  BB6(0) BB2(0), OUT:  BB1(0) ]\nAFTER ALIAS_ANALYSIS 1: [IN:  BB7(0) BB4(0), OUT:  ]\n BB0\n\n BB0\n BB2\n\n BB0\n BB2\n BB4\n\n BB0\n BB2\n BB1\n\n BB0\n BB2\n BB5\n\n BB0\n BB2\n BB5\n BB6\n\n BB0\n BB2\n BB5\n BB7\n\nBEFORE SAFEPOINTS 0: [IN: , OUT:  BB2(1) ]\nBEFORE SAFEPOINTS 2: [IN:  BB0(0), OUT:  BB4(2) BB5(4) ]\nBEFORE SAFEPOINTS 5: [IN:  BB2(1), OUT:  BB6(5) BB7(6) ]\nBEFORE SAFEPOINTS 7: [IN:  BB5(4), OUT:  BB1(3) ]\nBEFORE SAFEPOINTS 6: [IN:  BB5(4), OUT:  BB4(2) ]\nBEFORE SAFEPOINTS 4: [IN:  BB6(5) BB2(1), OUT:  BB1(3) ]\nBEFORE SAFEPOINTS 1: [IN:  BB7(6) BB4(2), OUT:  ]\nAFTER SAFEPOINTS 0: [IN: , OUT:  BB2(1) ]\nAFTER SAFEPOINTS 2: [IN:  BB0(0), OUT:  BB4(2) BB5(4) ]\nAFTER SAFEPOINTS 5: [IN:  BB2(1), OUT:  BB6(5) BB7(6) ]\nAFTER SAFEPOINTS 7: [IN:  BB5(4), OUT:  BB1(3) ]\nAFTER SAFEPOINTS 6: [IN:  BB5(4), OUT:  BB4(2) ]\nAFTER SAFEPOINTS 4: [IN:  BB6(5) BB2(1), OUT:  BB1(3) ]\nAFTER SAFEPOINTS 1: [IN:  BB7(6) BB4(2), OUT:  ]\nBEFORE LOWER-VTYPE-OPTS  0: [IN: , OUT:  BB2(1) ]\nAFTER LOWER-VTYPE-OPTS  0: [IN: , OUT:  BB2(1) ]\nBEFORE LOWER-VTYPE-OPTS  2: [IN:  BB0(0), OUT:  BB4(2) BB5(4) ]\nAFTER LOWER-VTYPE-OPTS  2: [IN:  BB0(0), OUT:  BB4(2) BB5(4) ]\nBEFORE LOWER-VTYPE-OPTS  5: [IN:  BB2(1), OUT:  BB6(5) BB7(6) ]\ncreated temp 15 (R39) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\nAFTER LOWER-VTYPE-OPTS  5: [IN:  BB2(1), OUT:  BB6(5) BB7(6) ]\nBEFORE LOWER-VTYPE-OPTS  7: [IN:  BB5(4), OUT:  BB1(3) ]\ncreated temp 16 (R46) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\nAFTER LOWER-VTYPE-OPTS  7: [IN:  BB5(4), OUT:  BB1(3) ]\nBEFORE LOWER-VTYPE-OPTS  6: [IN:  BB5(4), OUT:  BB4(2) ]\ncreated temp 17 (R55) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\nAFTER LOWER-VTYPE-OPTS  6: [IN:  BB5(4), OUT:  BB4(2) ]\nBEFORE LOWER-VTYPE-OPTS  4: [IN:  BB6(5) BB2(1), OUT:  BB1(3) ]\ncreated temp 18 (R57) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\nAFTER LOWER-VTYPE-OPTS  4: [IN:  BB6(5) BB2(1), OUT:  BB1(3) ]\nBEFORE LOWER-VTYPE-OPTS  1: [IN:  BB7(6) BB4(2), OUT:  ]\nAFTER LOWER-VTYPE-OPTS  1: [IN:  BB7(6) BB4(2), OUT:  ]\nDUMP BLOCK 0:\nDUMP BLOCK 2:\nDUMP BLOCK 5:\nDUMP BLOCK 7:\nDUMP BLOCK 6:\nDUMP BLOCK 4:\nDUMP BLOCK 1:\nBasic block 0 starting at offset 0x54\nBasic block 2 starting at offset 0x73\nBasic block 5 starting at offset 0x15a\nBasic block 7 starting at offset 0x1aa\nBasic block 6 starting at offset 0x1f3\nBasic block 4 starting at offset 0x220\nBasic block 1 starting at offset 0x25d\nMethod (wrapper managed-to-native) UnrealEngine.Game.Issues.JitErrorForStructTest/TestStruct UnrealEngine.Game.Issues.JitErrorForStructTest:ReturnTestStruct (UnrealEngine.Game.Issues.JitErrorForStructTest/TestClass) emitted at 000001E6DF828450 to 000001E6DF8286E2 (code length 658)\n\n*** ASM for (wrapper managed-to-native) UnrealEngine.Game.Issues.JitErrorForStructTest:ReturnTestStruct (UnrealEngine.Game.Issues.JitErrorForStructTest/TestClass) ***\n\n```\n\n## JIT Code Generated During Normal Runtime\n\n```\nconverting method (wrapper managed-to-native) UnrealEngine.Game.Issues.JitErrorForStructTest/TestStruct UnrealEngine.Game.Issues.JitErrorForStructTest:ReturnTestStruct (UnrealEngine.Game.Issues.JitErrorForStructTest/TestClass)\ncreated temp 0 (R16) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\ncreating vars\ncreated temp 1 (R17) of type System.Object\ncreating locals\n local [0]: \ncreated temp 2 (R18) of type System.IntPtr\nlocals done\ncreated temp 3 (R19) of type System.IntPtr\ncreated temp 4 (R20) of type System.IntPtr\ncreated temp 5 (R21) of type System.IntPtr\ncreated temp 6 (R23) of type System.IntPtr\ncreated temp 7 (R28) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\ncreated temp 8 (R32) of type System.IntPtr\ncreated temp 9 (R38) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\ncreated temp 10 (R41) of type System.Object\ncreated temp 11 (R44) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\ncreated temp 12 (R45) of type System.Object\ncreated temp 13 (R48) of type System.Object\ncreated temp 14 (R59) of type System.IntPtr\nREGION BB0 IL_0000 ID_FFFFFFFF\nREGION BB2 IL_0000 ID_FFFFFFFF\nREGION BB3 IL_0024 ID_FFFFFFFF\nREGION BB5 IL_0032 ID_FFFFFFFF\nREGION BB7 IL_0045 ID_FFFFFFFF\nREGION BB6 IL_0047 ID_FFFFFFFF\nREGION BB4 IL_0048 ID_FFFFFFFF\nREGION BB1 IL_0000 ID_FFFFFFFF\nAFTER METHOD-TO-IR 0: [IN: , OUT:  BB2(0) ]\nAFTER METHOD-TO-IR 2: [IN:  BB0(0), OUT:  BB3(0) ]\nAFTER METHOD-TO-IR 3: [IN:  BB2(0), OUT:  BB4(0) BB5(0) ]\nAFTER METHOD-TO-IR 5: [IN:  BB3(0), OUT:  BB6(0) BB7(0) ]\nAFTER METHOD-TO-IR 7: [IN:  BB5(0), OUT:  BB1(0) ]\nAFTER METHOD-TO-IR 6: [IN:  BB5(0), OUT:  BB4(0) ]\nAFTER METHOD-TO-IR 4: [IN:  BB3(0) BB6(0), OUT:  BB1(0) ]\nAFTER METHOD-TO-IR 1: [IN:  BB7(0) BB4(0), OUT:  ]\nblock merge triggered 2 -\u003e 3\nbr removal triggered 4 -\u003e 1\nBEFORE ALIAS_ANALYSIS 0: [IN: , OUT:  BB2(0) ]\nBEFORE ALIAS_ANALYSIS 2: [IN:  BB0(0), OUT:  BB4(0) BB5(0) ]\nBEFORE ALIAS_ANALYSIS 5: [IN:  BB2(0), OUT:  BB6(0) BB7(0) ]\nBEFORE ALIAS_ANALYSIS 7: [IN:  BB5(0), OUT:  BB1(0) ]\nBEFORE ALIAS_ANALYSIS 6: [IN:  BB5(0), OUT:  BB4(0) ]\nBEFORE ALIAS_ANALYSIS 4: [IN:  BB6(0) BB2(0), OUT:  BB1(0) ]\nBEFORE ALIAS_ANALYSIS 1: [IN:  BB7(0) BB4(0), OUT:  ]\nAFTER ALIAS_ANALYSIS 0: [IN: , OUT:  BB2(0) ]\nAFTER ALIAS_ANALYSIS 2: [IN:  BB0(0), OUT:  BB4(0) BB5(0) ]\nAFTER ALIAS_ANALYSIS 5: [IN:  BB2(0), OUT:  BB6(0) BB7(0) ]\nAFTER ALIAS_ANALYSIS 7: [IN:  BB5(0), OUT:  BB1(0) ]\nAFTER ALIAS_ANALYSIS 6: [IN:  BB5(0), OUT:  BB4(0) ]\nAFTER ALIAS_ANALYSIS 4: [IN:  BB6(0) BB2(0), OUT:  BB1(0) ]\nAFTER ALIAS_ANALYSIS 1: [IN:  BB7(0) BB4(0), OUT:  ]\n BB0\n\n BB0\n BB2\n\n BB0\n BB2\n BB4\n\n BB0\n BB2\n BB1\n\n BB0\n BB2\n BB5\n\n BB0\n BB2\n BB5\n BB6\n\n BB0\n BB2\n BB5\n BB7\n\nBEFORE SAFEPOINTS 0: [IN: , OUT:  BB2(1) ]\nBEFORE SAFEPOINTS 2: [IN:  BB0(0), OUT:  BB4(2) BB5(4) ]\nBEFORE SAFEPOINTS 5: [IN:  BB2(1), OUT:  BB6(5) BB7(6) ]\nBEFORE SAFEPOINTS 7: [IN:  BB5(4), OUT:  BB1(3) ]\nBEFORE SAFEPOINTS 6: [IN:  BB5(4), OUT:  BB4(2) ]\nBEFORE SAFEPOINTS 4: [IN:  BB6(5) BB2(1), OUT:  BB1(3) ]\nBEFORE SAFEPOINTS 1: [IN:  BB7(6) BB4(2), OUT:  ]\nAFTER SAFEPOINTS 0: [IN: , OUT:  BB2(1) ]\nAFTER SAFEPOINTS 2: [IN:  BB0(0), OUT:  BB4(2) BB5(4) ]\nAFTER SAFEPOINTS 5: [IN:  BB2(1), OUT:  BB6(5) BB7(6) ]\nAFTER SAFEPOINTS 7: [IN:  BB5(4), OUT:  BB1(3) ]\nAFTER SAFEPOINTS 6: [IN:  BB5(4), OUT:  BB4(2) ]\nAFTER SAFEPOINTS 4: [IN:  BB6(5) BB2(1), OUT:  BB1(3) ]\nAFTER SAFEPOINTS 1: [IN:  BB7(6) BB4(2), OUT:  ]\nBEFORE LOWER-VTYPE-OPTS  0: [IN: , OUT:  BB2(1) ]\nAFTER LOWER-VTYPE-OPTS  0: [IN: , OUT:  BB2(1) ]\nBEFORE LOWER-VTYPE-OPTS  2: [IN:  BB0(0), OUT:  BB4(2) BB5(4) ]\nAFTER LOWER-VTYPE-OPTS  2: [IN:  BB0(0), OUT:  BB4(2) BB5(4) ]\nBEFORE LOWER-VTYPE-OPTS  5: [IN:  BB2(1), OUT:  BB6(5) BB7(6) ]\ncreated temp 15 (R39) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\nAFTER LOWER-VTYPE-OPTS  5: [IN:  BB2(1), OUT:  BB6(5) BB7(6) ]\nBEFORE LOWER-VTYPE-OPTS  7: [IN:  BB5(4), OUT:  BB1(3) ]\ncreated temp 16 (R46) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\nAFTER LOWER-VTYPE-OPTS  7: [IN:  BB5(4), OUT:  BB1(3) ]\nBEFORE LOWER-VTYPE-OPTS  6: [IN:  BB5(4), OUT:  BB4(2) ]\ncreated temp 17 (R55) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\nAFTER LOWER-VTYPE-OPTS  6: [IN:  BB5(4), OUT:  BB4(2) ]\nBEFORE LOWER-VTYPE-OPTS  4: [IN:  BB6(5) BB2(1), OUT:  BB1(3) ]\ncreated temp 18 (R57) of type UnrealEngine.Game.Issues.JitErrorForStructTest.TestStruct\nAFTER LOWER-VTYPE-OPTS  4: [IN:  BB6(5) BB2(1), OUT:  BB1(3) ]\nBEFORE LOWER-VTYPE-OPTS  1: [IN:  BB7(6) BB4(2), OUT:  ]\nAFTER LOWER-VTYPE-OPTS  1: [IN:  BB7(6) BB4(2), OUT:  ]\nDUMP BLOCK 0:\nDUMP BLOCK 2:\nDUMP BLOCK 5:\nDUMP BLOCK 7:\nDUMP BLOCK 6:\nDUMP BLOCK 4:\nDUMP BLOCK 1:\nBasic block 0 starting at offset 0x54\nBasic block 2 starting at offset 0x73\nBasic block 5 starting at offset 0x15b\nBasic block 7 starting at offset 0x1b3\nBasic block 6 starting at offset 0x1fb\nBasic block 4 starting at offset 0x22a\nBasic block 1 starting at offset 0x269\nMethod (wrapper managed-to-native) UnrealEngine.Game.Issues.JitErrorForStructTest/TestStruct UnrealEngine.Game.Issues.JitErrorForStructTest:ReturnTestStruct (UnrealEngine.Game.Issues.JitErrorForStructTest/TestClass) emitted at 0000022F442470A0 to 0000022F4424733E (code length 670)\n\n*** ASM for (wrapper managed-to-native) UnrealEngine.Game.Issues.JitErrorForStructTest:ReturnTestStruct (UnrealEngine.Game.Issues.JitErrorForStructTest/TestClass) ***\n```",
                                           "updatedAt":  "2025-03-28T13:27:34Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6knxSQ",
                                           "createdAt":  "2025-03-28T16:40:40Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "Liangjia0411",
                                           "body":  "When the @ Delegate field is included in TestClass, if the field type is changed to another reference type, the runtime will also throw an exception\n```c#\npublic class TestClass\n{\n    public int IntField;\n    public TestClass1 @Delegate; // causes the issue\n    public TestClass Class;\n}\n\npublic class TestClass1\n{\n}\n```",
                                           "updatedAt":  "2025-03-28T16:40:40Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6rXJHK",
                                           "createdAt":  "2025-05-13T03:42:39Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "agocke",
                                           "body":  "@dotnet/interop-contrib is this supported outside of COM interop? ",
                                           "updatedAt":  "2025-05-13T03:42:39Z"
                                       },
                                       {
                                           "id":  "IC_kwDODI9FZc6rXPKE",
                                           "createdAt":  "2025-05-13T04:07:13Z",
                                           "reactions":  {
                                                             "hasNextPage":  false,
                                                             "endCursor":  null,
                                                             "nodes":  [

                                                                       ],
                                                             "totalCount":  0
                                                         },
                                           "author":  "AaronRobinsonMSFT",
                                           "body":  "@agocke There is some narrow support on Mono for such scenarios. In this case, I\u0027m unclear if we\u0027ve changed anything in this space and therefore this is likely a long standing issue in Mono. However, if it previously worked we should try and fix the behavior. From a .NET perspective, this isn\u0027t supported outside of some COM interop scenarios or advanced marshalling techniques using `GCHandle`s.\n\nThe specific example here with `Delegate`s is a special case since marshalling can convert that to a function pointer and keep the delegate alive until a return. C# function pointers remove this need expect when closures are involved, but that then requires the delegate to live as long as the function call and perhaps longer if it is stored somewhere.\n\nThe **TL;DR** on this one is we should determine if this ever worked and if so, fix it. Otherwise, I am inclined to mark this as by design.",
                                           "updatedAt":  "2025-05-13T04:07:13Z"
                                       }
                                   ],
                         "totalCount":  4
                     },
        "title":  "[Mono] Interop issue with structs containing reference type fields between C# and C++",
        "labels":  [
                       "area-Interop-mono"
                   ]
    },
    {
        "url":  "https://github.com/dotnet/runtime/issues/116154",
        "createdAt":  "2025-05-30T17:47:33Z",
        "number":  116154,
        "author":  "rene-descartes2021",
        "reactions":  {
                          "hasNextPage":  false,
                          "endCursor":  null,
                          "nodes":  [

                                    ],
                          "totalCount":  0
                      },
        "updatedAt":  "2025-06-16T20:25:12Z",
        "body":  "### Description\n\nWhen using an enum for a SizeParamIndex using Mono runtime, the following exception will be thrown:\n```\nMarshalDirectiveException: Array size control parameter must be an integral type.\n```\nIn src/tests/ I searched for SizeParamIndex and found no test which used an enum for it.\n\n**EDIT:** I think related is #35225 which covers interop tests which fail in Mono runtime but pass in CoreCLR, but a test doesn\u0027t currently exist for this enum issue.\n\n#### Background context\n\nI found this [problem when building and running OmniSharp,](https://github.com/OmniSharp/omnisharp-roslyn/issues/2671#issuecomment-2888609154) which surfaces there in the use of [microsoft/MSBuildLocator](https://github.com/microsoft/MSBuildLocator). Relevant MSBuildLocator code here:\nhttps://github.com/microsoft/MSBuildLocator/blob/0bbf4988996176904ecc0dabb73165919fac605f/src/MSBuildLocator/NativeMethods.cs#L32\n\n### Reproduction Steps\n\nModify a test to use an enum for SizeParamIndex and test on Mono runtime.\n\n### Expected behavior\n\nNo exception. microsoft/MSBuildLocator wrote in issues that Mono isn\u0027t supported, it works fine on CoreCLR.\n\n### Actual behavior\n\nSee above MarshalDirectiveException.\n\n### Regression?\n\n_No response_\n\n### Known Workarounds\n\n_No response_\n\n### Configuration\n\ndotnet core compiled with `--use-mono-runtime`.\nOn Android using Termux.\n\n### Other information\n\nI think it is a one line fix, add `case MONO_TYPE_ENUM` to the switch here:\nhttps://github.com/dotnet/runtime/blob/1713d65316467e3eaf23514b6642eba5869f1b70/src/mono/mono/component/marshal-ilgen.c#L474-L487\n\nAnd add a SizeParamIndex test which uses an enum.",
        "comments":  {
                         "hasNextPage":  false,
                         "endCursor":  null,
                         "nodes":  [

                                   ],
                         "totalCount":  0
                     },
        "title":  "[Mono]: DllImport using MarshalAs and SizeParamIndex set to an enum parameter not implemented",
        "labels":  [
                       "area-Interop-mono"
                   ]
    }
]
